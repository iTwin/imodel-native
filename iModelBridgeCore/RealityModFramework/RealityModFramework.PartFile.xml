<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="PublicAPI" BentleyBuildMakeFile="RealityModFramework.prewire.mke">
        <Bindings>
            <PublicAPI Domain="RealityPlatform" />
            <PublicAPI Domain="RealityPackage" />
        </Bindings>
    </Part>
    
    <Part Name="RealityPlatform" BentleyBuildMakeFile="RealityPlatform\RealityPlatform.mke">
	    <SubPart PartName="RealityPackage" />
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="ImagePPDll"                 PartFile="ImagePP"                   Repository="ImagePP" />
        <SubPart PartName="PointoolsVortexAPI_DLL"     PartFile="PointoolsVortexAPI"        Repository="PointoolsVortexAPI" />
        <SubPart PartName="BeCurl"                     PartFile="BeCurl"                    Repository="Libsrc-Curl"/>
        <SubPart PartName="BeHttp"                     PartFile="BeHttp"                    Repository="BeHttp"/>
        <SubPart PartName="BeJsonCpp"                  PartFile="BeJsonCpp"                 Repository="Libsrc-JsonCpp"/>        
        <Bindings>
            <Libs>Delivery/$(stlibprefix)RealityPlatform$(stlibext)</Libs>
            <Assemblies>delivery/$(shlibprefix)RealityPlatform$(shlibext)</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="RealityAdmin" BentleyBuildMakeFile="RealityAdmin\RealityAdmin.mke">
        <SubPart PartName="ImagePPDll"                 PartFile="ImagePP"                   Repository="ImagePP" />
        <SubPart PartName="PointoolsVortexAPI_DLL"     PartFile="PointoolsVortexAPI"        Repository="PointoolsVortexAPI" />
        <SubPart PartName="BeCurl"                     PartFile="BeCurl"                    Repository="Libsrc-Curl"/>
        <SubPart PartName="BeHttp"                     PartFile="BeHttp"                    Repository="BeHttp"/>
        <SubPart PartName="BeJsonCpp"                  PartFile="BeJsonCpp"                 Repository="Libsrc-JsonCpp"/>        
        <SubPart PartName="RealityPackage"/>
        <SubPart PartName="RealityPlatform"/>
        <Bindings>
            <Libs>Delivery/$(stlibprefix)RealityAdmin$(stlibext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)RealityAdmin$(shlibext)</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="WebTraverser" BentleyBuildMakeFile="RealityAdmin\WebTraverser\WebTraverser.mke">
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityAdmin"/>
        <Bindings>
            <Assemblies>Delivery/WebTraverser.exe</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="AwsTraverser" BentleyBuildMakeFile="RealityAdmin\AwsTraverser\AwsTraverser.mke">
        <SubPart PartName="BeCurl"                     PartFile="BeCurl"                    Repository="Libsrc-Curl"/>
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityAdmin"/>
        <Bindings>
            <Assemblies>Delivery/AwsTraverser.exe</Assemblies>
        </Bindings>
    </Part>

    <Part Name="RealityCrawler" BMakeFile="RealityCrawler\RealityCrawler.mke">
        <SubPart PartName="BentleyCrawlerLibNet"/>
        <SubPart PartName="WMSCapabilitiesNET"/>
        <SubPart PartName="CrawlerLib"/>
        <SubPart PartName="CrawlerLibExample"/>
    </Part>

    <Part Name="RealityPackage" BentleyBuildMakeFile="RealityPackage\RealityPackage.mke" OnlyPlatforms="x86,x64, androidarm7a">
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BentleyDll"  PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="BeXmlDll"    PartFile="BeLibxml2"    Repository="libsrc-libxml2" />
        <SubPart PartName="GeomDlls"    PartFile="geomlibs"     Repository="GeomLibs" />        
        <Bindings>
            <Libs>Delivery/$(libprefix)RealityPackage$(libext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)RealityPackage$(shlibext)</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="RealityServicesNet" BMakeFile="RealityServicesNet\RealityServicesNet.mke">
        <SubPart PartName="RealityPackage" />
        <Bindings>
            <Assemblies>Delivery/RealityServicesNet$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="CrawlerLib" BentleyBuildMakeFile="CrawlerLib\CrawlerLib.mke">
        <SubPart PartName="BeCurl"              PartFile="BeCurl"       Repository="Libsrc-Curl"/>
        <SubPart PartName="BeXmlDll"            PartFile="BeLibxml2"    Repository="libsrc-libxml2" />
        <SubPart PartName="BentleyDll"          PartFile="Bentley"      Repository="Bentley" />
        <Bindings>
            <PublicAPI Domain="CrawlerLib" />
            <Libs>Delivery/$(stlibprefix)CrawlerLib$(stlibext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)CrawlerLib$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="CrawlerLibExample" BMakeFile="CrawlerLib/Example/CrawlerLibExample.mke">
        <SubPart PartName="CrawlerLib" />
        <Bindings>
            <Assemblies>Delivery/CrawlerLibExample.exe</Assemblies>
        </Bindings>
    </Part>

    <Part Name="DownloadEngineExample" BentleyBuildMakeFile="RealityPlatform\Example\DownloadEngineExample.mke">
        <SubPart PartName="BeCurl"              PartFile="BeCurl"       Repository="Libsrc-Curl"/>
        <SubPart PartName="BentleyDll"          PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityPackage"/>
        <Bindings>
            <Assemblies>Delivery/DownloadEngineExample.exe</Assemblies>
        </Bindings>
    </Part>

    <Part Name="ConversionToolsTester" BentleyBuildMakeFile="RealityAdmin\Example\ConversionToolsTester.mke">
        <SubPart PartName="BeCurl"              PartFile="BeCurl"       Repository="Libsrc-Curl"/>
        <SubPart PartName="BentleyDll"          PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityPackage"/>
        <SubPart PartName="RealityAdmin"/>
        <Bindings>
            <Assemblies>Delivery/ConversionToolsTester.exe</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="DataHandlerTool" BentleyBuildMakeFile="RealityAdmin\Example\DataHandlerTool.mke">
        <SubPart PartName="BentleyDll"  PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="RealityPlatform" />
        <SubPart PartName="RealityAdmin"/>
        <Bindings>
            <Assemblies>Delivery/DataHandlerTool.exe</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="Reality-Examples">
        <SubPart PartName="DownloadEngineExample"/>
        <SubPart PartName="RealityDbECPlugin"/>
        <SubPart PartName="RealityDbECPluginC"/>
        <SubPart PartName="UsageDataExtractor"/>
        <SubPart PartName="CrawlerLibExample"/>
        <SubPart PartName="RealityDbECPluginInstaller" />
        <!--<SubPart PartName="DataHandlerTool" />-->
        <SubPart PartName="RealityServicesNet"/>
    </Part>
    
    <Part Name="RealityAdmin-Applications">
        <SubPart PartName="ConversionToolsTester"/>
        <SubPart PartName="WebTraverser"/>
        <SubPart PartName="AwsTraverser"/>
    </Part>

    <Part Name="RealityDbECPlugin" BMakeFile="RealityDbECPlugin\RealityDbECPlugin.mke" OnlyPlatforms="x86,x64">
    	<SubPart PartName="RealityServicesNet"/>
        <SubPart PartName="ECServices"          PartFile="ecf"            Repository="ecf" />
        <SubPart PartName="JsonNet45"           PartFile="${SrcRoot}bsicommon/CvsPartFiles\bin"    Repository="Bin-JsonNet" />
        <SubPart PartName="IdentityModel"       PartFile="${SrcRoot}bsicommon/CvsPartFiles\identitymodel"    Repository="BCC-IdentityModel" />
        <Bindings>
            <Assemblies>Delivery/Bentley.RealityDbECPlugin.dll</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="RealityDbECPluginC" BMakeFile="RealityDbECPlugin\RealityDbECPlugin.mke" BMakeOptions="-dIMSOFF=1" OnlyPlatforms="x86,x64">
    	<SubPart PartName="RealityServicesNet"/>
        <SubPart PartName="ECServices"          PartFile="ecf"            Repository="ecf" />
        <SubPart PartName="JsonNet45"           PartFile="${SrcRoot}bsicommon/CvsPartFiles\bin"    Repository="Bin-JsonNet" />
        <SubPart PartName="IdentityModel"       PartFile="${SrcRoot}bsicommon/CvsPartFiles\identitymodel"    Repository="BCC-IdentityModel" />
        <Bindings>
            <Assemblies>Delivery/Bentley.RealityDbECPluginC.dll</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="UsageDataExtractor" BMakeFile="RealityDbECPlugin\UsageDataExtractor\UsageDataExtractor.mke" OnlyPlatforms="x64">
        <SubPart PartName="RequiredNugets" />
        <!--<SubPart PartName="JsonNet45"           PartFile="${SrcRoot}bsicommon/CvsPartFiles\bin"    Repository="Bin-JsonNet" />-->
        <RequiredRepository>BCC-IdentityModel</RequiredRepository>
        <Bindings>
            <Assemblies>Delivery/UsageDataExtractor.exe</Assemblies> 	
            <Files ProductDirectoryName="Assemblies">Delivery/UsageDataExtractor.exe.config</Files>
        </Bindings>
    </Part>
    
    <Part Name="RequiredNugets" BentleyBuildMakeFile="RequiredNugets.prewire.mke">
        <NuGetPackage targetFramework=".NETFramework4.5">Microsoft.Azure.KeyVault.Core</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">Microsoft.Data.Edm</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">Microsoft.Data.OData</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">Microsoft.Data.Services.Client</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">System.Spatial</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">WindowsAzure.Storage</NuGetPackage>
        <NuGetPackage targetFramework=".NETFramework4.5">BentleyIT.STS.RelyingPartyCommon</NuGetPackage>
        <Bindings>
            <Files ProductDirectoryName="Assemblies">Delivery/Microsoft.Azure.KeyVault.Core.*</Files> 
            <Files ProductDirectoryName="Assemblies">Delivery/Microsoft.Data.Edm.*</Files> 
            <Files ProductDirectoryName="Assemblies">Delivery/Microsoft.Data.OData.*</Files> 
            <Files ProductDirectoryName="Assemblies">Delivery/Microsoft.Data.Services.Client.*</Files> 
            <Files ProductDirectoryName="Assemblies">Delivery/Microsoft.WindowsAzure.Storage.*</Files> 
            <Files ProductDirectoryName="Assemblies">Delivery/System.Spatial.*</Files> 	
            <Assemblies>Delivery/BentleyIT.STS.RelyingPartyCommon.dll</Assemblies> 	
        </Bindings>
    </Part>
    
    <Part Name="RealityDbECPluginCNuGet" BMakeFile="RealityDbECPlugin\NuGet\RealityDbECPluginC.NuGetPackage.mke">
        <RequiredRepository>Bsitools-NuGet</RequiredRepository>
        <SubPart PartName="RealityDbECPluginC" />
        <Bindings>
            <Files ProductDirectoryName="RealityDbECPluginNuGetPackages" Required="false">Install\Bentley.RealityDbECPluginC.*.nupkg</Files>
        </Bindings>
    </Part>
    
    <Part Name="BentleyWMSPackageNet" BMakeFile="BentleyWMSPackageNet\BentleyWMSPackageNet.mke" BMakeOptions="-dTranskitLink=1">
        <SubPart PartName="TranskitTools"    PartFile="TransKitTools" Repository="TransKitTools" />
        <SubPart PartName="RealityPackage"/>
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BentleyDll"  PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="GeomDlls"    PartFile="geomlibs"     Repository="GeomLibs" />
        <Bindings>
            <Assemblies>Delivery/BentleyWMSPackageNet$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="RealityDbECPluginInstaller" BMakeFile="RealityDbECPlugin/Install/Install.mke">
      <RequiredRepository>bsitools-wix_3.10.2103.0</RequiredRepository>
      <RequiredRepository>Miscdev-Eula</RequiredRepository>
      <RequiredRepository>Mergemodule-Microsoft_VC_14.0</RequiredRepository>
      <SubPart PartName="RealityDbECPlugin"/>
      <Bindings>
        <Files ProductDirectoryName="ApplicationInstallRoot" Required="true" IfNotPresent="Warn">Delivery/Setup_RealityDbECPlugin.msi</Files>
      </Bindings>
    </Part>

    <Part Name="WMSCapabilitiesNET" BentleyBuildMakeFile="WMSCapabilitiesNET\WMSCapabilitiesNET.mke">
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BentleyDll"  PartFile="Bentley"      Repository="Bentley" />
        <Bindings>
            <Assemblies>Delivery/WMSCapabilitiesNET$(shlibext)</Assemblies>
        </Bindings>
    </Part>
    
    <Part Name="BentleyCrawlerLibNet" BentleyBuildMakeFile="BentleyCrawlerLibNet\BentleyCrawlerLibNet.mke">
        <SubPart PartName="CrawlerLib"/>
        <Bindings>
            <Assemblies>Delivery/BentleyCrawlerLibNet$(shlibext)</Assemblies>
        </Bindings>
    </Part>

  
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- ////////////////////////////////// Products ///////////////////////////////////////// -->
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    
    <ProductDirectoryList ListName="RealityModFrameworkDirList" >
        <ProductDirectory Name="applicationroot"            Path=""/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot" LibType="static"/>
        <ProductDirectory Name="Assemblies"                 RelativeTo="applicationroot"/>

        <!--notices/ review if notices need to be delivered--> 
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="dynamic"   Path="notices"/>
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="static"    Path="notices"/>

        <!--needed for the moment from LkgsVancouver -->
        <ProductDirectory Name="JsonNetAssemblies"              Path=""/>
        <ProductDirectory Name="IdentityModelAssemblies"        Path=""/>
        <ProductDirectory Name="BentleyGeometryNetAssemblies"   Path=""/>
        <ProductDirectory Name="BentleyNativeAssemblies"        Path=""/>
        <ProductDirectory Name="GeomNativeAssemblies"           Path=""/>
        <ProductDirectory Name="PlatformTechAssemblies"         Path=""/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies"      Path=""/>
        <ProductDirectory Name="PPNativeAssemblies"             Path=""/>
        <ProductDirectory Name="ECObjectsNativeAssemblies"      Path=""/>
        <ProductDirectory Name="ECObjectsManagedAssemblies"     Path=""/>
        <ProductDirectory Name="ECServicesManagedAssemblies"    Path=""/>
        <ProductDirectory Name="ECSchemas"                      Path="ECSchemas" />
        <ProductDirectory Name="LoggingManagedAssemblies"       Path=""/>
        <ProductDirectory Name="LoggingNativeAssemblies"        Path=""/>
        <ProductDirectory Name="managedtests"                   Path=""/>

        <ProductDirectory Name="ApplicationInstallRoot"         Path="InstallRealityDbECPlugin"      RelativeTo="applicationroot"/>
        <ProductDirectory Name="RealityDbECPluginNuGetPackages" Path="Install" />
    </ProductDirectoryList>
    
    <Product Name="RealityModFramework">
        <SubPart PartName="Reality-Examples"/>
        <SubPart PartName="RealityAdmin-Applications"/>
        <SubPart PartName="RealityDbECPluginCNuGet"/>
        <SubPart PartName="RealityModFrameworkTested"/>
        <Directories DirectoryListName="RealityModFrameworkDirList" />
    </Product>

    <Product Name="RealityContextServices" PrgOutputDir="RealityContextServices">
        <SubPart PartName="RealityDbECPluginCNuGet"/>
        <!--<SubPart PartName="UsageDataExtractor"/>-->
        <!--<SubPart PartName="RealityModelingFramework-Minimal-WinX64-Only"/>-->
        <Directories DirectoryListName="RealityModFrameworkDirList" />
    </Product>


    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- // "RealityModelingFramework-Minimal Section                                       // -->

    <Part Name="RealityModelingFramework-Minimal-WinX64-Only" OnlyPlatforms="x64">
        <SubProduct ProductName="RealityModelingFramework-Minimal-WinX64"/>
        <Bindings>
            <PublicAPI Domain="RealityModFramework" />
        </Bindings>
    </Part>

    <Product Name="RealityModelingFramework-Minimal-WinX64" SaveProduct="true">
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityPackage"/>
        <SubPart PartName="IncludeApi" />

        <!-- This must be listed last so that it can delivery=false items defined in preceding directory list(s). -->
        <Directories DirectoryListName="RealityModelingFramework-Minimal"/>
    </Product>

    <Part Name ="IncludeApi">
        <SubPart PartName="RealityPlatform"/>
        <SubPart PartName="RealityPackage"/>
        <Bindings>
            <Directory SourceName="PublicAPI" ProductDirectoryName="RealityModFrameworkIncludeDirectory" Required="false"/>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="RealityModelingFramework-Minimal">
        <ProductDirectory Name="applicationroot"            Path=""/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot" LibType="static"/>
        <ProductDirectory Name="Assemblies"                 Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Libs"                       Path="lib" RelativeTo="applicationroot"/>

        <ProductDirectory Name="VendorNotices"                      Deliver="true"  LibType="dynamic" Path="notices"/>
        <ProductDirectory Name="VendorNotices"                      Deliver="false" LibType="Static"/>

        <!-- include/ -->
        <ProductDirectory Name="RealityModFrameworkIncludeDirectory"       Deliver="true" Path="include"/>
        <ProductDirectory Name="RealityModFrameworkIncludeDirectory"       Deliver="true" Path="include" LibType="Static"/>

        <!--needed for the moment from LkgsVancouver -->
        <ProductDirectory Name="JsonNetAssemblies"              Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="IdentityModelAssemblies"        Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="BentleyGeometryNetAssemblies"   Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="PlatformTechAssemblies"         Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="ECObjectsManagedAssemblies"     Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="ECServicesManagedAssemblies"    Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="LoggingManagedAssemblies"       Path="lib" RelativeTo="applicationroot"/>
        <ProductDirectory Name="ECSchemas"                      RelativeTo="applicationroot"/>
    </ProductDirectoryList>




    <!-- ********************************************************************************************** -->
    <!-- Nunit tests -->
    <!-- ********************************************************************************************** -->
    <ProductDirectoryList ListName="RealityDbECPluginTestsDirList" >
        <ProductDirectory Name="applicationroot"            Path=""/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot" LibType="static"/>
        <ProductDirectory Name="Assemblies"                 RelativeTo="applicationroot"/>

        <!--notices/ review if notices need to be delivered--> 
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="dynamic"   Path="notices"/>
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="static"    Path="notices"/>

        <!--needed for the moment from LkgsVancouver -->
        <ProductDirectory Name="LoggingNativeAssemblies"        Deliver="false"/>
        <ProductDirectory Name="LoggingManagedAssemblies"       Deliver="false"/>
        <ProductDirectory Name="managedtests"                   Deliver="false"/>
        <ProductDirectory Name="JsonNetAssemblies"              Path=""/>
        <ProductDirectory Name="IdentityModelAssemblies"        Path=""/>
        <ProductDirectory Name="BentleyGeometryNetAssemblies"   Path=""/>
        <ProductDirectory Name="PlatformTechAssemblies"         Path=""/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies"      Path=""/>
        <ProductDirectory Name="PPNativeAssemblies"             Path="" />
        <ProductDirectory Name="ECObjectsNativeAssemblies"      Path="" />
        <ProductDirectory Name="ECObjectsManagedAssemblies"     Path="" />
        <ProductDirectory Name="ECServicesManagedAssemblies"    Path=""/>
        <ProductDirectory Name="ECSchemas"                      Path="ECSchemas" />

        <ProductDirectory Name="NUnit 2.6.4 binaries"           Path=""/>
        <ProductDirectory Name="NUnit 2.6.4 core references"    Path=""/>
        <ProductDirectory Name="managedtests"                   Path=""/>
        <ProductDirectory Name="LoggingManagedAssemblies"       Path=""/>
        <ProductDirectory Name="RhinoMockAssemblies"            Path=""/>
    </ProductDirectoryList>


    <Part Name="RealityDbECPluginUnitTests" BMakeFile="Tests/RealityDbECPlugin/RealityDbECPluginTests.mke">
        <SubPart PartName="RealityDbECPlugin" />
        <SubPart PartName="nunit_2.6.4" PartFile="${SrcRoot}bsicommon/CvsPartFiles\bsitools" Repository="Bsitools-Nunit_2.6.4" />
        <SubPart PartName="rhinomocks_3.5" PartFile="${SrcRoot}bsicommon/CvsPartFiles\bsitools" Repository="Bsitools-Rhinomocks_3.5" />
        <Bindings>
            <Assemblies ProductDirectoryName="managedtests">
                Delivery\Bentley.RealityDbECPlugin.Tests.dll
            </Assemblies>
        </Bindings>
    </Part>

    <Part Name="RunRealityDbECPluginTests" BMakeFile="Tests\RealityDbECPlugin\RunRealityDbECPluginTests.mke">
        <SubPart PartName="RealityDbECPluginUnitTests"/>
    </Part>

    <Product Name="RealityContextServicesTests">
        <SubProduct ProductName="RealityContextServices"/>
        <SubPart PartName="RealityDbECPluginUnitTests"/>
        <Directories DirectoryListName="RealityDbECPluginTestsDirList" />
    </Product>

    <ProductDirectoryList ListName="RealityDbECPluginUnitTested">
        <ProductDirectory Name="applicationroot"            Path=""/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot" LibType="static"/>
        <ProductDirectory Name="Assemblies"                 RelativeTo="applicationroot"/>

        <!--notices/ review if notices need to be delivered--> 
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="dynamic"   Path="notices"/>
        <ProductDirectory Name="VendorNotices"   Deliver="false"    LibType="static"    Path="notices"/>
        
        <!--needed for the moment from LkgsVancouver -->
        <ProductDirectory Name="JsonNetAssemblies"              Path=""/>
        <ProductDirectory Name="IdentityModelAssemblies"        Path=""/>
        <ProductDirectory Name="BentleyGeometryNetAssemblies"   Path=""/>
        <ProductDirectory Name="PlatformTechAssemblies"         Path=""/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies"      Path=""/>
        <ProductDirectory Name="ECObjectsManagedAssemblies"     Path="" />
        <ProductDirectory Name="ECServicesManagedAssemblies"    Path=""/>
        <ProductDirectory Name="ECSchemas"                      Path="ECSchemas" />
        <ProductDirectory Name="LoggingManagedAssemblies"       Path=""/>
        <ProductDirectory Name="LoggingNativeAssemblies"        Path="" Deliver="false"/>
        <ProductDirectory Name="managedtests"                   Path=""/>
        
    </ProductDirectoryList>

    <Product Name="RealityContextServicesTested">
        <SubProduct ProductName="RealityContextServicesTests" />
        <SubPart PartName="RunRealityDbECPluginTests" />
        <Directories DirectoryListName="RealityDbECPluginUnitTested" />
    </Product>

    <!-- ********************************************************************************************** -->
    <!-- Unit tests -->
    <!-- ********************************************************************************************** -->
    <Part Name="PrewireForUnitTests" BentleyBuildMakeFile="Tests/Prewire.mke">
        <Bindings>
            <!-- un-comment this if you want to deliver ignore_list.txt
            <Files ProductDirectoryName="UnitTests-IgnoreList" ProductSubDirectory="RealityMod" SubPartDirectory="UnitTests/RealityMod"> Delivery/UnitTests/ignore_list.txt</Files>
            -->
            <Files ProductDirectoryName="UnitTests-Assets" ProductSubDirectory="xsd">Delivery/UnitTests/RealityPackage.1.0.xsd</Files>
        </Bindings>
    </Part>

    <Part Name="RealityPackageUnitTests" BentleyBuildMakeFile="Tests/BuildTests.mke" BMakeOptions="-dTestDir=RealityPackage">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="RealityPackage"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="RealityPackage" SourceName="Delivery/UnitTests/Objects/RealityPackage"/>
        </Bindings>
    </Part>

    <Part Name="RealityPlatformUnitTests" BentleyBuildMakeFile="Tests/BuildTests.mke" BMakeOptions="-dTestDir=RealityPlatform">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="RealityPlatform"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="RealityPlatform" SourceName="Delivery/UnitTests/Objects/RealityPlatform"/>
        </Bindings>
    </Part>

    <Part Name="CrawlerLibUnitTests" BentleyBuildMakeFile="Tests/BuildTests.mke" BMakeOptions="-dTestDir=CrawlerLib">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="CrawlerLib"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CrawlerLib" SourceName="Delivery/UnitTests/Objects/CrawlerLib"/>
        </Bindings>
    </Part>

    <!-- Define a test collection product -->
    <Part Name="Tests">
        <SubPart PartName="RealityPackageUnitTests"/>
        <SubPart PartName="RealityPlatformUnitTests"/>
        <SubPart PartName="CrawlerLibUnitTests"/>
    </Part>

    <!-- Put the unit tests into the form of a product. This product will be consumed by a platform-specific "runner" product. -->
    <!-- Lay out the test product according to the standard BeGTest layout. -->
    <ProductDirectoryList ListName="RealityModFrameworkTestsDir" >
        <ProductDirectory Name="applicationroot"            Path=""/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot"/>
        <ProductDirectory Name="Assets"                     Path="Assets" RelativeTo="applicationroot" LibType="static"/>
        <ProductDirectory Name="Assemblies"                 RelativeTo="applicationroot"/>

        <!--needed for the moment from LkgsVancouver -->
        <ProductDirectory Name="ECObjectsManagedAssemblies"     Path="" />
        <ProductDirectory Name="ECServicesManagedAssemblies"    Path=""/>
        <ProductDirectory Name="ECSchemas"                      Path="ECSchemas" />
        <ProductDirectory Name="LoggingManagedAssemblies"       Path=""/>
        <ProductDirectory Name="managedtests"                   Path=""/>

    </ProductDirectoryList>
    
    <Product Name="RealityModFramework-Tests">
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="Tests"/>
        <!-- Lay out the Tests test product according to the standard BeGTest layout: -->
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest"  PartFile="BeGTest"/>
        <Directories DirectoryListName="RealityModFrameworkTestsDir"/>
    </Product>

    <!-- Define a gtest program to run the tests -->
    <Part Name="Gtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGTest.mke" BentleyBuildMakeOptions="-dTEST_NAME=RealityModFrameworkTest -dTEST_COLLECTION_PRODUCT=RealityModFramework-Tests" OnlyPlatforms="x86,x64,Linux*,MacOS*">
        <SubProduct ProductName="RealityModFramework-Tests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/RealityModFrameworkTest/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/RealityModFrameworkTest/Assets" />
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="RealityModFramework-GtestDir" >
        <ProductDirectory Name="LoggingNativeAssemblies"        Path=""/>
    </ProductDirectoryList>

    <Product Name="RealityModFramework-Gtest" >
        <SubPart PartName="Gtest"/>
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
        <Directories DirectoryListName="RealityModFramework-GtestDir"/>
    </Product>

    <Part Name="RunGtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGTest.mke" BentleyBuildMakeOptions="-dGTEST_EXE=$(OutputRootDir)Product/RealityModFramework-Gtest/RealityModFrameworkTest -dGTEST_OUTPUT_DIR=$(OutputRootDir)build/RealityModFramework" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="RealityModFramework-Gtest" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
    </Part>

    <!-- This part runs RealityModFrameworkTests on platforms that support it. -->
    <Part Name="RealityModFrameworkTested">
        <SubPart PartName="RunGtest" />
        <SubPart PartName="RealityDbECPluginUnitTests" />
    </Part>

</BuildContext>
