<?xml version="1.0" encoding="utf-8"?>
<ECSchema schemaName="S3MX" nameSpacePrefix="S3MX" version="1.0" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.2.0">
    <ECSchemaReference name="Bentley_Standard_CustomAttributes" version="01.00" prefix="bsca" />
    <!-- A RealityData represent the full dataset encompassing all folders and documents required to fully represent the RealidyData -->
    <ECClass typeName="RealityData" isDomainClass="True">

        <!-- Id of the RealityData. This field uniquely identifies the RealityData -->
        <ECProperty propertyName="Id" typeName="string">

        <!-- The name of the Azure Blob container that contains the reality data -->
        <ECProperty propertyName="ContainerName" typeName="string" />

        <!-- Enterprise is a string that contains the CONNECT id of the enterprise owner of the data -->
        <ECProperty propertyName="Enterprise" typeName="string" />

        <!-- Name of the RealityData -->
        <ECProperty propertyName="Name" typeName="string" />

        <!-- The Dataset is a textual key that represents the dataset the reality data belongs to if applicable.
             For the purpose of query and indexation it is preferable that the Dataset/Name pair be unique even if this simply implies
             setting the company name or CONNECT guid as Dataset -->
        <ECProperty propertyName="Dataset" typeName="string" />

        <!-- The Description field can be used to specify a descriptive human-readable explaining the content of the RealityData.
             The description is specified by the owner of the data in whatever language he or she wishes. -->
        <ECProperty propertyName="Description" typeName="string" />

        <!-- Reference within container of the root document of the RealityData. In most RealityData formats such
             as 3MX, POD etc, there is a main root document that is normally sufficient to obtain a handle on the 
             RealityData (such as .3mx text files for 3MX data that serves as the root of the data structure).
             The field only contains the folder/document name portion starting after the Blob container (example: if the full S3MX URL to the root is:
             "https://dev-realitydataservices-eus.cloudapp.net/v2.4/Repositories/S3MXECPlugin--Server/S3MX/Document/e82a584b-9fae-409f-9581-fd154f7b9ef9~2FMarseille3mx~2FMarseille3mx.3mx/$file"  
             then the field will only contain: "Marseille3mx/Marseille3mx.3mx" with the slashes non WSG encoded.
             The server, protocol, and schema portions can be infered from the currently accessed server while the container identifier is stored in the ContainerName field above.-->
        <ECProperty propertyName="RootDocument" typeName="string" />

        <!-- The full size of the data in Kilobytes (only the digits without spaces and no end symbols [no 'Kb']). Normally this size is the sum of sizes of every document part of the RealityData -->
        <ECProperty propertyName="Size" typeName="string" />

        <!-- Classification in the same sense as the one in the GeoCoordination Services. This string classifies the nature of the content of the RealityData
             regardless of the format used (see the 'Type' attribute below). Typical values are 'Terrain', 'Imagery', 'Model' and 'Pinned' but may be, eventually complemented by a reference
             to schema and class definition especially for 'Model' classification. Refer to GeoCoordination Service documentation for details. -->
        <ECProperty propertyName="Classification" typeName="string" />

        <!-- Type or format of the reality data. It is a string key indicating the format of the data such as 3SM, 3MX, tif, jpg, pdf, and so on. This string dictates the 
             storage structure of the data. Notice that some of these can refer to a single file (jpg, tif for example) while others hint to the existence
             of many structured interrelated documents (3SM, 3MX,...). Note also that the file format does not necessariy imply the Classification of the RealityData. A TIF file
             can store Imagery (a raster), Terrain (DEM file which is a TIF with a numeric pixel type), Pinned (A scan from a textual document). --> 
        <ECProperty propertyName="Type" typeName="string" />

        <!-- Footprint of the whole reality data in 2D only. The footprint is stored in a string in the format ??? -->
        <ECProperty propertyName="Footprint typeName="string" />

        <!-- The thumbnail field indicates the name of the thumbnail file. This file must be part of the RealityData proper as part of the service.
             The field only contains the folder/document name portion starting after the Blob container (example is the full S3MX URL to the thumbnail is:
             "https://dev-realitydataservices-eus.cloudapp.net/v2.4/Repositories/S3MXECPlugin--Server/S3MX/Document/e82a584b-9fae-409f-9581-fd154f7b9ef9~2FMarseille3mx~2FThumbnail~2FThumbnail.jpg/$file"  
             then the field will only contain: "Marseille3mx/Thumbnail/Thumbnail.jpg" with the slashes non WSG encoded.
             The server, protocol, and schema portions can be infered from the currently accessed server while the container identifier is stored in the ContainerName field above.-->
        <ECProperty propertyName="Thumbnail" typeName="string" />

        <!-- The ResolutionInMeters field indicates the approximate resolution of samples in the reality data. The interpretation of this field is type dependent.
             The string is formatted as 'resolution in X' the 'x' character the 'resolution in Y' such as 15.2x23.5 indicates a resolution of 15.2 meters in X and 23.5 in Y. 
             The string is easily interpreted for rasters but less so for pointclouds that could interpret the values as mean distance between samples. -->   
        <ECProperty propertyName="ResolutionInMeters" typeName="string" />

        <!-- The data indicates the time it was uploaded. Since the present schema is meant for a service that pseudo-streams
             Reality Data this should be identical to the 'LastModified' time. -->
        <ECProperty propertyName="Date" typeName="dateTime" />

        <!-- This boolean value is false by default. If true it indicates that access (reaad-only) to the reality data is public -->
        <ECProperty propertyName="PublicAccess" typeName="boolean" />


    </ECClass>



    <!-- This class is used to represent a pair RealityDataId/ProjectId indicating a relationship beteen them. 
         RealityData can be linked with many projects and projects can link with many different reality data -->
    <ECClass typeName="RealityDataProjectRelationShip" isDomainClass="True">
        <!-- The RealityDataId of the RealityData linked to the project. Normally both RealityData and Project are of the same enterprise but if the RealityData is marked as public
             it may be referenced by projects from external enterprises. -->
        <ECProperty propertyName="RealityDataId" typeName="string" />

        <!-- The project that is linked with reality data -->
        <ECProperty propertyName="ProjectId" typeName="string" />
    </ECClass>




    <ECClass typeName="Document" isDomainClass="True">
    
        <!-- ??? -->
        <ECProperty propertyName="Alias" typeName="string" />

        <!-- The name of the Azure blob container the document is stored in -->
        <ECProperty propertyName="ContainerName" typeName="string" />

        <!-- Name of document -->
        <ECProperty propertyName="DocumentName" typeName="string" />

        <!-- The indentifier of the document -->
        <ECProperty propertyName="DocumentId" typeName="string" />

        <!-- The id of the folder the document is located in -->
        <ECProperty propertyName="FolderId" typeName="string" />

        <!-- ??? -->
        <ECProperty propertyName="FileExists" typeName="string" />
    
        <!-- ??? The full access URL to the document. This URL is fully formed with the current server name, protocol and all properly encoded path -->
        <ECProperty propertyName="AccessUrl" typeName="string" />

        <!-- The id of the RealityData the document is a part of -->
        <ECProperty propertyName="RealityDataId" typeName="string" />

        <!-- The Root document of the Reality Data the document is a part of -->
        <ECProperty propertyName="RootDocument" typeName="string" />

        <!-- ??? -->
        <ECProperty propertyName="ContentType" typeName="string" />

        <!-- true if the document can be accessed publicly -->
        <ECProperty propertyName="PublicAccess" typeName="boolean" />

        <!-- The ISO-8601 compliant string that indicates the last time the folder was modified -->
        <ECProperty propertyName="ModifiedTimeStamp" typeName="string" />

        <!-- The ISO-8601 compliant string that indicates the time of creation of the folder -->
        <ECProperty propertyName="CreatedTimeStamp" typeName="string" />

        <!-- The CONNECT email address of the last identity to have modified the content of the folder -->
        <ECProperty propertyName="ModifiedBy" typeName="string" />

        <!-- The CONNECT email address of the person that created the folder -->
        <ECProperty propertyName="CreatedBy" typeName="string" />

        <!-- The size of the document in Kilobytes (only the digits without spaces and no end symbols [no 'Kb']). -->
        <ECProperty propertyName="Size" typeName="string" />

        <!-- The full path of the folder ??? -->
        <ECProperty propertyName="Path" typeName="string" />
    </ECClass>
    <ECClass typeName="Folder" isDomainClass="True">

        <!-- The FolderName -->
		<ECProperty propertyName="FolderName" typeName="string" />

        <!-- The identifier of the Reality Data the folder belongs to -->
        <ECProperty propertyName="RealityDataId" typeName="string" />

        <!-- The identifier of the parent folder -->
        <ECProperty propertyName="ParentFolderId" typeName="string" />

        <!-- The Root Folder ??? -->
        <ECProperty propertyName="RootFolder" typeName="string" />

        <!-- ??? -->
        <ECProperty propertyName="ContentType" typeName="string" />

        <!-- The ISO-8601 compliant string that indicates the last time the folder was modified -->
        <ECProperty propertyName="ModifiedTimeStamp" typeName="string" />

        <!-- The CONNECT email address of the last identity to have modified the content of the folder -->
        <ECProperty propertyName="ModifiedBy" typeName="string" />
    
        <!-- The ISO-8601 compliant string that indicates the time of creation of the folder -->
        <ECProperty propertyName="CreatedTimeStamp" typeName="string" />

        <!-- The CONNECT email address of the person that created the folder -->
        <ECProperty propertyName="CreatedBy" typeName="string" />

        <!-- The full path of the folder ??? -->
        <ECProperty propertyName="Path" typeName="string" />
    </ECClass>
</ECSchema>