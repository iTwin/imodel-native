#--------------------------------------------------------------------------------------
#      $Source: Tests/RealityDbECPlugin/RealityDbECPluginTests.mke $
#   $Copyright: (c) 2017 Bentley Systems, Incorporated. All rights reserved. $
#--------------------------------------------------------------------------------------
%include  mdl.mki

baseDir     = $(_MakeFilePath)
appName     = RealityDbECPluginTests

nunitDllDir = $(OutputRootDir)/BuildContexts/RealityModFramework/SubParts/nunit_2.6.4/

%include $(SrcRoot)RealityModFramework/mki/RealityModFrameworkCommon.mki


#----------------------------------------------------------------------------------------------------------------------------------------------------
# 
#----------------------------------------------------------------------------------------------------------------------------------------------------
always:
    ~mkdir $(o)

ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.Exceptions.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.Platform.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.EC.Persistence3.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.ECObjects3.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.EC.PluginBuilder3.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.EC.AbstractUI3.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.ECSystem3.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Bentley.RealityDbECPluginC.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Rhino.Mocks.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(ContextSubPartsAssembliesDir)Newtonsoft.Json.dll
%include csrefapnd.mki
ASSEMBLY_REFERENCE = $(nunitDllDir)nunit.framework.dll
%include csrefapnd.mki
#ASSEMBLY_REFERENCE = $(baseDir)Microsoft.Data.Schema.ScriptDom.Sql.dll
#%include csrefapnd.mki
#ASSEMBLY_REFERENCE = $(baseDir)Microsoft.Data.Schema.ScriptDom.dll
#%include csrefapnd.mki

#-----------------------------------------------------------------------
# Define default assembly meta-data attributes
#-----------------------------------------------------------------------
%include $(SharedMki)stdversion.mki
ASSEMBLY_NAME = Bentley.RealityDbECPlugin.Tests

ASSEMBLY_PRODUCT_NAME   = $(PRODUCT_NAME)
ASSEMBLY_FILE_VERSION   = $(REL_V).$(MAJ_V).$(MIN_V).$(SUBMIN_V)
ASSEMBLY_COMPANY_NAME   = $(companyName)
ASSEMBLY_COPYRIGHT      = $(Bentley_Copyright)
#  temporary fix for ecframework builds
ASSEMBLY_NO_AUTHENTICODE_SIGN = 1
%include $(SharedMki)VersionedPartSignatureDefaults.mki
ASSEMBLY_KEYFILE        =% $(ASSEMBLY_KEYFILE_DEFAULT)
ASSEMBLY_TESTKEYFILE       =% $(ASSEMBLY_TESTKEYFILE_DEFAULT)

%ifndef ASSEMBLY_TITLE
  ASSEMBLY_TITLE  =% $(programName)
%endif

#-----------------------------------------------------------------------
#   Compile C# Modules
#-----------------------------------------------------------------------

ASSEMBLY_DLL = 1
ASSEMBLY_MAKE_DOCS = 1
ASSEMBLY_TITLE = Bentley RealityDbECPluginTests
ASSEMBLY_DESCRIPTION = Bentley RealityDbECPluginTests
ASSEMBLY_VERSION = 1.0.0.0
ASSEMBLY_STRONGNAME = 1

ASSEMBLY_SOURCE_LIST = \
            $(baseDir)Common/SetupHelpers.cs \
            $(baseDir)Common/DataReaderStub.cs \
            $(baseDir)Common/FakeDbCommand.cs \
            $(baseDir)Common/FakeDataParameterCollection.cs \
            $(baseDir)Tests/DataExtractorTests.cs \
            $(baseDir)Tests/IECInstanceExtensionTests.cs \
            $(baseDir)Tests/IndexECPluginRDSTests.cs \
            $(baseDir)Tests/IndexECPluginUSGSTests.cs \
            $(baseDir)Tests/JTokenExtensionTests.cs \
            $(baseDir)Tests/PolygonModelTests.cs \
            $(baseDir)Tests/SqlQueryProviderTests.cs \
            $(baseDir)Tests/SqlServerInsertStatementBuilderTests.cs \
            $(baseDir)Tests/USGSDataExtractorsTests.cs\
            $(baseDir)Tests/USGSDataFetcherTests.cs \
            $(baseDir)Tests/Helpers/DataReadingHelperTests.cs \
            $(baseDir)Tests/Helpers/DbConnectionHelperTests.cs \
            $(baseDir)Tests/Helpers/DBGeometryHelpersTests.cs \
            $(baseDir)Tests/Helpers/DownloadReportHelperTests.cs \
            $(baseDir)Tests/Helpers/ECQueryConverterTests.cs \
            $(baseDir)Tests/Helpers/ECToSQLMapTests.cs \
            $(baseDir)Tests/Helpers/ExecuteQueryHelperTests.cs \
            $(baseDir)Tests/Helpers/IDbQuerierTests.cs \
            $(baseDir)Tests/Helpers/InstanceCacheManagerTests.cs \
            $(baseDir)Tests/Helpers/InstanceComplementTests.cs \
            $(baseDir)Tests/Helpers/InstanceOverriderTests.cs \
            $(baseDir)Tests/Helpers/MimicTableWriterTests.cs \
            $(baseDir)Tests/Helpers/MimicTableAccessorTests.cs \
            $(baseDir)Tests/Helpers/PackagerTests.cs \
            $(baseDir)Tests/Helpers/RDSDataFetcherTests.cs \
            $(baseDir)Tests/Helpers/RetrievalControllerTests.cs \
            $(baseDir)Tests/Helpers/SourceStringMapTests.cs \
            $(baseDir)Tests/Helpers/TableAliasCreatorTests.cs \
            $(baseDir)Tests/Helpers/TableDescriptorTests.cs \
			$(baseDir)Tests/Helpers/UsgsEEApiQueryProviderTests.cs \
            $(baseDir)Tests/Helpers/UsgsEEDataFetcherTests.cs \
            $(baseDir)Tests/SQLQueryBuilder/GenericParamNameValueMapTests.cs \
            $(baseDir)Tests/SQLQueryBuilder/SQLQueryBuilderTests.cs \
            $(baseDir)Tests/SQLQueryBuilder/SQLServerMergeUpsertStatementBuilderTests.cs \
            $(baseDir)Tests/SQLQueryBuilder/SqlServerParamNameValueMapTests.cs \
            $(baseDir)Tests/SQLQueryBuilder/StandardSQLQueryBuilderTests.cs
            

#ASSEMBLY_RESX_FILE_TO_BUILD = $(baseDir)LocalizableStrings.resx
#ASSEMBLY_RES_TO_ADD = LocalizableStrings
#%include assemblyResxAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonHRO.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonLIDAR.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNAIP.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNED1_3as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNED1_9as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNED1as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNED1m.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNLCD2001.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNLCD2006.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonNLCD2011.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = ScienceBaseJsonParent.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiDatasets.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiHRO.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiLIDAR.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNAIP.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNED1_3as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNED1_9as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNED1as.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNED1m.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNLCD2001.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNLCD2006.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = TnmApiNLCD2011.txt
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

ASSEMBLY_RES_TO_ADD_FILENAME = USGS_NED_one_meter_x24y459_IL_12_County_HenryCO_2009_IMG_2015_meta.xml
ASSEMBLY_RES_TO_ADD_DIRECTORY = $(baseDir)Ressources/

%include assemblyResourceAppend.mki

%include mkcsharp.mki
