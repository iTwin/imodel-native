#----------------------------------------------------------------------
#
#  Copyright (c) Bentley Systems, Incorporated. All rights reserved.
#
#----------------------------------------------------------------------

%include mdl.mki

nameToDefine = __BIM_FROM_DGNDB_BUILD__
%include cdefapnd.mki

appName     = DgnDbCreator
baseDir     = $(_MakeFilePath)

BEGTEST_INPUT=$(baseDir)

PublicApiIncludes + -I${BuildContext}/VendorAPI/DgnDb06Api

o = $(OutputRootDir)Build/BimFromDgnDb/$(appName)/
always:
    ~mkdir $(o)

TestsHeaders = $(baseDir)DgnDbCreator.h

$(o)DgnDbCreator.obj            : $(BEGTEST_INPUT)DgnDbCreator.cpp              $(TestsHeaders) ${MultiCompileDepends}

$(o)DgnDbCreatorImpl.obj        : $(BEGTEST_INPUT)DgnDbCreatorImpl.cpp   $(BEGTEST_INPUT)DgnDbCreatorImpl.h            $(TestsHeaders) ${MultiCompileDepends}


#----------------------------------------------------------------------
#   Link the library
#----------------------------------------------------------------------

DgnDbLibs=$(BuildContext)SubParts/DgnDbLibs/

DLM_NAME            = $(appName)
DLM_DEST            = $(o)
DLM_OBJECT_DEST     = $(o)
DLM_EXPORT_DEST     = $(o)
DLM_OBJECT_FILES    = $(o)DgnDbCreator$(oext) $(o)DgnDbCreatorImpl$(oext)
DLM_NOINITFUNC          = 1
DLM_NOENTRY             = 1
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)Bentley$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)BeSQLite$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)BeSQLiteEC$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)ECObjects$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)BentleyGeom$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)DgnPlatform$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)BaseGeoCoord$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)BeJsonCpp$(stlibext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)Planning$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)PointCloudSchema$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)RasterSchema$(libext)
LINKER_LIBRARIES  + $(DgnDbLibs)$(libprefix)ThreeMx$(libext)
LINKER_LIBRARIES  + user32.lib

%include $(sharedMki)LinkLibrary.mki
