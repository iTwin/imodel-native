<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd"
              >

    <Part Name="Base">
    </Part>

    <!-- ********************************************************************************************** -->
    <!-- BeTestDocuments                                                                                -->
    <!-- ********************************************************************************************** -->

    <Product Name="BeTestDocuments" PrgOutputDir="MobileDgnSdk">
        <Directories DirectoryListName="BeTestDocumentsDirList" />
        <SubPart PartName="DgnV8Converter"/>
        <SubPart PartName="LinkDgnDbPublisherIntoToolContext" LibType="Dynamic"/>
        <SubPart PartName="UnitTests_Documents" LibType="Static" />
    </Product>

    <!-- TRICKY: Documents are only actually converted for x64,x86. For other platforms, we get documents from LKGs. -->
    <!-- We must do other processing for other platforms and other cases. Therefore, no platforms can be excluded! -->
    <!-- *** NEEDS WORK: Why are we using UnitTestPublisherConfiguration.xml? Shouldn't we be using UnitTestDgnV8ConverterConfiguration.xml? Or, why do we have two config files? There's only one converter! -->
    <Part Name="UnitTests_Documents" BentleyBuildMakeFile="${SrcBsiCommon}sharedmki/PublishDocuments.mke" BMakeOptions="-dUNIT_TESTS_NAME=ECDbUnitTests -dUNIT_TESTS_DOCUMENTS_DIR=${SrcRoot}/DgnPlatformTest/DgnDbUnitTests/ -dUNIT_TESTS_DOCUMENTS_PREBUILTS_SUBDIR=DgnDb -dUNIT_TESTS_PUBLISH_CONFIG=${SrcRoot}/BeGTest/UnitTestPublisherConfiguration.xml">
        <!--<SubPart PartName="LinkDgnDbPublisherIntoToolContext" PartFile="BeGTest" Repository="BeGTest" LibType="Dynamic"/>-->
        <SubPart PartName="DgnDbUnitTestsData"/>
        <Bindings>
            <Directory SourceName="Delivery/UnitTests/Documents" SubPartDirectory="Documents/DgnDb" ProductDirectoryName="UnitTests_Documents_DgnDb" />
        </Bindings>
    </Part>

    <Part Name="DgnDbUnitTestsData" OnlyPlatforms="x64,x86">
        <RequiredRepository>DgnDbUnitTestsData</RequiredRepository>
    </Part>

    <Part Name="DgnV8Converter" OnlyPlatforms="x64,x86">
        <SubProduct ProductName="DgnV8Converter" PartFile="DgnDbSync" Repository="DgnDbSync"/>
    </Part>

    <Part Name="LinkDgnDbPublisherIntoToolContext" BentleyBuildMakeFile="LinkDgnDbPublisherIntoToolContext.mke" OnlyPlatforms="x64,x86">
        <SubPart PartName="DgnV8Converter" LibType="Dynamic"/>
    </Part>

    <ProductDirectoryList ListName="BeTestDocumentsDirList">
        <ProductDirectory Name="UnitTests_Documents_DgnDb"          Path="DgnDb" Deliver="true"/>
        <ProductDirectory Name="UnitTests_Documents_DgnDb"          Path="DgnDb" Deliver="true" LibType="Static"/>
    </ProductDirectoryList>

    <Part Name="UnitTests-Documents" BentleyBuildMakeFile="DeliverBeTestDocuments.mke">
        <SubProduct ProductName="BeTestDocuments"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Documents-DgnDb" SourceName="Delivery/UnitTests/Documents"/>
        </Bindings>
    </Part>

    <!-- *********************************************************************************************** -->
    <!-- ProductDirectory that can be used by any unit test material product based on mobiledgn -->
    <!-- *********************************************************************************************** -->
    <ProductDirectoryList ListName="BeGTest-Material">
        <ProductDirectory Name="BentleyNativeAssemblies"            Path="Assemblies"/>
        <ProductDirectory Name="LoggingNativeAssemblies"            Path="Assemblies"/>
        <ProductDirectory Name="GeomNativeAssemblies"               Path="Assemblies"/>
        <ProductDirectory Name="BeOpenSSLAssemblies"                Path="Assemblies"/>
        <ProductDirectory Name="DgnPlatformNativeAssemblies"        Path="Assemblies"/>
        <ProductDirectory Name="BeCurlAssemblies"                   Path="Assemblies"/>
        <ProductDirectory Name="ECObjectsNativeAssemblies"          Path="Assemblies"/>
        <ProductDirectory Name="GeoCoordNativeAssemblies"           Path="Assemblies"/>
        <ProductDirectory Name="PPNativeAssemblies"                 Path="Assemblies"/>
        <ProductDirectory Name="MdlsysAsneededSmartsolid"           Path="Assemblies"/>
        <ProductDirectory Name="SmartSolidAssemblies"               Path="Assemblies"/>
        <ProductDirectory Name="BePortableUiAssemblies"             Path="Assemblies"/>
        <ProductDirectory Name="CordovaLibs"                        Path="Assemblies"/>
        <ProductDirectory Name="MobileDgnNativeAssemblies"          Path="Assemblies"/>
        
        <ProductDirectory Name="Libs"                               Path="Libs"/>
        <ProductDirectory Name="BentleyLibs"                        Path="Libs"/>
        <ProductDirectory Name="UnitTests-Objects"                  Path="Objects"/>
        <ProductDirectory Name="UnitTests-Assets"                   Path="Assets"/>
        <ProductDirectory Name="UnitTests-IgnoreList"               Path="Assets/Ignore"/>
        <ProductDirectory Name="UnitTests-Documents-DgnDb"          Path="Assets/BeTestDocuments/DgnDb"/>
        <ProductDirectory Name="ECSchemas"                          Path="Assets"/>
        <ProductDirectory Name="DgnPlatformSqlang"                  Path="Assets/sqlang"/>
        <ProductDirectory Name="sqlang"                             Path="Assets/sqlang/platform"/>
        <ProductDirectory Name="DgnPlatformFont"                    Path="Assets/fonts"/>
        <ProductDirectory Name="DgnPlatformLastResortFonts"         Path="Assets"/>
        <ProductDirectory Name="BeIcu4cData"                        Path="Assets"/>
        <ProductDirectory Name="BeIcu4cData"                        Path="Assets" LibType="static"/>
        <ProductDirectory Name="GeoCoordData"                       Path="Assets/DgnGeoCoord"/>
        <ProductDirectory Name="GeoCoordDataMinimal"                Path="Assets/DgnGeoCoord"/>

        <ProductDirectory Name="http"                               Path="Assets/http"/>

        <ProductDirectory Name="MobileDgnJavaScript"                Path="Assets/js/"/>
        <ProductDirectory Name="MobileDgnJavaScriptViewGroups"      Path="Assets/js/ViewGroups"/>
        <ProductDirectory Name="MobileDgnJavaScriptIcons"           Path="Assets/js/resources/icons"/>
        <ProductDirectory Name="StdThemes"                          Path="Assets/std-themes"/>

        <ProductDirectory Name="MobileDgnSdkIncludeDirectory" Deliver="false"/>
        <ProductDirectory Name="DgnViewDecorators" Deliver="false"/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies" Deliver="false"/>
        <ProductDirectory Name="PublicAPI" Deliver="false"/>
        <ProductDirectory Name="VendorAPI" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" LibType="static" />
        <ProductDirectory Name="Libs" Deliver="false" LibType="static"/>
    </ProductDirectoryList>


    <!-- *********************************************************************************************** -->
    <!-- This part should be used by any part that wants to build and/or run a gtest EXE -->
    <!-- *********************************************************************************************** -->
    <Part Name="Gtest-Tools" BentleyBuildMakeFile="prewire.mke" ExcludePlatforms="Android*,iOS*">
        <SubPart PartName="google_gtest_lib"    PartFile="gtest"        Repository="util-gtest" />
        <SubPart PartName="google_gmock_lib"    PartFile="gmock"        Repository="util-gmock" />
        <SubPart PartName="LoggingNative"       PartFile="LoggingSDK"   Repository="loggingsdk" />
        <SubPart PartName="BeSQLite"            PartFile="BeSQLite"     Repository="BeSQLite" />
        <Bindings>
            <PublicAPI Domain="BeGTest" />
            <Files Required="false" SubPartDirectory="Gtest-Tools">Delivery/buildGtest.mke</Files>
            <Files Required="false" SubPartDirectory="Gtest-Tools">Delivery/BeGTestExe.cpp</Files>
            <Files Required="false" SubPartDirectory="Gtest-Tools">Delivery/logging.config.xml</Files>
            <Files Required="false" SubPartDirectory="Gtest-Tools">Delivery/RunGtest.mke</Files>
            <Files Required="false" SubPartDirectory="Gtest-Tools">Delivery/RunTests.py</Files>
        </Bindings>
    </Part>

    <!-- *********************************************************************************************** -->
    <!-- ProductDirectory used by all gtest EXE products -->
    <!-- *********************************************************************************************** -->
    <ProductDirectoryList ListName="Gtest-GtestRunner">
        <ProductDirectory Name="Gtest-NativeAssemblies" Path=""/>
        <ProductDirectory Name="BentleyNativeAssemblies" Path=""/>
        <ProductDirectory Name="LoggingNativeAssemblies" Path=""/>
        <ProductDirectory Name="Gtest-DgnPlatformAssetsDirectory" Path="DgnPlatformAssetsDirectory"/>

        <!-- 
        <ProductDirectory Name="UnitTests-Objects" Deliver="false"/>
        <ProductDirectory Name="UnitTests-IgnoreList" Deliver="false"/>
        -->
        <ProductDirectory Name="Libs" Deliver="false"/>
        <ProductDirectory Name="Libs" Deliver="false" LibType="static"/>
        <ProductDirectory Name="PublicAPI" Deliver="false"/>
        <ProductDirectory Name="VendorAPI" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" LibType="static" />
    </ProductDirectoryList>

</BuildContext>
