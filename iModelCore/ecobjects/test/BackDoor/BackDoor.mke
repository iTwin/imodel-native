#--------------------------------------------------------------------------------------
#
#     $Source: test/BackDoor/BackDoor.mke $
#
#  $Copyright: (c) 2011 Bentley Systems, Incorporated. All rights reserved. $
#
#--------------------------------------------------------------------------------------
%include mdl.mki
%include $(SharedMki)bsioutputdirs.mki

name = ECObjectsTestBackDoor

#--------------------------------------------------------------------------------------
# Create out dir
#--------------------------------------------------------------------------------------
o = $(OutECObjects)build/ECObjectsTest_BackDoor/
always: 
    ~mkdir $(o)

%include $(SharedMki)DefinePublicApiIncludes.mki

#--------------------------------------------------------------------------------------
# Create the Context directory and vars needed to create sym-links
#--------------------------------------------------------------------------------------
LIB_CREATE_CONTEXT_LINK = 1

%if !defined (BuildContext)
    %error define BuildContext before calling $(name).mke
    %return
%endif

# Tell dlmlink.mki where to point symbolic links
ContextDeliveryDir  = $(BuildContext)Delivery/
DLM_LIB_CONTEXT_LOCATION = $(ContextDeliveryDir)

always:
    ~mkdir $(DLM_LIB_CONTEXT_LOCATION)

#--------------------------------------------------------------------------------------
# Create the objs
#--------------------------------------------------------------------------------------
oext=.obj
$(o)BackDoor$(oext) : $(_MakeFilePath)BackDoor.cpp $(_MakeFilePath)BackDoor.h

LOCAL_OBJS = $(o)BackDoor$(oext) 

#--------------------------------------------------------------------------------------
# Create the lib
#--------------------------------------------------------------------------------------
LIB_DEST            = $(o)
LIB_NAME            = $(name)
LIB_OBJS            = $(LOCAL_OBJS)
LIB_TMP_DIR         = $(o)

%include creatlib.mki
