#*--------------------------------------------------------------------------------------+
#
#     $Source: test/SeedData.prewire.mke $
#
#  $Copyright: (c) 2017 Bentley Systems, Incorporated. All rights reserved. $
#
#--------------------------------------------------------------------------------------*/
%include mdl.mki
%include $(SrcRoot)imodel02/iModelCore/ecobjects/mki/ECObjects.mki

dataDir         = $(OutECObjects)tests/
seedDataSource  = $(SrcRoot)imodel02/iModelCore/ecobjects/test/SeedData/

# Wire in seed data
always:
    !~@mkdir $(dataDir)
    !~@mkdir $(dataDir)ECObjectsTest_Data
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData=$(seedDataSource)*.xml"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData=$(seedDataSource)*.json"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/ur-PK/=$(ecobjectsSrc)test/SeedData/ur-PK/*.xml"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/en-GB/=$(ecobjectsSrc)test/SeedData/en-GB/*.xml"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/it/=$(ecobjectsSrc)test/SeedData/it/*.xml"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/V3Conversion/=$(ecobjectsSrc)test/SeedData/V3Conversion/*.xml"
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/ECJson/=$(ecobjectsSrc)test/SeedData/ECJson/*.json"

%ifdef winNT
always:    
    $(unzipCmd) -n $(seedDataSource)performance.zip -d $(dataDir)ECObjectsTest_Data/
    @CreateSymLinks.py -m"$(ContextDeliveryDir)SeedData/=$(dataDir)ECObjectsTest_Data/performance/*.xml"
%endif

# Expose seed data as assets needed by ECObjects unit tests
BEGTEST_ASSETS     + $(ContextDeliveryDir)SeedData/
