<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="../../../../bentleybuild/PartFile.xsd"
              >

    <Part Name="BeMsgPackC">
        <SubPart PartName="Library" />
    </Part>

    <!-- Bind my own VendorAPI into BuildContext/VendorAPI. Note that this part does not cause any sub-part VendorAPI to be bound. I also delivery my license notice. -->
    <Part Name="PublicAPI" BentleyBuildMakeFile="BeMsgPackC.prewire.mke">
        <Bindings>
            <VendorAPI Domain="msgpack" />
            <VendorNotices>Delivery/msgpackc-license.txt</VendorNotices>
        </Bindings>
    </Part>

    <!-- NOTE: Graphite uses "G" as a library suffix to disambiguate from Vancouver libraries -->
    <Part Name="Library" BentleyBuildMakeFile="BeMsgPackC.mke">
        <SubPart PartName="PublicAPI" />
        <Bindings>
            <Libs>Delivery/$(libprefix)iTwinMsgPackC$(libext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)iTwinMsgPackC$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="BeMsgPackCDynamic" ExcludePlatforms="Android*,iOS*,Linux*,MacOS*">
        <SubPart PartName="BeMsgPackC" LibType="Dynamic"/>
    </Part>
    
    <Part Name="BeMsgPackCStatic">
        <SubPart PartName="BeMsgPackC" LibType="Static"/>
    </Part>

    <NuGetProduct Name="MsgPackCNuget" LicenseFile="MsgPackCNugetLicense.json">
        <Directories DirectoryListName="ForSdkSource" PartFile="CommonProductDirs" Repository="bsicommon"/>
        <Directories DirectoryListName="NugetSdkSourceOverride" PartFile="CommonProductDirs" Repository="bsicommon"/>
        <SubPart PartName="BeMsgPackCDynamic"/>
        <SubPart PartName="BeMsgPackCStatic"/>
    </NuGetProduct>

</BuildContext>
