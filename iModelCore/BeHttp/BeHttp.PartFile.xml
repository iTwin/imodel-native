<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="PublicAPI" BentleyBuildMakeFile="prewire.mke" ApiNumber="M02">
        <SubPart PartName="Base"                 PartFile="Bentley"          Repository="Bentley" />
        <SubPart PartName="OpenSSL" PartFile="Libsrc-Nugets" Repository="bsicommon"/>
        <SubPart PartName="PublicAPI"            PartFile="BeSQLite"         Repository="BeSQLite"/>
        <SubPart PartName="Curl" PartFile="Libsrc-Nugets" Repository="bsicommon"/>
        <Bindings>
            <PublicAPI Domain="BeHttp" />
        </Bindings>
    </Part>

    <!-- We need this shim part because there is no LKG for Android, and thus Android builds cannot get a partfile from the LKG to see that the part excludes Android. -->
    <Part Name="BeCasablancaPublicAPIShim" OnlyPlatforms="WinRT*,x86,x64">
        <SubPart PartName="PublicAPI"            PartFile="BeCasablanca"     Repository="Libsrc-casablanca"/>
    </Part>

    <Part Name="PublishedAPI" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishApi.mke" BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=folly">
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="FollyShim"/>
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/BeHttp" />
        </Bindings>
    </Part>

    <!-- We need this shim part because there is no LKG for some platforms, and thus builds cannot get a partfile from the LKG to see that the part excludes said platforms. -->
    <Part Name="FollyShim">
        <SubPart PartName="folly" PartFile="facebook" Repository="Libsrc-facebook"/>
    </Part>

    <Part Name="BeHttpLibrary" BentleyBuildMakeFile="BeHttp.mke" ApiNumber="M02">
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BeHttpLibrary-Curl"/>
        <SubPart PartName="BentleyDll"      PartFile="Bentley"      Repository="Bentley"/>
        <SubPart PartName="BeSQLite"        PartFile="BeSQLite"     Repository="BeSQLite"/>
        <SubPart LibType="Static" PartName="Compress" PartFile="Libsrc-Nugets" Repository="bsicommon"/>
        <SubPart PartName="FollyShim"/>
        <Bindings>
            <Libs>Delivery/$(libprefix)BeHttp$(libext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)BeHttp$(ApiNumber)$(shlibext)</Assemblies>
            <Directory ProductDirectoryName="Assets" ProductSubDirectory="http" SourceName="Delivery/http" SubPartDirectory="BeHttpLibraryAssets"/>
        </Bindings>
    </Part>

    <Part Name="BeHttpLibrary-Curl">
        <SubPart PartName="Curl" PartFile="Libsrc-Nugets" Repository="bsicommon"/>
    </Part>

    <Part Name="BeHttp">
        <SubPart PartName="PublishedAPI" />
        <SubPart PartName="BeHttpLibrary" />
        <SubPart PartName="BeHttp-Xliffs"/>
    </Part>

    <Part Name="BeHttpMavenArchive" BentleyBuildMakeFile="nonport/android/BeHttpMavenArchive.mke" OnlyPlatforms="Android*">
        <Bindings>
            <Directory SourceName="Delivery/MavenArchive/com/bentley/android/BeHttp"
                       ProductDirectoryName="MavenDependencies" ProductSubDirectory="com/bentley/android/BeHttp"
                       SubPartDirectory="MavenDependencies/com/bentley/android/BeHttp" />
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // L10N                                                                   // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="BeHttp-Xliffs" BentleyBuildMakeFile="BeHttpXliffs.mke">
        <Bindings>
            <Files ProductDirectoryName="BeHttpXliffs" Required="false" SubPartDirectory="xliffs">
                Delivery/xliffs/BeHttp_en.xliff
            </Files>
        </Bindings>
    </Part>

    <!-- English Xliffs generated during the build are pushed (by PRG only) to Mercurial next to translations for L10N vendor convenience -->
    <Part Name="L10N-BeHttpXliffs-en" OnlyPlatforms="x64"
        BentleyBuildMakeFile="${SrcRoot}bsicommon/sqlang/mki/PushXliffsFromBuild.mke"
        BentleyBuildMakeOptions="-dBUILD_XLIFF_DIRECTORY=$(OutputRootDir)BuildContexts/BeHttp/Delivery/xliffs/ -dL10N_XLIFF_DIRECTORY=$(SrcRoot)l10n/l10n-BeHttp/ -dL10N_XLIFF_LANG_DIRECTORY=en">
        <SubPart PartName="BeHttp-Xliffs" />
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-cs" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=cs">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/BeHttp_cs.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-de" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=de">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/BeHttp_de.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-es" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=es">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/BeHttp_es.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-fi" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fi">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/BeHttp_fi.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-fr" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fr">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/BeHttp_fr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-it" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=it">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/BeHttp_it.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-ja" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ja">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/BeHttp_ja.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-ko" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ko">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/BeHttp_ko.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-nl" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=nl">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/BeHttp_nl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-pl" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pl">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/BeHttp_pl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-pt" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pt">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/BeHttp_pt.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-ru" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ru">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/BeHttp_ru.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-sv" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=sv">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/BeHttp_sv.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-tr" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=tr">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/BeHttp_tr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-zh-cn" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-cn">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/BeHttp_zh-cn.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-BeHttpXliffs-zh-tw" BentleyBuildMakeFile="l10n-BeHttp.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-tw">
        <RequiredRepository>l10n-BeHttp</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-BeHttpXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/BeHttp_zh-tw.xliff</Files>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // L10N SQLANG For tests                                                  // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part
        Name="BeHttpSqlang-en"
        BentleyBuildMakeFile="${SrcRoot}bsicommon/sqlang/mki/XliffsToDb.mke"
        BentleyBuildMakeOptions="-dSQLANG_OutputDb=$(OutputRootDir)Build/BeHttp/sqlang/BeHttp_en.sqlang.db3 -dSQLANG_XliffWildcard=$(BuildContext)SubParts/xliffs/*.xliff">
        <SubPart PartName="BeHttp-Xliffs" />
        <Bindings>
            <Files ProductDirectoryName="sqlang" Required="true">Delivery/sqlang/BeHttp_en.sqlang.db3</Files>
        </Bindings>
    </Part>

    <!-- ******************************** Unit Tests ************************************** -->
    <Part Name="PrewireForUnitTests" DeferType="BuildUnitTests" BentleyBuildMakeFile="Tests/UnitTests/Prewire.mke">
        <SubPart PartName="BeHttpLibrary" />
        <Bindings>
            <Files ProductDirectoryName="UnitTests-IgnoreList" ProductSubDirectory="BeHttp" SubPartDirectory="UnitTests/BeHttp">Delivery/UnitTests/ignore_list.txt</Files>
        </Bindings>
    </Part>

    <Part Name="UnitTests-Published" DeferType="BuildUnitTests" BentleyBuildMakeFile="Tests/UnitTests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Published -dUsePublishedApi">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="PublishedAPI" />
        <SubPart PartName="BeHttpSqlang-en" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects" ProductSubDirectory="BeHttp/Published" SourceName="Delivery/UnitTests/Objects/Published"/>
        </Bindings>
    </Part>

    <!-- Define a test collection part. This is included in DgnClientFx's TestsAggregate -->
    <Part Name="Tests">
        <SubPart PartName="UnitTests-Published"/>
    </Part>

    <!-- Define a gtest program to run the tests. The Gtest and RunGtest parts are included in DgnClientFx's Gtest-Aggregator and RunGtest-DgnClientFxTests parts -->
    <Product Name="BeHttp-Tests">
        <!-- Just ensure that builds, run manually if needed -->
        <SubProduct ProductName="BeHttp-IntegrationGtest"/>
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="Tests"/>
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest"  PartFile="BeGTest"/>
    </Product>

    <Part Name="Gtest" DeferType="BuildUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/gtest/buildGtest.mke" BentleyBuildMakeOptions="-dTEST_NAME=BeHttpTest -dTEST_COLLECTION_PRODUCT=BeHttp-Tests" OnlyPlatforms="x86,x64,Linux*,MacOS*,Android*">
        <SubProduct ProductName="BeHttp-Tests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/BeHttpTest/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/BeHttpTest/Assets" />
        </Bindings>
    </Part>

    <Product Name="BeHttp-Gtest" >
        <SubPart PartName="Gtest"/>
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RunGtest" DeferType="RunUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=BeHttp-Gtest -dGTEST_NAME=BeHttpTest" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="BeHttp-Gtest" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files Required="false" SubPartDirectory="Gtest/Logs">Delivery/Gtest/Logs/BeHttpTest.log</Files>
        </Bindings>
    </Part>

    <!-- Memory leak testing of BeHttp tests. Only called on demand -->
    <Part Name="MemLeakTests" BentleyBuildMakeFile="${SrcRoot}DgnDbTestingScripts/MemoryLeak/RunMemLeakDetection.mke" BMakeOptions="-dGTEST_PRODUCT=BeHttp-Gtest -dGTEST_NAME=BeHttpTest" OnlyPlatforms="x64">
        <SubPart PartFile="DgnDbTestingScripts" Repository="DgnDbTestingScripts" PartName="MemLeakTests" />
        <SubProduct ProductName="BeHttp-Gtest" />
    </Part>


    <!-- ********************** -->
    <!-- **** AndroidJUnit **** -->
    <!-- ********************** -->
    <Part Name="AndroidJUnit" DeferType="BuildUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/Android//MakeJUnitTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=BeHttp -dTEST_COLLECTION_PRODUCT=BeHttp-Tests -dUSE_STATIC_LIBRARIES=1 -dTEST_ANDROID_MIN_SDK_VERSION=19" OnlyPlatforms="Android*">
        <SubProduct ProductName="BeHttp-Tests"/>
        <SubPart PartName="AndroidJUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="AndroidJUnit-Project" SourceName="Delivery/ANJUP" />
        </Bindings>
    </Part>

    <Product Name="BeHttp-AndroidJUnit" >
        <SubPart PartName="AndroidJUnit" LibType="Static"/>
        <Directories DirectoryListName="AndroidJUnitProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RunAndroidJUnitTest" DeferType="RunUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/Android//RunAndroidJUnitTest.mke" BentleyBuildMakeOptions="-dANDROIDJUNIT_PRODUCT=BeHttp-AndroidJUnit" OnlyPlatforms="Android*">
        <SubProduct ProductName="BeHttp-AndroidJUnit"/>
        <Bindings>
            <Files SubPartDirectory="ANJU/Logs">Delivery/ANJU/Logs/BeHttp-AndroidJUnit.log</Files>
        </Bindings>
    </Part>

    <!-- ********************** -->
    <!-- **** iOSXCTest **** -->
    <!-- ********************** -->
    <Part Name="iOSXCTest" DeferType="BuildUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/iOS//MakeXCTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=BeHttp -dTEST_COLLECTION_PRODUCT=BeHttp-Tests -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="iOS*">
        <SubProduct ProductName="BeHttp-Tests"/>
        <SubPart PartName="iOSXCTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="iOSXCTestProject" SourceName="Delivery/iOSXCTest/BeHttp/Project" />
        </Bindings>
    </Part>

    <Product Name="BeHttp-iOSXCTest" >
        <SubPart PartName="iOSXCTest" LibType="Static"/>
        <Directories DirectoryListName="iOSXCTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RuniOSXCTest" DeferType="RunUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/iOS//RunXCTestProject.mke" BentleyBuildMakeOptions="-dXCTEST_PRODUCT=BeHttp-iOSXCTest" OnlyPlatforms="iOS*">
        <SubProduct ProductName="BeHttp-iOSXCTest"/>
        <Bindings>
            <Files Required="false" SubPartDirectory="XCTest/Logs">Delivery/XCTest/Logs/BeHttp-iOSXCTest.log</Files>
        </Bindings>
    </Part>
    <!-- *********************************************************** -->
    <!-- **** UWP Microsoft::VisualStudio::CppUnitTestFramework **** -->
    <!-- *********************************************************** -->
    <!-- N.B. ApiNumber is important here because we must manually reference some DLLs, and thus need an accruate suffix to find them. -->
    <Part
        Name="UwpTest"
        DeferType="BuildUnitTests"
        BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/uwp//MakeUwpTestProject.mke"
        BentleyBuildMakeOptions="-dTEST_NAME=BeHttp -dTEST_COLLECTION_PRODUCT=BeHttp-Tests"
        OnlyPlatforms="WinRT*"
        ApiNumber="M02"
        >
        <SubProduct ProductName="BeHttp-Tests"/>
        <SubPart PartName="UwpTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="UwpTestProject" SourceName="Delivery/BeHttpUwpTest"/>
        </Bindings>
    </Part>

    <Product Name="BeHttp-UwpTest">
        <SubPart PartName="UwpTest"/>
        <Directories DirectoryListName="UwpTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part
        Name="RunUwpTest"
        DeferType="RunUnitTests"
        BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/uwp//RunUwpTestProject.mke"
        BentleyBuildMakeOptions="-dUWPTEST_PRODUCT=BeHttp-UwpTest"
        OnlyPlatforms="WinRT*"
        >
        <SubPart PartName="UwpTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <SubProduct ProductName="BeHttp-UwpTest"/>
        <Bindings>
            <Files Required="false" SubPartDirectory="UwpTest/Logs">Delivery/UwpTest/Logs/BeHttp-UwpTest.log</Files>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // Integration Tests - used for debugging                                 // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <Product Name="BeHttp-IntegrationGtest" OnlyPlatforms="x64">
        <SubPart PartName="Integration-Gtest"/>
        <SubPart PartName="BeHttpSqlang-en" />
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
        <Directories DirectoryListName="BeHttp-IntegrationGtest-Dirs"/>
    </Product>

    <ProductDirectoryList ListName="BeHttp-IntegrationGtest-Dirs">
        <!-- I don't know what this is... but this is equivalent to "living with" the warning anyway. -->
        <ProductDirectory Name="sqlang" Deliver="false"/>
    </ProductDirectoryList>

    <Part Name="Integration-Gtest" DeferType="BuildUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/gtest/buildGtest.mke" BentleyBuildMakeOptions="-dTEST_NAME=BeHttpIntegrationTests -dTEST_COLLECTION_PRODUCT=BeHttp-IntegrationTests" OnlyPlatforms="x64">
        <SubProduct ProductName="BeHttp-IntegrationTests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/BeHttpIntegrationTests/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/BeHttpIntegrationTests/Assets" />
        </Bindings>
    </Part>

    <Product Name="BeHttp-IntegrationTests" OnlyPlatforms="x64">
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="IntegrationTests-Published"/>
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest"  PartFile="BeGTest"/>
    </Product>

    <Part Name="IntegrationTests-Published" DeferType="BuildUnitTests" BentleyBuildMakeFile="Tests/IntegrationTests/IntegrationTests.mke" BentleyBuildMakeOptions="-dUsePublishedApi" OnlyPlatforms="x64">
        <SubPart PartName="BeHttp" />
        <SubPart PartName="BeJsonCpp" PartFile="BeJsonCpp" Repository="Libsrc-JsonCpp"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects" ProductSubDirectory="BeHttp/IntegrationTests/Published" SourceName="Delivery/BeHttpIntegrationTests/Objects"/>
            <Directory ProductDirectoryName="Assets" ProductSubDirectory="BeHttpIntegrationTests" SourceName="Delivery/BeHttpIntegrationTests/Assets"/>
        </Bindings>
    </Part>

</BuildContext>
