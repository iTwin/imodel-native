#--------------------------------------------------------------------------------------
#
#     $Source: ConnectC/Samples/Android/GetProjects/GetProjectsJavadoc.mke $
#
#  $Copyright: (c) 2017 Bentley Systems, Incorporated. All rights reserved. $
#
#--------------------------------------------------------------------------------------
%include mdl.mki

#--------------------------------------------------------------------------------------
#   Check for environment dependencies
#--------------------------------------------------------------------------------------
%if $(TARGET_PLATFORM)!="Android"
    %error This makefile should be used only when TARGET_PLATFORM is Android
%endif

%if !defined (ANDROID_SDK_ROOT)
    %error Must set ANDROID_SDK_ROOT
%endif

#--------------------------------------------------------------------------------------
#   Set Variables
#--------------------------------------------------------------------------------------
DGNCLIENT_APP_ProjectRoot = $(_MakeFilePath)

buildOut = $(OutputRootDir)build/$(_MakeFileName)/
mavenDependenciesDirectory = $(BuildContext)SubParts/MavenDependencies/

#--------------------------------------------------------------------------------------
#   Use Gradle to build the DgnClientFx archive
#--------------------------------------------------------------------------------------
GRADLE_TASKS = javadoc
GRADLE_PROPERTIES =\
    buildDirectory=$[@subst \, \/, $(buildOut)]\
    MavenDependenciesDirectory=$[@subst \, \/, $(mavenDependenciesDirectory)]\
    BuildContext=$[@subst \, \/, $(BuildContext)]

# See comments in gradleBuild.mki as to why we do this.
GRADLE_FilterDocOutputPath=$(buildOut)DocOutput.txt

always:
    ~mkdir $(buildOut)

%include $(BuildContext)SubParts/AndroidTools/gradleBuild.mki
