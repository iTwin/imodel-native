<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="WebServicesClient">
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <SubPart PartName="WebServicesClient-Xliffs" />
        <SubPart PartName="WebServicesClient-Library" />
        <SubPart PartName="WebServicesClient-Bindings" />
        <SubPart PartName="WebServicesClient-Bindings-Android" />
    </Part>

    <Part Name="WebServicesClient-PublicAPI" BentleyBuildMakeFile="Client/prewire.mke">
        <Bindings>
            <PublicAPI Domain="WebServices"/>
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-PublishedAPI" BentleyBuildMakeFile="${SrcBsiCommon}sharedmki/PublishApi.mke" BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson +dPUBLISHAPI_VENDORAPI3=libxml">
        <SubPart PartName="WebServicesClient-PublicAPI"/>
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/WSClient"/>
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-Library" BentleyBuildMakeFile="Client/Client.mke">
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <SubPart PartName="MobileDgnLibrary"            PartFile="MobileDgn" Repository="MobileDgn" />
        <SubPart PartName="MobileDgnLibrary-Android"    PartFile="MobileDgn" Repository="MobileDgn" />
        <SubPart PartName="MobileDgnLibrary-WinRT"      PartFile="MobileDgn" Repository="MobileDgn" />
    </Part>

    <Part Name="WebServicesClient-Bindings" ExcludePlatforms="Android*">
        <SubPart PartName="WebServicesClient-Library" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesClient$(libext)</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesClient$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-Bindings-Android" OnlyPlatforms="Android*">
        <SubPart PartName="WebServicesClient-Library" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesClient.so</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesClient.so</Assemblies>
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-Xliffs" BentleyBuildMakeFile="Client/xliffs.mke">
        <Bindings>
            <Files ProductDirectoryName="WSClientXliffs" Required="false" SubPartDirectory="xliffs">
                Delivery/xliffs/WSError_en.xliff
            </Files>
        </Bindings>
    </Part>

    <Part Name="WSClientUnitTests" ExcludePlatforms="Linux*" BentleyBuildMakeFile="../bsicommon/sharedmki/BuildPlatformUnitTests.mke" BMakeOptions="-dBEGTEST_INPUT=$(SrcRoot)WSClient/Tests/ -dBEGTEST_NAME=WSClient -dBEGTEST_DEPENDENCIES=$(SrcRoot)WSClient/Tests/dependencies.mki">
        <!-- Get the tested API -->
        <SubPart    PartName="WebServicesClient" />
        <!-- Needed for published unit tests -->
        <SubPart    PartName="WebServicesClient-PublishedAPI" />
    </Part>

</BuildContext>

