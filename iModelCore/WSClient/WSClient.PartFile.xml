<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // WebServicesClient lib                                                  // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="WebServicesClient">
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <SubPart PartName="WebServicesClient-Library" />
        <SubPart PartName="WebServicesClient-Library-Android" />
        <SubPart PartName="WSClient-Xliffs" />
    </Part>

    <Part Name="WebServicesClient-PublicAPI" BentleyBuildMakeFile="ClientPrewire.mke">
        <Bindings>
            <PublicAPI Domain="WebServices" />
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-PublishedAPI" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishApi.mke"
     BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson +dPUBLISHAPI_VENDORAPI3=libxml">
        <SubPart PartName="PublishedApi" PartFile="DgnClientFx" Repository="DgnClientFx"/>
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/WSClient" />
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-Library" BentleyBuildMakeFile="ClientLib.mke" ExcludePlatforms="Android*">
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <SubPart PartName="DgnClientFxLibrary"            PartFile="DgnClientFx" Repository="DgnClientFx" />
        <SubPart PartName="DgnClientFxLibrary-WinRT"      PartFile="DgnClientFx" Repository="DgnClientFx" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesClient$(libext)</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesClient$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="WebServicesClient-Library-Android" BentleyBuildMakeFile="ClientLib.mke" OnlyPlatforms="Android*">
        <SubPart PartName="WebServicesClient-PublicAPI" />
        <SubPart PartName="DgnClientFxLibrary-Android"    PartFile="DgnClientFx" Repository="DgnClientFx" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesClient.so</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesClient.so</Assemblies>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // WebServicesCache lib                                                   // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="WebServicesCache">
        <SubPart PartName="WebServicesCache-PublicAPI" />
        <SubPart PartName="WebServicesCache-Library" />
        <SubPart PartName="WebServicesCache-Library-Android" />
        <SubPart PartName="WebServicesCache-Schemas" />
        <SubPart PartName="WSClient-Xliffs" />
    </Part>

    <Part Name="WebServicesCache-PublicAPI" BentleyBuildMakeFile="CachePrewire.mke">
        <Bindings>
            <PublicAPI Domain="WebServices" />
        </Bindings>
    </Part>

    <Part Name="WebServicesCache-PublishedAPI" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishApi.mke"
     BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson +dPUBLISHAPI_VENDORAPI3=libxml">
        <SubPart PartName="WebServicesCache-PublicAPI" />
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/WSClient" />
        </Bindings>
    </Part>

    <Part Name="WebServicesCache-Library" BentleyBuildMakeFile="CacheLib.mke" ExcludePlatforms="Android*">
        <SubPart PartName="WebServicesClient" />
        <SubPart PartName="DgnClientFxLibrary"            PartFile="DgnClientFx" Repository="DgnClientFx" />
        <SubPart PartName="DgnClientFxLibrary-WinRT"      PartFile="DgnClientFx" Repository="DgnClientFx" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesCache$(libext)</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesCache$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="WebServicesCache-Library-Android" BentleyBuildMakeFile="CacheLib.mke" OnlyPlatforms="Android*">
        <SubPart PartName="WebServicesClient" />
        <SubPart PartName="DgnClientFxLibrary-Android"    PartFile="DgnClientFx" Repository="DgnClientFx" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)WebServicesCache.so</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)WebServicesCache.so</Assemblies>
        </Bindings>
    </Part>

    <Part Name="WebServicesCache-Schemas" BentleyBuildMakeFile="CacheSchemasDelivery.mke">
        <Bindings>
            <Directory
                SourceName="Delivery/ECSchemas/WSClient/Cache"
                SubPartDirectory="ECSchemas/WSClient/Cache"
                ProductDirectoryName="ECSchemas"
                ProductSubDirectory="ECSchemas/WSClient/Cache" />
        </Bindings>
    </Part>
    
    
    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // DgnDbServerClient lib                                                        // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="DgnDbServerClient">
        <SubPart PartName="DgnDbServerClient-PublicAPI" />
        <SubPart PartName="DgnDbServerClient-Library" />
        <SubPart PartName="DgnDbServerClient-Bindings" />
        <SubPart PartName="DgnDbServerClient-Bindings-Android" />
        <SubPart PartName="WSClient-Xliffs" />
    </Part>

    <Part Name="DgnDbServerClient-PublicAPI" BentleyBuildMakeFile="DgnDbServerClientPrewire.mke">
        <Bindings>
            <PublicAPI Domain="DgnDbServer" />
        </Bindings>
    </Part>

    <Part Name="DgnDbServerClient-PublishedAPI" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishApi.mke"
     BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson +dPUBLISHAPI_VENDORAPI3=libxml">
        <SubPart PartName="DgnDbServerClient-PublicAPI" />
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/WSClient" />
        </Bindings>
    </Part>

    <Part Name="DgnDbServerClient-Library" BentleyBuildMakeFile="DgnDbServerClientLib.mke">
        <SubPart PartName="WebServicesClient" />
        <SubPart PartName="DgnClientFxLibrary"            PartFile="DgnClientFx" Repository="DgnClientFx" />
        <SubPart PartName="DgnClientFxLibrary-Android"    PartFile="DgnClientFx" Repository="DgnClientFx" />
        <SubPart PartName="DgnClientFxLibrary-WinRT"      PartFile="DgnClientFx" Repository="DgnClientFx" />
    </Part>

    <Part Name="DgnDbServerClient-Bindings" ExcludePlatforms="Android*">
        <SubPart PartName="DgnDbServerClient-Library" />
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)DgnDbServerClient$(libext)</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)DgnDbServerClient$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="DgnDbServerClient-Bindings-Android" OnlyPlatforms="Android*">
        <Bindings>
            <Libs ProductDirectoryName="WSClientLibs" Required="false">Delivery/$(libprefix)DgnDbServerClient.so</Libs>
            <Assemblies ProductDirectoryName="WSClientAssemblies">Delivery/$(libprefix)DgnDbServerClient.so</Assemblies>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // L10N                                                                   // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="WSClient-Xliffs" BentleyBuildMakeFile="xliffs.mke">
        <Bindings>
            <Files ProductDirectoryName="WSClientXliffs" Required="false" SubPartDirectory="xliffs">
                Delivery/xliffs/WebServicesCache_en.xliff
                Delivery/xliffs/WebServicesClient_en.xliff
            </Files>
        </Bindings>
    </Part>

    <!-- English Xliffs generated during the build are pushed (by PRG only) to Mercurial next to translations for L10N vendor convenience -->
    <Part Name="L10N-WSClientXliffs-en" OnlyPlatforms="x64"
        BentleyBuildMakeFile="${SrcRoot}bsicommon/sqlang/mki/PushXliffsFromBuild.mke"
        BentleyBuildMakeOptions="-dBUILD_XLIFF_DIRECTORY=$(OutputRootDir)BuildContexts/WSClient/Delivery/xliffs/ -dL10N_XLIFF_DIRECTORY=$(SrcRoot)l10n/l10n-WSClient/en/">
        <SubPart PartName="WSClient-Xliffs" />
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-cs" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=cs">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/WebServicesCache_cs.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/WebServicesClient_cs.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-de" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=de">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/WebServicesCache_de.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/WebServicesClient_de.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-es" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=es">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/WebServicesCache_es.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/WebServicesClient_es.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-fi" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fi">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/WebServicesCache_fi.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/WebServicesClient_fi.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-fr" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fr">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/WebServicesCache_fr.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/WebServicesClient_fr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-it" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=it">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/WebServicesCache_it.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/WebServicesClient_it.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-ja" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ja">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/WebServicesCache_ja.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/WebServicesClient_ja.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-ko" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ko">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/WebServicesCache_ko.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/WebServicesClient_ko.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-nl" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=nl">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/WebServicesCache_nl.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/WebServicesClient_nl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-pl" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pl">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/WebServicesCache_pl.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/WebServicesClient_pl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-pt" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pt">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/WebServicesCache_pt.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/WebServicesClient_pt.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-ru" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ru">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/WebServicesCache_ru.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/WebServicesClient_ru.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-sv" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=sv">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/WebServicesCache_sv.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/WebServicesClient_sv.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-tr" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=tr">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/WebServicesCache_tr.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/WebServicesClient_tr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-zh-cn" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-cn">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/WebServicesCache_zh-cn.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/WebServicesClient_zh-cn.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-WSClientXliffs-zh-tw" BentleyBuildMakeFile="l10n-WSClient.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-tw">
        <RequiredRepository>l10n-WSClient</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/WebServicesClient_zh-tw.xliff</Files>
            <Files ProductDirectoryName="L10N-WSClientXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/WebServicesCache_zh-tw.xliff</Files>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // Unit Tests                                                             // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <Part Name="PrewireForUnitTests" BentleyBuildMakeFile="Tests/UnitTests/Prewire.mke">
        <SubPart PartName="WebServicesCache" />
        <SubPart PartName="WebServicesClient"/>
        <Bindings>
            <Files ProductDirectoryName="UnitTests-IgnoreList" ProductSubDirectory="WebServices" SubPartDirectory="UnitTests/WebServices">
                Delivery/UnitTests/ignore_list.txt
             </Files>
        </Bindings>
    </Part>

    <Part Name="WSClientUnitTests-Assets" BentleyBuildMakeFile="Tests/UnitTests/TestAssetsDelivery.mke" />

    <Part Name="UnitTests-Published" 
        BentleyBuildMakeFile="Tests/UnitTests/BuildTests.mke" 
        BentleyBuildMakeOptions="-dTestDir=Published -dUsePublishedApi"
        >
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="WebServicesClient-PublishedAPI" />
        <SubPart PartName="WebServicesCache-PublishedAPI" />
        
        <!-- Assets -->
        <SubPart PartName="WSClientUnitTests-Assets" />
        
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects" ProductSubDirectory="WebServices/Published" SourceName="Delivery/UnitTests/Objects/Published"/>
        </Bindings>
    </Part>

    <!-- Define a test collection part. This is included in DgnClientFx's TestsAggregate -->
    <Part Name="Tests">
        <SubPart PartName="UnitTests-Published"/>
    </Part>

    <!-- Define a gtest program to run the tests. 
        The Gtest and RunGtest parts are included in DgnClientFx's Gtest-Aggregator and RunGtest-DgnClientFxTests parts -->
    <Product Name="WSClient-Tests">
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="Tests"/>
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest"  PartFile="BeGTest"/>
    </Product>

    <Part Name="Gtest" 
        BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGTest.mke" 
        BentleyBuildMakeOptions="-dTEST_NAME=WSClientTest -dTEST_COLLECTION_PRODUCT=WSClient-Tests" 
        OnlyPlatforms="x86,x64,Linux*,MacOS*"
        >
        <SubProduct ProductName="WSClient-Tests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/WSClientTest/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/WSClientTest/Assets" />
        </Bindings>
    </Part>

    <Product Name="WSClient-Gtest" >
        <SubPart PartName="Gtest"/>
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RunGtest" 
        BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGTest.mke" 
        BentleyBuildMakeOptions="-dGTEST_EXE=$(OutputRootDir)Product/WSClient-Gtest/WSClientTest -dGTEST_OUTPUT_DIR=$(OutputRootDir)build/WSClient" 
        OnlyPlatforms="x86,x64,MacOs*,Linux*"
        >
        <SubProduct ProductName="WSClient-Gtest" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // Integration Tests - used for debugging                                 // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <Part Name="WSClientIntegrationTests" BentleyBuildMakeFile="Tests/IntegrationTests/IntegrationTests.mke">
        <SubPart PartName="WebServicesClient" />
        <SubPart PartName="WebServicesCache" />
        <SubPart PartName="google_gtest_lib" PartFile="gtest" Repository="util-gtest" />
        <SubPart PartName="google_gmock_lib" PartFile="gmock" Repository="util-gmock" />
    </Part>

</BuildContext>
