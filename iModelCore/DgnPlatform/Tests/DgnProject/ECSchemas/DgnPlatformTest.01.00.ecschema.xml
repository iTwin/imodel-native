<?xml version="1.0" encoding="utf-8"?>
<ECSchema schemaName="DgnPlatformTest" nameSpacePrefix="dptest" version="1.0" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.2.0">

    <ECSchemaReference name="CoreCustomAttributes" version="01.00" prefix="CoreCA" />
    <ECSchemaReference name="ECDbMap" version="02.00" prefix="ecdbmap" />
    <ECSchemaReference name="BisCore" version="01.00" prefix="bis" />

  <ECClass typeName="TestElement" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>

        <!-- The following properties are meant to be auto-handled. -->
        <ECProperty propertyName="IntegerProperty1" typeName="int" />
        <ECProperty propertyName="IntegerProperty2" typeName="int" />
        <ECProperty propertyName="IntegerProperty3" typeName="int" />
        <ECProperty propertyName="IntegerProperty4" typeName="int" />
        <ECProperty propertyName="DoubleProperty1"  typeName="double" />
        <ECProperty propertyName="DoubleProperty2"  typeName="double" />
        <ECProperty propertyName="DoubleProperty3"  typeName="double" />
        <ECProperty propertyName="DoubleProperty4"  typeName="double" />
        <ECProperty propertyName="PointProperty1"   typeName="Point3d" />
        <ECProperty propertyName="PointProperty2"   typeName="Point3d" />
        <ECProperty propertyName="PointProperty3"   typeName="Point3d" />
        <ECProperty propertyName="PointProperty4"   typeName="Point3d" />

        <ECProperty propertyName="b" typeName="boolean"/>
        <ECProperty propertyName="d" typeName="double"/>
        <ECProperty propertyName="dt" typeName="dateTime"/>
        <ECProperty propertyName="dtUtc" typeName="dateTime">
            <ECCustomAttributes>
                <DateTimeInfo xmlns="CoreCustomAttributes.01.00">
                    <DateTimeKind>Utc</DateTimeKind>
                </DateTimeInfo>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="i" typeName="int"/>
        <ECProperty propertyName="l" typeName="long"/>
        <ECProperty propertyName="s" typeName="string"/>
        <ECProperty propertyName="p2d" typeName="point2d"/>
        <ECProperty propertyName="p3d" typeName="point3d"/>
        <ECStructProperty propertyName="Location" typeName="LocationStruct" />
        <ECArrayProperty propertyName="ArrayOfString" typeName="string" minOccurs="0" maxOccurs="unbounded" />
        <ECArrayProperty propertyName="ArrayOfInt" typeName="int" minOccurs="0" maxOccurs="unbounded" />
        <ECArrayProperty propertyName="ArrayOfPoint3d" typeName="Point3d" minOccurs="0" maxOccurs="unbounded" />

    <!-- The rest of the properties are custom-handled -->
        <ECProperty propertyName="TestElementProperty" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestIntegerProperty1" typeName="int">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestIntegerProperty2" typeName="int">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestIntegerProperty3" typeName="int">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestIntegerProperty4" typeName="int">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestDoubleProperty1"  typeName="double">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestDoubleProperty2"  typeName="double">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestDoubleProperty3"  typeName="double">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestDoubleProperty4"  typeName="double">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestPointProperty1"   typeName="Point3d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestPointProperty2"   typeName="Point3d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestPointProperty3"   typeName="Point3d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="TestPointProperty4"   typeName="Point3d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECClass>

    <ECClass typeName="TestElement2d" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:AnnotationElement2d</BaseClass>
        <ECProperty propertyName="TestElementProperty" typeName="string" />
    </ECClass>

    <ECClass typeName="TestUniqueAspect" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:ElementUniqueAspect</BaseClass>
        <ECProperty propertyName="TestUniqueAspectProperty" typeName="string" />
        <ECProperty propertyName="Length" typeName="double" />
    </ECClass>

    <ECClass typeName="TestMultiAspect" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:ElementMultiAspect</BaseClass>
        <ECProperty propertyName="TestMultiAspectProperty" typeName="string" />
    </ECClass>

    <ECRelationshipClass typeName="TestElementDrivesElement" isDomainClass="True" strength="referencing" strengthDirection="forward" >
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:ElementDrivesElement</BaseClass>
        <Source cardinality="(0,1)" roleLabel="Element with datum plane" polymorphic="True">
            <Class class="bis:Element" />
        </Source>
        <Target cardinality="(0,1)" roleLabel="Element to move" polymorphic="True">
            <Class class="bis:Element" />
        </Target>
        <ECProperty propertyName="Property1" typeName="string" />
    </ECRelationshipClass>

    <ECRelationshipClass typeName="TestElementIsRelatedToElement" isDomainClass="True" strength="referencing" strengthDirection="forward" >
        <Source cardinality="(0,N)" polymorphic="True">
            <Class class="bis:Element" />
        </Source>
        <Target cardinality="(0,N)" polymorphic="True">
            <Class class="bis:Element" />
        </Target>
        <ECProperty propertyName="Property1" typeName="string" />
    </ECRelationshipClass>

    <ECRelationshipClass typeName="TestElementIsRelatedToElement2" isDomainClass="True" strength="referencing" strengthDirection="forward" >
        <Source cardinality="(0,N)" polymorphic="True">
            <Class class="bis:Element" />
        </Source>
        <Target cardinality="(0,N)" polymorphic="True">
            <Class class="bis:Element" />
        </Target>
        <ECProperty propertyName="Property1" typeName="string" />
    </ECRelationshipClass>

    <ECClass typeName="TestGroup" isDomainClass="True">
        <!-- Used to test the IElementGroup interface -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>
    </ECClass>

    <ECClass typeName="Robot" isDomainClass="true">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>
        <ECProperty propertyName="Name" typeName="string" />
    </ECClass>

    <ECClass typeName="Obstacle" isDomainClass="true">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>
        <ECProperty propertyName="CanMove" typeName="boolean" />
        <ECProperty propertyName="SomeProperty" typeName="string" />
    </ECClass>

    <ECClass typeName="RestrictedElement1" isDomainClass="true">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00">
                <Restrictions>
                    <string>Delete</string>
                    <string>Insert</string>
                    <string>SetCode</string>
                    <string>DeleteChild</string>
                    <string>Move</string>
                    <string>SetGeometry</string>
                </Restrictions>
            </ClassHasHandler>
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>
    </ECClass>

    <ECClass typeName="RestrictedElement2" isDomainClass="true">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00">
                <Restrictions>
                    <string>Clone</string>
                    <string>SetParent</string>
                    <string>InsertChild</string>
                    <string>UpdateChild</string>
                    <string>SetCategory</string>
                </Restrictions>
            </ClassHasHandler>
        </ECCustomAttributes>
        <BaseClass>bis:PhysicalElement</BaseClass>
    </ECClass>

    <ECClass typeName="TestAuthority" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>bis:Authority</BaseClass>
    </ECClass>

    <ECClass typeName="TestElementSub1" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>TestElement</BaseClass>
        <ECProperty propertyName='Prop1_1' typeName='string'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop1_2' typeName='long'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop1_3' typeName='double'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECClass>

    <ECClass typeName="TestElementSub2" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>TestElementSub1</BaseClass>
        <ECProperty propertyName='Prop2_1' typeName='string'>
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop2_2' typeName='long'>
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop2_3' typeName='double'>
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
      </ECClass>

    <ECClass typeName="TestElementSub3" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>TestElementSub2</BaseClass>
        <ECProperty propertyName='Prop3_1' typeName='string'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop3_2' typeName='long'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName='Prop3_3' typeName='double'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECClass>

    <ECClass typeName="TestStruct" isStruct="True" isDomainClass="False">
        <ECProperty propertyName="TestStructDoubleMember" typeName="double" />"
        <ECProperty propertyName="TestStructIntMember" typeName="int" />"
        <ECProperty propertyName="TestStructBoolMember" typeName="boolean" />"
    </ECClass>

    <ECClass typeName="TestElementComplex" isDomainClass="True">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <BaseClass>TestElement</BaseClass>
        <ECProperty propertyName='Prop_point3d' typeName='point3d'>
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECStructProperty propertyName="Prop_struct" typeName="TestStruct">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECStructProperty>
    </ECClass>

    <ECClass typeName="TestElementWithNoHandler" isDomainClass="True">
        <BaseClass>TestElement</BaseClass>
        <ECProperty propertyName='StringProperty' typeName='string' />
        <ECProperty propertyName='IntProperty' typeName='int' />
    </ECClass>

    <ECClass typeName="TestPhysicalTemplate" isDomainClass="True">
        <BaseClass>bis:PhysicalTemplate</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECClass>

    <ECClass typeName="TestPhysicalType" isDomainClass="True">
        <BaseClass>bis:PhysicalType</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <ECProperty propertyName="StringProperty" typeName="string" />
        <ECProperty propertyName="IntProperty" typeName="int" />
    </ECClass>

    <ECClass typeName="TestGraphicalType2d" isDomainClass="True">
        <BaseClass>bis:GraphicalType2d</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
        <ECProperty propertyName="StringProperty" typeName="string" />
        <ECProperty propertyName="IntProperty" typeName="int" />
    </ECClass>

    <ECClass typeName="LocationStruct" isStruct="True" isDomainClass="False">
        <ECProperty propertyName="Street" typeName="string" />
        <ECStructProperty propertyName="City" typeName="CityStruct" />
    </ECClass>

    <ECClass typeName="CityStruct" isStruct="True" isDomainClass="False">
        <ECProperty propertyName="Name" typeName="string" />
        <ECProperty propertyName="State" typeName="string" />
        <ECProperty propertyName="Country" typeName="string" />
        <ECProperty propertyName="Zip" typeName="int"/>
    </ECClass>

</ECSchema>
