<?xml version="1.0" encoding="UTF-8"?>
<ECSchema schemaName="BisCore" alias="bis" version="01.00" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.1">

    <ECSchemaReference name="CoreCustomAttributes" version="01.00" alias="CoreCA"/>
    <ECSchemaReference name="Bentley_Standard_CustomAttributes" version="01.12" alias="bsca"/>
    <ECSchemaReference name="EditorCustomAttributes" version="01.03" alias="beca" />
    <ECSchemaReference name="ECDbMap" version="02.00" alias="ecdbmap"/>

    <ECCustomAttributes>
        <RelatedItemsDisplaySpecifications xmlns="Bentley_Standard_CustomAttributes.01.09">
            <Specifications>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>GeometricElement2d</ParentClass>
                    <RelationshipPath>GeometricElement2dIsInCategory:0:Category</RelationshipPath>
                </RelatedItemsDisplaySpecification>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>GeometricElement3d</ParentClass>
                    <RelationshipPath>GeometricElement3dIsInCategory:0:Category</RelationshipPath>
                </RelatedItemsDisplaySpecification>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>Element</ParentClass>
                    <RelationshipPath>ModelContainsElements:1:Model</RelationshipPath>
                </RelatedItemsDisplaySpecification>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>Element</ParentClass>
                    <RelationshipPath>ElementOwnsMultiAspects:0:ElementMultiAspect</RelationshipPath>
                </RelatedItemsDisplaySpecification>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>Element</ParentClass>
                    <RelationshipPath>ElementHasLinks:0:LinkElement</RelationshipPath>
                    <DerivedClasses>
                        <string>UrlLink</string>
                        <string>EmbeddedFileLink</string>
                    </DerivedClasses>
                </RelatedItemsDisplaySpecification>
                <RelatedItemsDisplaySpecification>
                    <ParentClass>Element</ParentClass>
                    <RelationshipPath>ElementGroupsMembers:1:Element.ElementHasLinks:0:LinkElement</RelationshipPath>
                    <DerivedClasses>
                        <string>UrlLink</string>
                        <string>EmbeddedFileLink</string>
                    </DerivedClasses>
                </RelatedItemsDisplaySpecification>
            </Specifications>
        </RelatedItemsDisplaySpecifications>
    </ECCustomAttributes>

    <!-- Applied to an ECClass to indicate that a subclass of DgnDomain::Handler will be supplied for it at run-time.
         It must be applied to any ECClass if the application/domain registers a Handler for that ECClass.
         It should not be applied to any other ECClass.
         It is an error to call RegisterHandler() with a handler for an ECClass which lacks this custom attribute. -->
    <ECCustomAttributeClass typeName="ClassHasHandler" description="Applied to an ECClass to indicate that a subclass of DgnDomain::Handler will be supplied for it at run-time." appliesTo="Any">
        <!-- Defines a list of names of actions which are prohibited when the associated handler is not available (e.g., because the DgnDomain is not loaded).
                Restrictions are inherited from superclasses; a subclass can only be as or more restrictive than its superclass, never less. -->
        <ECArrayProperty propertyName="Restrictions" typeName="string" description="List of actions which are not permitted when the associated handler is not available" minOccurs="0" maxOccurs="unbounded"/>
    </ECCustomAttributeClass>

    <!-- Restrictions that may be applied to a CustomHandledProperty. Must match the ECSqlClassParams::StatementType enum -->
    <ECEnumeration typeName="CustomHandledPropertyStatementType" backingTypeName="int" isStrict="true">
        <ECEnumerator value="0" displayLabel="None"/>
        <ECEnumerator value="1" displayLabel="Select"/>
        <ECEnumerator value="2" displayLabel="Insert"/>
        <ECEnumerator value="3" displayLabel="ReadOnly = Select|Insert"/>
        <ECEnumerator value="4" displayLabel="Update"/>
        <ECEnumerator value="6" displayLabel="InsertUpdate = Insert | Update"/>
        <ECEnumerator value="7" displayLabel="All = Select | Insert | Update"/>
    </ECEnumeration>

    <ECCustomAttributeClass typeName="CustomHandledProperty" description="Applied to an element's property to indicate that the property's value is handled specially by a C++ class." appliesTo="AnyProperty">
      <ECProperty propertyName="StatementTypes" typeName="CustomHandledPropertyStatementType"/>
    </ECCustomAttributeClass>

    <!-- Restrictions that may be applied to an AutoHandledProperty. Must match the ECSqlClassParams::StatementType enum -->
    <ECEnumeration typeName="AutoHandledPropertyStatementType" backingTypeName="int" isStrict="true">
        <ECEnumerator value="3" displayLabel="ReadOnly = Select|Insert"/>
        <ECEnumerator value="7" displayLabel="All = Select | Insert | Update"/>
    </ECEnumeration>

    <ECCustomAttributeClass typeName="AutoHandledProperty" description="Applied to an element's property to indicate that select, update, and insert of the property's value are handled automatically by the platform." appliesTo="AnyProperty">
        <ECProperty propertyName="StatementTypes" typeName="AutoHandledPropertyStatementType"/>
    </ECCustomAttributeClass>

    <!-- ////////////////////////////////////////////////////////////////////////////// -->
    <!-- // BIS-related core classes -->
    <!-- ////////////////////////////////////////////////////////////////////////////// -->

    <ECEntityClass typeName="CodeSpec" modifier="Sealed">
        <!-- determines element codes -->
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <MapStrategy>TablePerHierarchy</MapStrategy>
                <ECInstanceIdColumn>Id</ECInstanceIdColumn>
            </ClassMap>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="Name" typeName="string" description="Name of CodeSpec">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <Collation>NoCase</Collation>
                    <IsNullable>False</IsNullable>
                    <IsUnique>True</IsUnique>
                </PropertyMap>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Properties" typeName="string" description="Json string containing properties like URI"/>
    </ECEntityClass>

    <ECRelationshipClass typeName="CodeSpecDeterminesElementCode" strength="referencing" modifier="Sealed">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(1..1)" roleLabel="determines codes for" polymorphic="true">
            <Class class="CodeSpec"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="code is determined by" polymorphic="true">
            <Class class="Element"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="Model" modifier="Abstract">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00">
                <Restrictions>
                    <string>Clone</string><!-- It is never permitted to clone a model without its handler -->
                </Restrictions>
            </ClassHasHandler>
            <ClassMap xmlns="ECDbMap.02.00">
                <ECInstanceIdColumn>Id</ECInstanceIdColumn>
                <MapStrategy>TablePerHierarchy</MapStrategy>
            </ClassMap>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>8</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="ModeledElement" relationshipName="ModelModelsElement" direction="Forward">
        </ECNavigationProperty>
        <ECProperty propertyName="Properties" typeName="string">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Visibility" typeName="int">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="IsTemplate" typeName="boolean">
        </ECProperty>
    </ECEntityClass>
    <ECEntityClass typeName="GeometricModel" modifier="Abstract">
        <BaseClass>Model</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="GeometricModel3d" modifier="Abstract">
        <BaseClass>GeometricModel</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="GeometricModel2d" modifier="Abstract">
        <BaseClass>GeometricModel</BaseClass>
        <ECProperty propertyName="GlobalOrigin" displayLabel="Global Origin" typeName="point2d"/>
    </ECEntityClass>
    <ECEntityClass typeName="GraphicalModel2d" modifier="Abstract">
        <BaseClass>GeometricModel2d</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialModel" displayLabel="Spatial Model" modifier="Abstract">
        <BaseClass>GeometricModel3d</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="PhysicalModel" displayLabel="Physical Model">
        <BaseClass>SpatialModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialLocationModel" displayLabel="Spatial Location Model">
        <BaseClass>SpatialModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="DrawingModel" displayLabel="Drawing Model">
        <BaseClass>GraphicalModel2d</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SectionDrawingModel" displayLabel="Section Drawing Model">
        <BaseClass>DrawingModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SheetModel" displayLabel="Sheet Model">
        <BaseClass>GraphicalModel2d</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="RoleModel" displayLabel="Role Model">
        <BaseClass>Model</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="InformationModel" displayLabel="Information Model" modifier="Abstract">
        <BaseClass>Model</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="GroupInformationModel" displayLabel="Group Information Model" modifier="Abstract">
        <BaseClass>InformationModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="DefinitionModel" displayLabel="Definition Model">
        <BaseClass>InformationModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="RepositoryModel" displayLabel="Repository Model" modifier="Sealed">
        <BaseClass>DefinitionModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="DocumentListModel" displayLabel="Document List">
        <BaseClass>InformationModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="LinkModel" displayLabel="Link Model">
        <BaseClass>InformationModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="DictionaryModel" displayLabel="Dictionary Model" modifier="Sealed">
        <BaseClass>DefinitionModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SessionModel" displayLabel="Session Model" modifier="Sealed">
        <BaseClass>DefinitionModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="WebMercatorModel" displayLabel="Web Mercator Model">
        <BaseClass>SpatialModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="StreetMapModel" displayLabel="Street Map Model">
        <BaseClass>WebMercatorModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECRelationshipClass typeName="ModelContainsElements" description="Associates elements with a model" strength="embedding" modifier="Sealed">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(1..1)" roleLabel="contains" polymorphic="true">
            <Class class="Model"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is contained by" polymorphic="true">
            <Class class="Element" />
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="IModellableElement" modifier="Abstract">
        <!-- Interface implemented by Elements that can be modeled (by a "sub" Model) -->
        <!-- Mutually exclusive with IParentElement -->
        <!-- WIP: Need to mark interface as only valid for Elements -->
    </ECEntityClass>
    <ECRelationshipClass typeName="ModelModelsElement" strength="embedding" strengthDirection="Backward" modifier="None">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(0..1)" roleLabel="models" polymorphic="true">
            <Class class="Model"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is modeled by" polymorphic="true">
            <Class class="Element" />
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="PhysicalModelBreaksDownPhysicalElement" strength="embedding" strengthDirection="Backward" modifier="None">
        <BaseClass>ModelModelsElement</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="breaks down" polymorphic="true">
            <Class class="PhysicalModel"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is broken down by" polymorphic="true">
            <Class class="PhysicalElement" />
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="DrawingModelBreaksDownDrawing" strength="embedding" strengthDirection="Backward" modifier="None">
        <BaseClass>ModelModelsElement</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="breaks down" polymorphic="true">
            <Class class="DrawingModel"/>
        </Source>
        <Target multiplicity="(1..1)" roleLabel="is broken down by" polymorphic="true">
            <Class class="Drawing" />
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="SheetModelBreaksDownSheet" strength="embedding" strengthDirection="Backward" modifier="None">
        <BaseClass>ModelModelsElement</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="breaks down" polymorphic="true">
            <Class class="SheetModel"/>
        </Source>
        <Target multiplicity="(1..1)" roleLabel="is broken down by" polymorphic="true">
            <Class class="Sheet" />
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="Element" modifier="Abstract">
        <!-- NOTE: Only platform can directly subclass from Element. Everyone else should pick the most appropriate superclass. -->
        <!-- NOTE: Element subclasses should drop the "Element" suffix from their name once the concept becomes "user facing" -->
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <MapStrategy>TablePerHierarchy</MapStrategy>
                <ECInstanceIdColumn>Id</ECInstanceIdColumn>
            </ClassMap>
            <DbIndexList xmlns="ECDbMap.02.00">
                <Indexes>
                    <DbIndex>
                        <Name>ix_bis_Element_FederationGuid</Name>
                        <IsUnique>True</IsUnique>
                        <Properties>
                            <string>FederationGuid</string>
                        </Properties>
                        <Where>IndexedColumnsAreNotNull</Where>
                    </DbIndex>
                    <DbIndex>
                        <Name>ix_bis_Element_Code</Name>
                        <IsUnique>True</IsUnique>
                        <Properties>
                            <string>CodeSpec.Id</string>
                            <string>CodeScope</string>
                            <string>CodeValue</string>
                        </Properties>
                    </DbIndex>
                    <DbIndex>
                        <Name>ix_bis_Element_UserLabel</Name>
                        <IsUnique>False</IsUnique>
                        <Properties>
                            <string>UserLabel</string>
                        </Properties>
                        <Where>IndexedColumnsAreNotNull</Where>
                    </DbIndex>
                </Indexes>
            </DbIndexList>
            <ClassHasCurrentTimeStampProperty xmlns="CoreCustomAttributes.01.00">
                <PropertyName>LastMod</PropertyName>
            </ClassHasCurrentTimeStampProperty>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="FederationGuid" typeName="binary">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable>
                    <IsUnique>True</IsUnique>
                </PropertyMap>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
        <ECNavigationProperty propertyName="CodeSpec" relationshipName="CodeSpecDeterminesElementCode" direction="Backward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECNavigationProperty>
        <ECProperty propertyName="CodeScope" typeName="string">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>False</IsNullable>
                    <Collation>NoCase</Collation>
                    <IsUnique>False</IsUnique>
                </PropertyMap>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="CodeValue" displayLabel="Code" typeName="string">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable>
                    <Collation>NoCase</Collation>
                    <IsUnique>False</IsUnique>
                </PropertyMap>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECProperty>
        <ECNavigationProperty propertyName="Model" relationshipName="ModelContainsElements" direction="Backward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty>
                    <StatementTypes>2</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECNavigationProperty>
        <ECNavigationProperty propertyName="Parent" relationshipName="ElementOwnsChildElements" direction="Backward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECNavigationProperty> 
        <ECProperty propertyName="UserLabel" typeName="string">
            <!-- The "name" given by the User vs. the official "name" which is the CodeValue -->
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable>
                    <Collation>NoCase</Collation>
                    <IsUnique>False</IsUnique>
                </PropertyMap>
                <CustomHandledProperty>
                    <StatementTypes>6</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="UserProperties" typeName="string" extendedTypeName="AdHocJson">
            <ECCustomAttributes>
                <CustomHandledProperty>
                    <StatementTypes>0</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="LastMod"  displayLabel="Last Modified" typeName="dateTime">
            <ECCustomAttributes>
                <DateTimeInfo xmlns="CoreCustomAttributes.01.00">
                    <DateTimeKind>Utc</DateTimeKind>
                </DateTimeInfo>
                <CustomHandledProperty>
                    <StatementTypes>0</StatementTypes>
                </CustomHandledProperty>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="InformationContentElement" modifier="Abstract">
        <BaseClass>Element</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <JoinedTablePerDirectSubclass xmlns="ECDbMap.02.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="DefinitionElement" modifier="Abstract">
        <BaseClass>InformationContentElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="PhysicalTemplate" modifier="Abstract">
        <BaseClass>DefinitionElement</BaseClass>
        <BaseClass>IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="PhysicalType" modifier="Abstract">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="PhysicalElementIsOfType" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="is of" polymorphic="true">
            <Class class="PhysicalElement" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="defines" polymorphic="true">
            <Class class="PhysicalType"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="GraphicalType2d" modifier="Abstract">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="GraphicalElement2dIsOfType" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="is of" polymorphic="true">
            <Class class="GraphicalElement2d" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="defines" polymorphic="true">
            <Class class="GraphicalType2d"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="InformationPartitionElement" modifier="Abstract">
        <BaseClass>InformationContentElement</BaseClass>
        <BaseClass>IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>8</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string"/>
    </ECEntityClass>
    <ECEntityClass typeName="DefinitionPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="DocumentPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="GroupInformationPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="LinkPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="PhysicalPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialLocationPartition" modifier="Sealed">
        <BaseClass>InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="InformationReferenceElement" modifier="Abstract">
        <BaseClass>InformationContentElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="GroupInformationElement" modifier="Abstract">
        <BaseClass>InformationReferenceElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="Subject" modifier="Sealed">
        <BaseClass>InformationReferenceElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string"/>
    </ECEntityClass>

    <ECEntityClass typeName="LinkElement" modifier="Abstract">
        <BaseClass>InformationReferenceElement</BaseClass>
    </ECEntityClass>
    
    <ECEntityClass typeName="UrlLink">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
            <DbIndexList xmlns="ECDbMap.02.00">
                <Indexes>
                    <DbIndex>
                        <Name>ix_bis_UrlLink_Url</Name>
                        <IsUnique>False</IsUnique>
                        <Properties>
                            <string>Url</string>
                        </Properties>
                    </DbIndex>
                </Indexes>
            </DbIndexList>
        </ECCustomAttributes>
        <BaseClass>LinkElement</BaseClass>
        <ECProperty propertyName="Url" displayLabel="URL" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="RepositoryLink" modifier="Sealed">
        <BaseClass>UrlLink</BaseClass>
        <BaseClass>IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="RepositoryGuid" typeName="binary">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="EmbeddedFileLink">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
            <DbIndexList xmlns="ECDbMap.02.00">
                <Indexes>
                    <DbIndex>
                        <Name>ix_bis_EmbeddedFileLink_Name</Name>
                        <IsUnique>False</IsUnique>
                        <Properties>
                            <string>Name</string>
                        </Properties>
                    </DbIndex>
                </Indexes>
            </DbIndexList>
        </ECCustomAttributes>
        <BaseClass>LinkElement</BaseClass>
        <ECProperty propertyName="Name" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="Document" modifier="Abstract">
        <BaseClass>InformationContentElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="Drawing">
        <BaseClass>Document</BaseClass>
        <BaseClass>IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SectionDrawing">
        <BaseClass>Drawing</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SheetBorderTemplate">
        <BaseClass>Document</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="Height" typeName="double"/>
        <ECProperty propertyName="Width" typeName="double"/>
    </ECEntityClass>

    <ECEntityClass typeName="SheetBorder">
        <BaseClass>DrawingGraphic</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <!-- Template is required -->
        <!-- Should have IsNullable=False ...? -->
        <ECNavigationProperty propertyName="BorderTemplate" relationshipName="SheetBorderHasSheetBorderTemplate" direction="Forward" />
    </ECEntityClass>

    <ECEntityClass typeName="SheetTemplate">
        <BaseClass>Document</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <!-- Height and Width will be locked to the border, if there is one -->
        <ECProperty propertyName="Height" typeName="double"/>
        <ECProperty propertyName="Width" typeName="double"/>
        <!-- Border is optional -->
        <ECNavigationProperty propertyName="Border" relationshipName="SheetTemplateHasSheetBorder" direction="Forward" />
    </ECEntityClass>

    <ECEntityClass typeName="Sheet">
        <BaseClass>Document</BaseClass>
        <BaseClass>IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="Scale" typeName="double"/>
        <!-- Height and Width will be locked to the template, if there is one -->
        <ECProperty propertyName="Height" typeName="double"/>
        <ECProperty propertyName="Width" typeName="double"/>
        <!-- Template is optional -->
        <ECNavigationProperty propertyName="SheetTemplate" relationshipName="SheetHasSheetTemplate" direction="Forward" />
    </ECEntityClass>

    <ECRelationshipClass typeName="SheetHasSheetTemplate" strength="referencing" modifier="Sealed">
        <Source multiplicity="(0..*)" roleLabel="has" polymorphic="true">
            <Class class="Sheet" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="defines" polymorphic="true">
            <Class class="SheetTemplate"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="SheetTemplateHasSheetBorder" strength="referencing" modifier="Sealed">
        <Source multiplicity="(0..*)" roleLabel="has" polymorphic="true">
            <Class class="SheetTemplate" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is referenced by" polymorphic="true">
            <Class class="SheetBorder"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="SheetBorderHasSheetBorderTemplate" strength="referencing" modifier="Sealed">
        <Source multiplicity="(0..*)" roleLabel="has" polymorphic="true">
            <Class class="SheetBorder" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="defines" polymorphic="true">
            <Class class="SheetBorderTemplate"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="InformationCarrierElement" modifier="Abstract">
        <!-- Proxy for information carriers in the physical world.  For example, printed copies of documents or electronic files -->
        <BaseClass>Element</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <JoinedTablePerDirectSubclass xmlns="ECDbMap.02.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="DocumentCarrier" modifier="Abstract">
        <BaseClass>InformationCarrierElement</BaseClass>
        <ECCustomAttributes>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="GeometricElement" modifier="Abstract">
        <BaseClass>Element</BaseClass>
        <ECCustomAttributes>
            <JoinedTablePerDirectSubclass xmlns="ECDbMap.02.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="GeometricElement3d" modifier="Abstract">
        <!-- Base class for elements with 3d geometry -->
        <!-- GeometricElement3d elements are not inherently spatially located, but can be spatially located. -->
        <BaseClass>GeometricElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="Category" relationshipName="GeometricElement3dIsInCategory" direction="Forward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECNavigationProperty>
        <ECProperty propertyName="GeometryStream" typeName="binary">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="InSpatialIndex" typeName="boolean">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Origin" typeName="point3d">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Yaw" typeName="double">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Pitch" typeName="double">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Roll" typeName="double">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxLow" typeName="point3d">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxHigh" typeName="point3d">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>
    <ECEntityClass typeName="GraphicalElement3d" modifier="Abstract">
        <!-- 3D geometric element that is used to convey information within 3D graphical presentations. -->
        <BaseClass>GeometricElement3d</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialElement" modifier="Abstract">
        <!-- An element that occupies real world space -->
        <BaseClass>GeometricElement3d</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="PhysicalElement" modifier="Abstract">
        <!-- A SpatialElement that has mass and can be "touched" -->
        <BaseClass>SpatialElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="PhysicalType" relationshipName="PhysicalElementIsOfType" direction="Forward">
        </ECNavigationProperty>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialLocationElement" modifier="Abstract">
        <!-- A SpatialElement that identifies a "tracked" real world location but has no mass and cannot be "touched" -->
        <BaseClass>SpatialElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="VolumeElement">
        <!-- A SpatialLocationElement that defines a volume -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>SpatialLocationElement</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="GeometricElement2d" modifier="Abstract">
        <!-- Base class for elements with 2d geometry -->
        <BaseClass>GeometricElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>8</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="Category" relationshipName="GeometricElement2dIsInCategory" direction="Forward">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECNavigationProperty>
        <ECProperty propertyName="GeometryStream" typeName="binary">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Origin" typeName="point2d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Rotation" typeName="double">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxLow" typeName="point2d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxHigh" typeName="point2d">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>
    <ECEntityClass typeName="GraphicalElement2d" modifier="Abstract">
        <!-- 2D geometric element that is used to convey information within graphical presentations (like drawings). -->
        <BaseClass>GeometricElement2d</BaseClass>
        <ECNavigationProperty propertyName="GraphicalType" relationshipName="GraphicalElement2dIsOfType" direction="Forward">
        </ECNavigationProperty>
    </ECEntityClass>
    <ECEntityClass typeName="AnnotationElement2d">
        <!-- 2D element used to annotate drawings and sheets -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>GraphicalElement2d</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="DrawingGraphic">
        <!-- 2D element used in drawings -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>GraphicalElement2d</BaseClass>
    </ECEntityClass>

    <!-- Text element data (shared by 2D and 3D) -->
    <ECEntityClass typeName="TextAnnotationData">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>ElementUniqueAspect</BaseClass>
        <ECProperty propertyName="TextAnnotation" typeName="binary">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <!-- 2D text element -->
    <ECEntityClass typeName="TextAnnotation2d">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>AnnotationElement2d</BaseClass>
    </ECEntityClass>
    <ECRelationshipClass typeName="TextAnnotation2dOwnsTextAnnotationData" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsUniqueAspect</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="true">
            <Class class="TextAnnotation2d"/>
        </Source>
        <Target multiplicity="(0..1)" polymorphic="false">
            <Class class="TextAnnotationData"/>
        </Target>
    </ECRelationshipClass>
    
    <!-- 3D text element -->
    <ECEntityClass typeName="TextAnnotation3d">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>GraphicalElement3d</BaseClass>
    </ECEntityClass>
    <ECRelationshipClass typeName="TextAnnotation3dOwnsTextAnnotationData" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsUniqueAspect</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="true">
            <Class class="TextAnnotation3d"/>
        </Source>
        <Target multiplicity="(0..1)" polymorphic="false">
            <Class class="TextAnnotationData"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTable">
        <!-- An AnnotationTable is an annotation element that displays a grid containing text and or graphics -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>AnnotationElement2d</BaseClass>
    </ECEntityClass>

    <ECEntityClass typeName="AnnotationTableHeader">
        <!-- The aspect that holds the header properties for an AnnotationTable -->
        <BaseClass>ElementUniqueAspect</BaseClass>
        <ECProperty propertyName="RowCount" typeName="int"/>
        <ECProperty propertyName="ColumnCount" typeName="int"/>
        <ECProperty propertyName="TextStyleId" typeName="long"/>
        <ECProperty propertyName="TitleRowCount" typeName="int"/>
        <ECProperty propertyName="HeaderRowCount" typeName="int"/>
        <ECProperty propertyName="FooterRowCount" typeName="int"/>
        <ECProperty propertyName="HeaderColumnCount" typeName="int"/>
        <ECProperty propertyName="FooterColumnCount" typeName="int"/>
        <ECProperty propertyName="BreakType" typeName="int"/>
        <ECProperty propertyName="BreakPosition" typeName="int"/>
        <ECProperty propertyName="BreakLength" typeName="double"/>
        <ECProperty propertyName="BreakGap" typeName="double"/>
        <ECProperty propertyName="RepeatHeaders" typeName="boolean"/>
        <ECProperty propertyName="RepeatFooters" typeName="boolean"/>
        <ECProperty propertyName="DefaultColumnWidth" typeName="double"/>
        <ECProperty propertyName="DefaultRowHeight" typeName="double"/>
        <ECProperty propertyName="DefaultMarginTop" typeName="double"/>
        <ECProperty propertyName="DefaultMarginBottom" typeName="double"/>
        <ECProperty propertyName="DefaultMarginLeft" typeName="double"/>
        <ECProperty propertyName="DefaultMarginRight" typeName="double"/>
        <ECProperty propertyName="DefaultCellAlignment" typeName="int"/>
        <ECProperty propertyName="DefaultCellOrientation" typeName="int"/>
        <ECProperty propertyName="FillSymbologyKeyOddRow" typeName="int"/>
        <ECProperty propertyName="FillSymbologyKeyEvenRow" typeName="int"/>
        <ECProperty propertyName="TitleRowTextStyle" typeName="long"/>
        <ECProperty propertyName="HeaderRowTextStyle" typeName="long"/>
        <ECProperty propertyName="FooterRowTextStyle" typeName="long"/>
        <ECProperty propertyName="HeaderColumnTextStyle" typeName="long"/>
        <ECProperty propertyName="FooterColumnTextStyle" typeName="long"/>
        <ECProperty propertyName="BackupTextHeight" typeName="double"/>
        <ECProperty propertyName="DataSourceProviderId" typeName="long"/>
        <ECProperty propertyName="BodyTextHeight" typeName="double"/>
        <ECProperty propertyName="TitleRowTextHeight" typeName="double"/>
        <ECProperty propertyName="HeaderRowTextHeight" typeName="double"/>
        <ECProperty propertyName="FooterRowTextHeight" typeName="double"/>
        <ECProperty propertyName="HeaderColumnTextHeight" typeName="double"/>
        <ECProperty propertyName="FooterColumnTextHeight" typeName="double"/>
        <ECProperty propertyName="TextSymbKey" typeName="int"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsHeader" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsUniqueAspect</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..1)" polymorphic="false">
            <Class class="AnnotationTableHeader"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTableRow">
        <!-- The aspect that holds properties of a row of an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECProperty propertyName="RowIndex" typeName="int"/>
        <ECProperty propertyName="HeightLock" typeName="boolean"/>
        <ECProperty propertyName="Height" typeName="double"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsRows" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableRow"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTableColumn">
        <!-- The aspect that holds properties of a column of an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECProperty propertyName="ColumnIndex" typeName="int"/>
        <ECProperty propertyName="WidthLock" typeName="boolean"/>
        <ECProperty propertyName="Width" typeName="double"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsColumns" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableColumn"/>
        </Target>
    </ECRelationshipClass>

    <ECStructClass typeName="AnnotationTableCellIndex">
        <ECProperty propertyName="RowIndex" typeName="int"/>
        <ECProperty propertyName="ColumnIndex" typeName="int"/>
    </ECStructClass>

    <ECEntityClass typeName="AnnotationTableCell">
        <!-- The aspect that holds properties of a cell of an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECStructProperty propertyName="CellIndex" typeName="AnnotationTableCellIndex"/>
        <ECProperty propertyName="TextBlock" typeName="binary">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="FillKey" typeName="int"/>
        <ECProperty propertyName="Alignment" typeName="int"/>
        <ECProperty propertyName="Orientation" typeName="int"/>
        <ECProperty propertyName="MarginTop" typeName="double"/>
        <ECProperty propertyName="MarginBottom" typeName="double"/>
        <ECProperty propertyName="MarginLeft" typeName="double"/>
        <ECProperty propertyName="MarginRight" typeName="double"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsCells" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableCell"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTableMerge">
        <!-- The aspect that holds properties describing merging of cells in an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECStructProperty propertyName="RootCell" typeName="AnnotationTableCellIndex"/>
        <ECProperty propertyName="RowSpan" typeName="int"/>
        <ECProperty propertyName="ColumnSpan" typeName="int"/>
    </ECEntityClass>

    <ECRelationshipClass typeName="AnnotationTableOwnsMerges" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableMerge"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTableSymbology">
        <!-- The aspect that holds properties describing symbology in an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECProperty propertyName="SymbologyKey" typeName="int"/>
        <ECProperty propertyName="Visible" typeName="boolean"/>
        <ECProperty propertyName="Color" typeName="int"/>
        <ECProperty propertyName="Weight" typeName="int"/>
        <ECProperty propertyName="LineStyleId" typeName="long"/>
        <ECProperty propertyName="LineStyleScale" typeName="double"/>
        <ECProperty propertyName="FillColor" typeName="int"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsSymbologies" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableSymbology"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="AnnotationTableEdgeRun">
        <!-- The aspect that holds properties describing edges in an AnnotationTable -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECProperty propertyName="HostType" typeName="int"/>
        <ECProperty propertyName="Host" typeName="int"/>
        <ECProperty propertyName="Start" typeName="int"/>
        <ECProperty propertyName="Span" typeName="int"/>
        <ECProperty propertyName="SymbologyKey" typeName="int"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="AnnotationTableOwnsEdgeRuns" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="false">
            <Class class="AnnotationTable"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="AnnotationTableEdgeRun"/>
        </Target>
    </ECRelationshipClass>

    <!--
    <ECEntityClass typeName="DimensionStyle">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="TextStyleId" typeName="long">
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="LinearDimension">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="StyleId" typeName="long">
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Points" typeName="binary" description="Location of dimension points">
          <ECCustomAttributes>
            <CustomHandledProperty/>
          </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="LinearDimension2d">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>AnnotationElement2d</BaseClass>
        <BaseClass>LinearDimension</BaseClass>
    </ECEntityClass>

    <ECEntityClass typeName="LinearDimension3d">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>GraphicalElement3d</BaseClass>
        <BaseClass>LinearDimension</BaseClass>
    </ECEntityClass>
    -->

    <ECEntityClass typeName="Session" modifier="Sealed">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="Variables" typeName="string" />
    </ECEntityClass>

    <ECEntityClass typeName="ViewAttachment">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>GraphicalElement2d</BaseClass>
        <ECNavigationProperty propertyName="View" relationshipName="ViewIsAttached" direction="Backward" description="The view that is to be attached" />
        <ECProperty propertyName="Details" typeName="string" />
        <ECProperty propertyName="DisplayPriority" typeName="int" />
        <ECProperty propertyName="Scale" typeName="double" />
    </ECEntityClass>

    <ECRelationshipClass typeName="ViewIsAttached" strength="embedding" modifier="Sealed">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(1..1)" roleLabel="owns" polymorphic="true">
            <Class class="ViewDefinition"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is owned by" polymorphic="true">
            <Class class="ViewAttachment" />
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="IParentElement" modifier="Abstract">
        <!-- Interface implemented by Elements that can composite/own child elements -->
        <!-- Mutually exclusive with IModellableElement -->
        <!-- WIP: Need to mark interface as only valid for Elements -->
    </ECEntityClass>
    <ECRelationshipClass typeName="ElementOwnsChildElements" strength="embedding" modifier="None">
        <!-- WIP: Should be abstract? -->
        <!-- WIP: Rename to ElementCompositesElements? -->
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <!-- The Element API will handle cascading the delete -->
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(0..1)" roleLabel="owns child" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is owned by parent" polymorphic="true">
            <Class class="Element"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="ElementEncapsulatesElements" strength="embedding" modifier="None">
        <!-- Relationship that indicates that child elements are "hidden" -->
        <BaseClass>ElementOwnsChildElements</BaseClass>
        <Source multiplicity="(0..1)" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="true">
            <Class class="Element"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="PhysicalElementAssemblesElements" strength="embedding" modifier="None">
        <!-- Relationship that indicates a physical assembly of child PhysicalElements -->
        <BaseClass>ElementOwnsChildElements</BaseClass>
        <Source multiplicity="(0..1)" polymorphic="true">
            <Class class="PhysicalElement"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="true">
            <Class class="PhysicalElement"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ElementGroupsMembers" strength="referencing" modifier="None">
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <ECInstanceIdColumn>Id</ECInstanceIdColumn>
            </ClassMap>
            <LinkTableRelationshipMap xmlns="ECDbMap.02.00">
                <SourceECInstanceIdColumn>GroupId</SourceECInstanceIdColumn>
                <TargetECInstanceIdColumn>MemberId</TargetECInstanceIdColumn>
            </LinkTableRelationshipMap>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="groups" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is grouped by" polymorphic="true">
            <Class class="Element"/>
        </Target>
        <ECProperty propertyName="MemberPriority" typeName="int">
            <!-- Can be used to prioritize or order members within an ElementGroup. Values do not have to be unique within a particular group. -->
        </ECProperty>
    </ECRelationshipClass>

    <ECEntityClass typeName="ElementAspect" modifier="Abstract">
        <!-- An ElementAspect is related to an Element with a relationship of strength="embedding" (ElementAspect is deleted if the Element is deleted) -->
        <!-- Semantically, an ElementAspect can be considered part of the Element -->
        <!-- BIS Guideline: Subclass ElementUniqueAspect or ElementMultiAspect rather than subclassing ElementAspect directly. -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="ElementUniqueAspect" modifier="Abstract">
        <!-- An ElementUniqueAspect is related to an Element with the following constraints: 1) there can only be one instance of a given aspect class associated with a given element, and 2) the instance has the same ID as the element. -->
        <BaseClass>ElementAspect</BaseClass>
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <!-- All subclasses of ElementUniqueAspect will share the same table -->
                <MapStrategy>TablePerHierarchy</MapStrategy>
            </ClassMap>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="Element" relationshipName="ElementOwnsUniqueAspect" direction="Backward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECNavigationProperty>
    </ECEntityClass>
    <ECRelationshipClass typeName="ElementOwnsUniqueAspect" strength="embedding" modifier="None">
        <Source multiplicity="(1..1)" roleLabel="owns" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is owned by" polymorphic="true">
            <!-- Note: multiplicity=(0..*) is correct. While an Element can only have 1 unique apsect per aspect class, it can have N unique aspects total. -->
            <Class class="ElementUniqueAspect"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="ElementMultiAspect" modifier="Abstract">
        <!-- An ElementMultiAspect is related to an Element with the following constraints: 1) there can be N instances of a given aspect class associated with a given element, and 2) the value of the ElementId foreign key column is the same ID as the element. -->
        <BaseClass>ElementAspect</BaseClass>
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <!-- All subclasses of ElementUniqueAspect will share the same table -->
                <MapStrategy>TablePerHierarchy</MapStrategy>
            </ClassMap>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>16</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="Element" relationshipName="ElementOwnsMultiAspects" direction="Backward">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECNavigationProperty>
    </ECEntityClass>
    <ECRelationshipClass typeName="ElementOwnsMultiAspects" strength="embedding" modifier="None">
        <Source multiplicity="(1..1)" roleLabel="owns" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is owned by" polymorphic="true">
            <Class class="ElementMultiAspect"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="ElementExternalKey">
        <!-- The aspect that holds an identifier from an external system -->
        <BaseClass>ElementMultiAspect</BaseClass>
        <ECCustomAttributes>
            <DbIndexList xmlns="ECDbMap.02.00">
                <Indexes>
                    <DbIndex>
                        <Name>ix_bis_ElementExternalKey_ElementId_CodeSpecId</Name>
                        <IsUnique>True</IsUnique>
                        <Properties>
                            Only one ExternalKey per CodeSpec per Element
                            <string>Element.Id</string>
                            <string>CodeSpecId</string>
                        </Properties>
                    </DbIndex>
                    <DbIndex>
                        <!-- Index for looking up Element by ExternalKey -->
                        <!-- IsUnique=False to support ExternalKeys for types (multiple Elements have same ExternalKey) -->
                        <Name>ix_bis_ElementExternalKey_CodeSpecId_ExternalKey</Name>
                        <IsUnique>False</IsUnique>
                        <Properties>
                            <string>CodeSpecId</string>
                            <string>ExternalKey</string>
                        </Properties>
                    </DbIndex>
                </Indexes>
            </DbIndexList>
        </ECCustomAttributes>
        <ECProperty propertyName="CodeSpecId" typeName="long">
            <!-- WIP: Foreign key relationship to CodeSpec that controls the ExternalKey -->
            <!-- IsNullable = False -->
        </ECProperty>
        <ECProperty propertyName="ExternalKey" typeName="string">
            <!-- IsNullable = False -->
        </ECProperty>
    </ECEntityClass>
    <ECRelationshipClass typeName="ElementOwnsExternalKeys" strength="embedding" modifier="None">
        <BaseClass>ElementOwnsMultiAspects</BaseClass>
        <Source multiplicity="(1..1)" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="true">
            <Class class="ElementExternalKey"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ElementRefersToElements" strength="referencing" modifier="Abstract">
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <ECInstanceIdColumn>Id</ECInstanceIdColumn>
                <MapStrategy>TablePerHierarchy</MapStrategy>
            </ClassMap>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>8</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="refers to" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is referenced by" polymorphic="true">
            <Class class="Element"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ElementDrivesElement" strength="referencing" modifier="None">
        <!-- WIP: Rename to ElementDriveElements? -->
        <!-- Relationship that indicates that an Element drives (controls the lifecyle or structure of) a dependent Element -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <ClassMap xmlns="ECDbMap.02.00">
                <!-- We must insist that all instances of all possible subclasses are stored together in a single table. 
                     TxnManager knows about this table, and expects to find all instances this kind of relationship there. -->
                <MapStrategy>TablePerHierarchy</MapStrategy>
                <!-- WIP: MinimumSharedColumnCount? -->
            </ClassMap>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>8</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
            <LinkTableRelationshipMap xmlns="ECDbMap.02.00">
                <AllowDuplicateRelationships>True</AllowDuplicateRelationships>
            </LinkTableRelationshipMap>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="drives" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is driven by" polymorphic="true">
            <Class class="Element"/>
        </Target>
        <ECProperty propertyName="Status" typeName="int" description="Bits that indicate the status of the dependency. Satisfied=0, Failed=1, Deferred=128. Deferred and Failed bits can be OR'd together."/>
        <ECProperty propertyName="Priority" typeName="int" description="The priority of this dependency, relative to other EntityDrivesEntity instances. Note that EntityHasChildEntities dependencies always take priority over EntityDrivesEntity dependencies."/>
    </ECRelationshipClass>

    <ECEntityClass typeName="Category" modifier="Abstract">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" DisplayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Rank" typeName="int">
            <ECCustomAttributes>
                <HideProperty xmlns="EditorCustomAttributes.01.03"/>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>
    <ECEntityClass typeName="DrawingCategory" modifier="Sealed">
        <!-- Category that only applies to drawing elements (2d) -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>Category</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="SpatialCategory" modifier="Sealed">
        <!-- Category that only applies to SpatialElements (3d) -->
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>Category</BaseClass>
    </ECEntityClass>
    <ECEntityClass typeName="SubCategory" modifier="Sealed">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Properties" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECRelationshipClass typeName="GeometricElement2dIsInCategory" description="Element is in Category" strength="referencing" strengthDirection="Backward" modifier="Sealed">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="is in" polymorphic="true">
            <Class class="GeometricElement2d" />
        </Source>
        <Target multiplicity="(1..1)" roleLabel="categorizes" polymorphic="false">
            <Class class="DrawingCategory"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="GeometricElement3dIsInCategory" description="Element is in Category" strength="referencing" strengthDirection="Backward" modifier="Sealed">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="is in" polymorphic="true">
            <Class class="GeometricElement3d" />
        </Source>
        <Target multiplicity="(1..1)" roleLabel="categorizes" polymorphic="false">
            <Class class="SpatialCategory"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="TrueColor">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Data" typeName="int">
          <ECCustomAttributes>
              <CustomHandledProperty>
                  <StatementTypes>3</StatementTypes>
              </CustomHandledProperty>
          </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="MaterialElement">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="AnnotationTextStyle">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string" description="Description of the style">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="binary" description="Encoded style properties">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="AnnotationFrameStyle">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string" description="Description of the style">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="binary" description="Encoded style properties">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="AnnotationLeaderStyle">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string" description="Description of the style">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="binary" description="Encoded style properties">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="TextAnnotationSeed">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string" description="Description of the style">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="binary" description="Encoded style properties">
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="LineStyle">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string" description="Description of the style" />
        <ECProperty propertyName="Data" typeName="string" description="Encoded style properties" />
    </ECEntityClass>

    <ECEntityClass typeName="Texture">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Data" typeName="binary" description="Encoded texture data">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable><!-- actually False, but shared table... -->
                </PropertyMap>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Format" typeName="int" description="Format of the encoded texture data">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable><!-- actually False, but shared table... -->
                </PropertyMap>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Width" typeName="int" displayLabel="Width">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable><!-- actually False, but shared table... -->
                </PropertyMap>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Height" typeName="int" displayLabel="Height">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable><!-- actually False, but shared table... -->
                </PropertyMap>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Flags" typeName="int">
            <ECCustomAttributes>
                <PropertyMap xmlns="ECDbMap.02.00">
                    <IsNullable>True</IsNullable><!-- actually False, but shared table... -->
                </PropertyMap>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="LightDefinition">
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <BaseClass>DefinitionElement</BaseClass>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Value" typeName="string">
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECRelationshipClass typeName="BaseModelForView2d" strength="embedding" modifier="None">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00">
                <OnDeleteAction>NoAction</OnDeleteAction>
            </ForeignKeyConstraint>
        </ECCustomAttributes>
        <Source multiplicity="(1..1)" roleLabel="is base model for" polymorphic="true">
            <Class class="GeometricModel2d"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="has base" polymorphic="true">
            <Class class="ViewDefinition2d"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="ViewDefinition3dUsesModelSelector" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="uses" polymorphic="true">
            <Class class="ViewDefinition3d"/>
        </Source>
        <Target multiplicity="(1..1)" roleLabel="is used by" polymorphic="true">
            <Class class="ModelSelector"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ViewDefinition3dUsesClipVolume" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="uses" polymorphic="true">
            <Class class="ViewDefinition3d"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is used by" polymorphic="true">
            <Class class="ClipVolumeDefinition"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ViewDefinitionUsesCategorySelector" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="uses" polymorphic="true">
            <Class class="ViewDefinition"/>
        </Source>
        <Target multiplicity="(1..1)" roleLabel="is used by" polymorphic="true">
            <Class class="CategorySelector"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ViewDefinitionUsesDisplayStyle" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="uses" polymorphic="true">
            <Class class="ViewDefinition"/>
        </Source>
        <Target multiplicity="(1..1)" roleLabel="is used by" polymorphic="true">
            <Class class="DisplayStyle"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="CategorySelectorRefersToCategories" strength="referencing" modifier="None">
        <BaseClass>ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="refers to" polymorphic="true">
            <Class class="CategorySelector"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is referenced by" polymorphic="true">
            <Class class="Category"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="ModelSelectorRefersToModels" strength="referencing" modifier="None">
        <Source multiplicity="(0..*)" roleLabel="refers to" polymorphic="true">
            <Class class="ModelSelector"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is referenced by" polymorphic="true">
            <Class class="Model"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="ModelSelector">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <!-- Note: The Models in the selector are actually captured by the 1:N ModelSelectorRefersToModels ECRelationship -->
    </ECEntityClass>

    <ECEntityClass typeName="CategorySelector">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <!-- Note: The Categories in the selector are actually captured by the 1:N ECRelationship CategorySelectorRefersToCategories -->
    </ECEntityClass>

    <ECEntityClass typeName="DisplayStyle">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECProperty propertyName="Styles" typeName="string" >
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="DisplayStyle3d">
        <BaseClass>DisplayStyle</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="ClipVolumeDefinition">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="ClipPlaneSet" typeName="string"/>
    </ECEntityClass>
  
    <ECEntityClass typeName="ViewDefinition" modifier="Abstract">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECProperty propertyName="Descr" displayLabel="Description" typeName="string"/>
        <ECProperty propertyName="Source" displayLabel="Source" typeName="int"/>
        <ECProperty propertyName="Details" typeName="string">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECNavigationProperty propertyName="CategorySelector" relationshipName="ViewDefinitionUsesCategorySelector" direction="Forward">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECNavigationProperty>
        <ECNavigationProperty propertyName="DisplayStyle" relationshipName="ViewDefinitionUsesDisplayStyle" direction="Forward">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECNavigationProperty>
    </ECEntityClass>

    <ECEntityClass typeName="ViewDefinition3d" modifier="Abstract">
        <BaseClass>ViewDefinition</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECNavigationProperty propertyName="ClipVolume" relationshipName="ViewDefinition3dUsesClipVolume" direction="Forward"/>
        <ECProperty propertyName="Origin" typeName="Point3d" displayLabel="Origin of the viewed volume on the lower, back, rear">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Extents" typeName="Point3d" displayLabel="Size of the view diagonal">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Yaw" typeName="double" displayLabel="Yaw component of the view direction in degrees">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Pitch" typeName="double" displayLabel="Pitch component of the view direction in degrees">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Roll" typeName="double" displayLabel="Roll component of the view direction in degrees">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <!-- A view of an area defined in the bim's coordinate system. -->
    <ECEntityClass typeName="SpatialViewDefinition" modifier="Abstract">
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECNavigationProperty propertyName="ModelSelector" relationshipName="ViewDefinition3dUsesModelSelector" direction="Forward">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECNavigationProperty>
        <BaseClass>ViewDefinition3d</BaseClass>
    </ECEntityClass>

    <!-- A spatial view that shows a perspective projection -->
    <ECEntityClass typeName="CameraViewDefinition">
        <BaseClass>SpatialViewDefinition</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECProperty propertyName="EyePoint" typeName="Point3d" displayLabel="Camera eye point">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="LensAngle" typeName="double" displayLabel="Camera lens angle in degrees">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="FocusDistance" typeName="double" displayLabel="Camera focus distance">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <!-- A spatial view that shows an orthographic parallel projection -->
    <ECEntityClass typeName="OrthographicViewDefinition">
        <BaseClass>SpatialViewDefinition</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
    </ECEntityClass>

    <!-- A view of a 2D model that has its own local coordinate system. -->
    <ECEntityClass typeName="ViewDefinition2d" modifier="Abstract">
        <BaseClass>ViewDefinition</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECNavigationProperty propertyName="BaseModel" relationshipName="BaseModelForView2d" direction="Backward">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECNavigationProperty>
        <ECProperty propertyName="Origin" typeName="Point2d" displayLabel="Lower left corner of the viewed area.">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="Extents" typeName="Point2d" displayLabel="Size of the view diagonal">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="RotationAngle" typeName="double" displayLabel="Rotation angle in degrees of the viewed area.">
            <ECCustomAttributes><CustomHandledProperty/></ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>

    <ECEntityClass typeName="DrawingViewDefinition">
        <BaseClass>ViewDefinition2d</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SheetViewDefinition">
        <BaseClass>ViewDefinition2d</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
    </ECEntityClass>
  
    <ECRelationshipClass typeName="ElementHasLinks" description="Associates links to an element." strength="referencing" modifier="None">
        <BaseClass>ElementRefersToElements</BaseClass>
        <Source multiplicity="(1..*)" roleLabel="has" polymorphic="true">
            <!-- WIP: (0..*)? -->
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is referenced by" polymorphic="true">
            <Class class="LinkElement"/>
        </Target>
    </ECRelationshipClass>

    <ECEntityClass typeName="RoleElement" modifier="Abstract">
        <BaseClass>Element</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
            <JoinedTablePerDirectSubclass xmlns="ECDbMap.02.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SpatialIndex">
        <ECCustomAttributes>
            <ClassMap xmlns="ECDbMap.02.00">
                <MapStrategy>ExistingTable</MapStrategy>
                <TableName>dgn_SpatialIndex</TableName> <!-- Must match DGN_VTABLE_SpatialIndex #define -->
                <ECInstanceIdColumn>ElementId</ECInstanceIdColumn>
            </ClassMap>
        </ECCustomAttributes>
        <ECProperty propertyName="MinX" typeName="double"/>
        <ECProperty propertyName="MaxX" typeName="double"/>
        <ECProperty propertyName="MinY" typeName="double"/>
        <ECProperty propertyName="MaxY" typeName="double"/>
        <ECProperty propertyName="MinZ" typeName="double"/>
        <ECProperty propertyName="MaxZ" typeName="double"/>
    </ECEntityClass>

    <ECEntityClass typeName="GeometryPart">
        <BaseClass>DefinitionElement</BaseClass>
        <ECCustomAttributes><ClassHasHandler xmlns="BisCore.01.00"/></ECCustomAttributes>
        <ECProperty propertyName="GeometryStream" typeName="binary">
            <!-- IsNullable = False -->
            <ECCustomAttributes>
                <CustomHandledProperty/>
                <HideProperty xmlns="EditorCustomAttributes.01.03" />
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxLow" typeName="point3d">
            <!-- IsNullable = False -->
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
        <ECProperty propertyName="BBoxHigh" typeName="point3d">
            <!-- IsNullable = False -->
            <ECCustomAttributes>
                <CustomHandledProperty/>
            </ECCustomAttributes>
        </ECProperty>
    </ECEntityClass>
    <ECRelationshipClass typeName="ElementUsesGeometryParts" strength="referencing" modifier="None">
        <BaseClass>ElementRefersToElements</BaseClass>
        <!-- WIP: Remove? -->
        <!-- Used to indicate that an Element uses a GeometryPart.  This is useful for "garbage collecting" or finding Elements that would be affected by a change to a GeometryPart. -->
        <Source multiplicity="(0..*)" polymorphic="true">
            <Class class="Element"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="false">
            <Class class="GeometryPart"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="GraphicDerivedFromElement" strength="referencing" modifier="None">
        <BaseClass>ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" polymorphic="true">
            <Class class="DrawingGraphic"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="true">
            <Class class="GeometricElement"/>
        </Target>
    </ECRelationshipClass>

</ECSchema>
