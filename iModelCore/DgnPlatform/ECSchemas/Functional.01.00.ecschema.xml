<?xml version="1.0" encoding="UTF-8"?>
<ECSchema schemaName="Functional" alias="func" version="01.00" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.1">

    <ECSchemaReference name="BisCore" version="01.00" alias="bis"/>
    <ECSchemaReference name="ECDbMap" version="02.00" alias="ecdbmap"/>

    <ECEntityClass typeName="FunctionalPartition" modifier="Sealed">
        <BaseClass>bis:InformationPartitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00" />
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalModel">
        <BaseClass>bis:RoleModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalElement" modifier="Abstract">
        <BaseClass>bis:RoleElement</BaseClass>
        <ECCustomAttributes>
            <ShareColumns xmlns="ECDbMap.02.00">
                <SharedColumnCount>32</SharedColumnCount>
                <ApplyToSubclassesOnly>True</ApplyToSubclassesOnly>
            </ShareColumns>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="FunctionalType" relationshipName="FunctionalElementIsOfType" direction="Forward">
        </ECNavigationProperty>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalBreakdownElement" modifier="Abstract">
        <BaseClass>FunctionalElement</BaseClass>
        <BaseClass>bis:IParentElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalComposite">
        <BaseClass>FunctionalBreakdownElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalComponentElement" modifier="Abstract">
        <BaseClass>FunctionalElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalPortion">
        <BaseClass>FunctionalComponentElement</BaseClass>
        <BaseClass>bis:IModellableElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="FunctionalType" modifier="Abstract">
        <BaseClass>bis:DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    
    <ECRelationshipClass typeName="FunctionalElementIsOfType" strength="referencing" modifier="None">
        <ECCustomAttributes>
            <ForeignKeyConstraint xmlns="ECDbMap.02.00"/>
        </ECCustomAttributes>
        <Source multiplicity="(0..*)" roleLabel="is of" polymorphic="true">
            <Class class="FunctionalElement" />
        </Source>
        <Target multiplicity="(0..1)" roleLabel="defines" polymorphic="true">
            <Class class="FunctionalType"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="PhysicalElementFulfillsFunction" strength="referencing" modifier="None">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="fulfills" polymorphic="true">
            <Class class="bis:PhysicalElement"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is fulfilled by" polymorphic="true">
            <Class class="FunctionalElement"/>
        </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="DrawingGraphicRepresentsFunctionalElement" strength="referencing" modifier="None">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="represents" polymorphic="true">
            <Class class="bis:DrawingGraphic"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is represented by" polymorphic="true">
            <Class class="FunctionalElement"/>
        </Target>
    </ECRelationshipClass>

</ECSchema>
