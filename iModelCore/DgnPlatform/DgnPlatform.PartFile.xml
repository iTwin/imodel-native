<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="DgnPlatformLib">
        <RequiredRepository>DgnPlatformExamples</RequiredRepository> <!-- Many developers of higher-level parts will want to see the examples. -->
        <SubPart PartName="DgnPlatformDLL" />
    </Part>

    <Part Name="Readme" BentleyBuildMakeFile="ProcessReadme.mke">
        <Bindings>
            <Files ProductDirectoryName="DgnPlatform_PublishedAPI_Scope1_Doc">
                Delivery/readme.htm
            </Files>
        </Bindings>
    </Part>

    <!-- Bind my own PublicAPI into BuildContext/PublicAPI. Note that this part does not cause any sub-part PublicAPIs to be bound. -->
    <!-- Also re-deliver some ECSchemas -->
    <Part Name="PublicAPI" BentleyBuildMakeFile="DgnPlatform.prewire.mke">
        <SubPart PartName="StandardSchemas" PartFile="ECStandards"  Repository="ECStandards"/>
        <Bindings>
            <PublicAPI Domain="DgnPlatform" />
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Dgn" SubPartDirectory="ECSchemas/Dgn">
                ECSchemas/Bentley_Markup.01.00.ecschema.xml
                ECSchemas/Bentley_MarkupExtension.01.01.ecschema.xml
                ECSchemas/DgnMarkupSchema.01.00.ecschema.xml
                ECSchemas/dgn.02.00.ecschema.xml
             </Files>
        </Bindings>
    </Part>

    <!-- NOTE: Graphite uses "G" as a library suffix to disambiguate from Vancouver libraries -->
    <Part Name="DgnPlatformDLL" BentleyBuildMakeFile="DgnPlatform.mke" ApiNumber="G">
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BeCurl"              PartFile="BeCurl"       Repository="Libsrc-Curl"/>
        <SubPart PartName="ECDb"                PartFile="ECDb"         Repository="ECDb" />
        <SubPart PartName="ToolsubsDll"         PartFile="RmgrTools"    Repository="RmgrTools" />
        <SubPart PartName="GeomDlls"            PartFile="geomlibs"     Repository="GeomLibs" />
        <SubPart PartName="BeXmlDll"            PartFile="BeLibxml2"    Repository="libsrc-libxml2" />
        <SubPart PartName="ECObjectsNative"     PartFile="ecobjects"    Repository="ecobjects" />
        <SubPart PartName="Freetype2Library"    PartFile="freetype2"    Repository="libsrc-freetype2" />
        <SubPart PartName="BeJsonCpp"           PartFile="BeJsonCpp"    Repository="Libsrc-JsonCpp"/>
        <SubPart PartName="png"                 PartFile="png"          Repository="Libsrc-png"/>
        <SubPart PartName="BeLibJpegTurbo"      PartFile="BeLibJpegTurbo" Repository="Libsrc-libjpegturbo"/>
        <SubPart PartName="Headers"             PartFile="flatbuffers"  Repository="libsrc-flatbuffers"/>
        <SubPart PartName="GeoCoord"            PartFile="GeoCoord"     Repository="geocoord"/>
        <SubPart PartName="PublicApi"           PartFile="csmap"        Repository="libsrc-csmap"/>
        <SubPart PartName="GeoCoordDataMinimal" PartFile="csmap"        Repository="libsrc-csmap"/>
        <SubPart PartName="BeJavaScript"        PartFile="BePortableUi" Repository="BePortableUi"/>
        <SubPart PartName="nodejs-Winx86"       PartFile="nodejs"       Repository="Thirdparty-nodejs" />
        <SubPart PartName="nodejs-Macx64"       PartFile="nodejs"       Repository="Thirdparty-nodejs" />
        <SubPart PartName="typescript"          PartFile="typescript"   Repository="Thirdparty-typescript" />
        <Bindings>
            <Libs>Delivery/$(libprefix)DgnPlatform$(libext)</Libs>
            <Assemblies ProductDirectoryName="DgnPlatformNativeAssemblies">Delivery/$(shlibprefix)DgnPlatform$(ApiNumber)$(shlibext)</Assemblies>
            <Files ProductDirectoryName="DgnPlatformXliffs" Required="false" SubPartDirectory="xliffs">Delivery/xliffs/DgnCoreMessages_en.xliff</Files>
            <Files Required="false" ProductDirectoryName="DgnPlatformLastResortFonts" SubPartDirectory="DgnPlatformLastResortFonts">Delivery/lastresortfonts</Files>
            <Files Required="false" ProductDirectoryName="DgnJsApiTs" SubPartDirectory="Script/DgnJsApiTs">Delivery/DgnJsApi.d.ts</Files>
            <Files Required="false" ProductDirectoryName="GeomJsApiTs" SubPartDirectory="Script/GeomJsApiTs">Delivery/GeomJsApi.d.ts</Files>
            <Directory SourceName="Delivery/icons" ProductDirectoryName="DgnCoreDecorators" SubPartDirectory="DgnPlatformIcons" Required="false" />
        </Bindings>
    </Part>

    <Part Name="DgnPlatformOverviewDocs" BentleyBuildMakeFile="docs/DgnPlatformOverviewDocs.mke">
        <SubPart PartName="DgnPlatformDoc-Build-SampleCode" />
        <Bindings>
            <Directory SourceName="Docs/Source/DgnPlatform" SubPartDirectory="Docs/Source/DgnPlatform"/>
            <!-- *** TBD doc images + files TBD ***
            <Directory SourceName="Docs/Images/DgnPlatform" SubPartDirectory="Docs/Images/DgnPlatform"/>
            <Directory SourceName="Docs/Files/DgnPlatform" SubPartDirectory="Docs/Files/DgnPlatform"/>
            -->
        </Bindings>
    </Part>

    <!-- Check that code samples in docs/samplecode actually compile -->
    <Part Name="DgnPlatformDoc-Build-SampleCode" BentleyBuildMakeFile="${SrcBsiCommon}build/BuildSampleCode.mke" BMakeOptions="-dBUILD_SAMPLE_CODE_SUB_DIR=samplecode -dBUILD_SAMPLE_CODE_SOURCE_DIR=$(SrcRoot)DgnPlatform/docs/samplecode">
        <SubPart PartName="PublishedApi"/>
    </Part>

    <Part Name="DimStyleSchemaPrewire" BentleyBuildMakeFile="DgnHandlers/Dimension/DimStyleSchemaGenerator/DimStyleSchemaGenerator.mke" >
        <Bindings>
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Dgn" SubPartDirectory="ECSchemas/Dgn">
                GeneratedSchemas/DimensionStyleSchema.01.00.ecschema.xml
            </Files>
        </Bindings>
    </Part>

    <Part Name="DgnProjectUnitTests_Support" BentleyBuildMakeFile="Tests/DgnProject/prewire.mke">
        <SubPart PartName="PublicAPI"/>
        <Bindings>
            <Directory SourceName="Delivery/UnitTests/assets/DgnProject/ECSchemas" SubPartDirectory="UnitTests/assets/DgnProject/ECSchemas" />
            <Directory SourceName="Delivery/UnitTests/assets/DgnProject/Script" SubPartDirectory="UnitTests/assets/DgnProject/Script" />
            <!-- CompileUnitTests.mke will put -I$(BuildContext)SubParts/UnitTests/PublicAPI on the include path, so that unit test source can #include <DgnPlatform/DgnProject/DgnHandlers/ScopedDgnHost.h> -->
            <Directory SourceName="PublicAPI/DgnPlatform/DgnHandlers/UnitTests" SubPartDirectory="UnitTests/PublicAPI/DgnPlatform/DgnHandlers"/>
            <Directory SourceName="PrivateAPI"                                  SubPartDirectory="UnitTests/PrivateAPI"/>
        </Bindings>
    </Part>

    <Part Name="PublishedApi" BentleyBuildMakeFile="${SrcBsiCommon}sharedmki/PublishApi.mke" BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson">
        <!-- What I WANT is PublicAPI. I include DgnHandlers, because that causes PublicAPI to be built. -->
        <SubPart PartName="DgnPlatformDLL"/>
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/DgnProject"/>
        </Bindings>
    </Part>

    <Part Name="DgnProjectUnitTests" BentleyBuildMakeFile="../bsicommon/sharedmki/BuildPlatformUnitTests.mke" BMakeOptions="-dBEGTEST_INPUT=$(SrcRoot)DgnPlatform/Tests/DgnProject/ -dBEGTEST_NAME=DgnProject -dBEGTEST_DEPENDENCIES=$(SrcRoot)DgnPlatform/Tests/DgnProject/dependencies.mki">
        <!-- Get GTest API directory -->
        <SubPart    PartName="google_gtest_lib"                 PartFile="gtest"        Repository="util-gtest" />
        <!-- Get the unit tests support API -->
        <SubPart    PartName="DgnProjectUnitTests_Support"      PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <!-- Get the tested API -->
        <SubPart    PartName="DgnPlatformDLL"                   PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <!-- Get the test documents 
        <SubProduct ProductName="BeTestDocuments"               PartFile="BeGTest"      Repository="BeGTest" />
        -->
        <!-- Needed for published unit tests -->
        <SubPart    PartName="PublishedApi"                     PartFile="DgnPlatform"  Repository="DgnPlatform"/>
    </Part>

    <!-- Allow dependent tests to #include <UnitTests/BackDoor/DgnPlatform/ScopedDgnHost.h> -->
    <Part Name="DgnPlatformUnitTestHelpers" BentleyBuildMakeFile="Tests/DgnProject/prewire.mke">
        <Bindings>
            <Files Required="false" SubPartDirectory="UnitTests/include/UnitTests/BackDoor/DgnPlatform">Delivery/UnitTests/ScopedDgnHost.h</Files>
        </Bindings>
    </Part>

    <Part Name="UnitTestsBase" BentleyBuildMakeFile="Tests/DgnProject/prewire.mke">
        <SubPart PartName="DgnPlatformDLL"/>
        <SubPart PartName="DgnPlatformUnitTestHelpers"/>
        <Bindings>
            <Files     ProductDirectoryName="UnitTestsIgnoreList"   ProductSubDirectory="DgnPlatform">              Delivery/UnitTests/ignore_list.txt</Files>
            <Directory ProductDirectoryName="UnitTestsAssets"       ProductSubDirectory="Script"        SourceName="Delivery/UnitTests/Script" />
            <Files     ProductDirectoryName="UnitTestsAssets"       ProductSubDirectory="ECSchemas">                Delivery/UnitTests/ECSchemas/*.xml</Files>
        </Bindings>
    </Part>

    <Part Name="BackdoorForUnitTests" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Backdoor -dIsBackDoor">
        <SubPart PartName="UnitTestsBase" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTestsLinkables"    ProductSubDirectory="DgnPlatform/Backdoor" SourceName="Delivery/UnitTests/Linkables/Backdoor"/>
        </Bindings>
    </Part>

    <Part Name="TestFixtureForUnitTests" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=TestFixture">
        <SubPart PartName="UnitTestsBase" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTestsLinkables"    ProductSubDirectory="DgnPlatform/TestFixture" SourceName="Delivery/UnitTests/Linkables/TestFixture"/>
        </Bindings>
    </Part>

    <Part Name="UnitTestsNonPublished" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=NonPublished">
        <SubPart PartName="UnitTestsBase" />
        <SubPart PartName="TestFixtureForUnitTests" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTestsLinkables"    ProductSubDirectory="DgnPlatform/NonPublished" SourceName="Delivery/UnitTests/Linkables/NonPublished"/>
        </Bindings>
    </Part>

    <Part Name="UnitTestsPerformance" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Performance">
        <SubPart PartName="UnitTestsBase" />
        <SubPart PartName="TestFixtureForUnitTests" />
        <SubPart PartName="PerformanceTestingHelpers" PartFile="BeSQLite" Repository="BeSQLite"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTestsLinkables"    ProductSubDirectory="DgnPlatform/Performance" SourceName="Delivery/UnitTests/Linkables/Performance"/>
        </Bindings>
    </Part>

    <Part Name="UnitTestsPublished" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Published -dUsePublishedApi">
        <SubPart PartName="BackdoorForUnitTests" />
        <SubPart PartName="PublishedApi" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTestsLinkables"    ProductSubDirectory="DgnPlatform/Published" SourceName="Delivery/UnitTests/Linkables/Published"/>
        </Bindings>
    </Part>

    <!-- ////////////////////////////////// Products ///////////////////////////////////////// -->
    <ProductDirectoryList ListName="DgnPlatform">
        <ProductDirectory Name="PublicAPI"           Deliver="false"/>
        <ProductDirectory Name="PublicAPI"           Deliver="false" LibType="static"/>
        <ProductDirectory Name="VendorAPI"           Deliver="false" />
        <ProductDirectory Name="VendorAPI"           Deliver="false" LibType="static"/>
        <ProductDirectory Name="MergeModules"        Deliver="false" />
        <ProductDirectory Name="RunWaitExes"         Deliver="false" />
        <ProductDirectory Name="WorkSpaceSystemData" Deliver="false"/>
        <ProductDirectory Name="DgnPlatformTestExe"  Deliver="false"/>
        <ProductDirectory Name="LoggingManagedAssemblies"           Deliver="false"/>
        <ProductDirectory Name="LoggingOptionalManagedAssemblies"   Deliver="false"/>
        <ProductDirectory Name="LoggingWorkspaceData"               Deliver="false" />
        <ProductDirectory Name="DgnDbImportConfiguration" Deliver="false" />
        <ProductDirectory Name="Libs"            Path="Libs"/>
        <ProductDirectory Name="Libs"            Path="StaticLibs" LibType="static"/>
        <ProductDirectory Name="BentleyLibs"     Path="Libs"/>
        <ProductDirectory Name="ECObjectsLibs"   Path="Libs"/>
        <ProductDirectory Name="BentleyNativeAssemblies" Path="Dlls"/>
        <ProductDirectory Name="BentleyNativeAssemblies" Path="StaticLibs" LibType="static"/>
        <ProductDirectory Name="GeomNativeAssemblies" Path="Dlls"/>
        <ProductDirectory Name="GeomNativeAssemblies" Path="Dlls" LibType="static"/>
        <ProductDirectory Name="DgnPlatformNativeAssemblies" Path="Dlls"/>
        <ProductDirectory Name="DgnPlatformNativeAssemblies" Path="Dlls" LibType="static"/>
        <ProductDirectory Name="DgnPlatformLastResortFonts" RelativeTo="DgnPlatformFont" Path="LastResortFonts"/>
        <ProductDirectory Name="DgnPlatformLastResortFonts" RelativeTo="DgnPlatformFont" Path="LastResortFonts" LibType="static"/>
        <ProductDirectory Name="LoggingNativeAssemblies" Path="Dlls"/>
        <ProductDirectory Name="ecobjectsnativeassemblies" Path="Dlls"/>
        <ProductDirectory Name="ecobjectsnativeassemblies" Path="Dlls" LibType="static"/>
        <ProductDirectory Name="PPNativeAssemblies" Deliver="false"/>
        <ProductDirectory Name="ECSchemas" Path="" RelativeTo="ecobjectsnativeassemblies" />
        <ProductDirectory Name="ECSchemas" Path="" RelativeTo="ecobjectsnativeassemblies" LibType="static"/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies" Path="Dlls"/>
        <ProductDirectory Name="RmgrToolsNativeAssemblies" Path="StaticLibs" LibType="static"/>
        <ProductDirectory Name="DgnPlatform_PublishedAPI_Scope1" Path="Include"/>
        <ProductDirectory Name="DgnPlatform_PublishedAPI_Scope1_Doc" Path="Docs"/>
        <ProductDirectory Name="DgnPlatform_PublishedAPI_Scope1_XML" Path="Docs"/>
        <ProductDirectory Name="DgnPlatformDemoRoot" Path="Demo"/>
        <ProductDirectory Name="DgnPlatformDemoSource" Path="Source" RelativeTo="DgnPlatformDemoRoot"/>
        <ProductDirectory Name="DgnPlatformInstall" Path="install"/>
        <ProductDirectory Name="DgnPlatformData" Path="Data"/>
        <ProductDirectory Name="DgnPlatformDemoExe" Path="Exe" RelativeTo="DgnPlatformDemoRoot"/>
        <ProductDirectory Name="DgnPlatformSeed" Path="Seed" RelativeTo="DgnPlatformData"/>
        <ProductDirectory Name="DgnPlatformFont" Path="Fonts" RelativeTo="DgnPlatformData"/>
        <ProductDirectory Name="DgnPlatformFont" Path="Fonts" RelativeTo="DgnPlatformData" LibType ="static"/>
        <ProductDirectory Name="DgnCoreDecorators" Path="decorators/dgncore" RelativeTo="DgnPlatformData"/>
        <ProductDirectory Name="DgnViewDecorators" Path="decorators/dgnview" RelativeTo="DgnPlatformData"/>
        <ProductDirectory Name="DgnPlatformDemoDgn"  Path="Dgn" RelativeTo="DgnPlatformDemoRoot"/>
        <ProductDirectory Name="DgnPlatformLineStyleRsc"  Path="Symb" RelativeTo="DgnPlatformData"/>
        <ProductDirectory Name="VendorNotices" Path="Notices"/>
        <ProductDirectory Name="VendorNotices" Path="Notices" LibType="static"/>

        <ProductDirectory Name="PdfLibInitNativeAssemblies" Deliver="false"/>
        <ProductDirectory Name="ImagePPAssemblies"          Deliver="false"/>
        <ProductDirectory Name="AdobeAssemblies"            Deliver="false"/>
        <ProductDirectory Name="AdobeResource"              Deliver="false"/>
        <ProductDirectory Name="GeoCoordData"               Deliver="false"/>
        <ProductDirectory Name="GeoCoordNativeAssemblies"   Deliver="false"/>
        <ProductDirectory Name="GdalData"                   Deliver="false"/>
        <ProductDirectory Name="MrSidAssemblies"            Deliver="false"/>

        <ProductDirectory Name="DgnPlatformSampleRoot" Path="Sample"/>
        <ProductDirectory Name="DgnPlatformSampleSourceDir" Path="Source" RelativeTo="DgnPlatformSampleRoot"/>
        <ProductDirectory Name="DgnPlatformSampleAdditionalAssets" RelativeTo="DgnPlatformSampleRoot"/>
        <ProductDirectory Name="DgnPlatformSampleSqlangDir" Path="Sqlang" RelativeTo="DgnPlatformData"/>
    </ProductDirectoryList>

    <!-- Do we still need this product?
    <Product Name="DgnPlatform" PrgOutputDir="DgnPlatform" SaveProduct="true">
        <SubPart PartName="DgnPlatformLib"/>

        <SubPart PartName="DgnPlatformDemoSource" PartFile="DgnPlatformExamples" Repository="DgnPlatformExamples"/>
        <SubPart PartName="DgnPlatformSample" PartFile="DgnPlatformExamples" Repository="DgnPlatformExamples"/>

        <Directories DirectoryListName="DgnPlatform" />
    </Product>
    -->

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // L10N                                                                   // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <!-- English Xliffs generated during the build are pushed (by PRG only) to Mercurial next to translations for L10N vendor convenience -->
    <Part Name="L10N-DgnPlatformXliffs-en" OnlyPlatforms="x64"
        BentleyBuildMakeFile="${SrcBsiCommon}sqlang/mki/PushXliffsFromBuild.mke"
        BentleyBuildMakeOptions="-dBUILD_XLIFF_DIRECTORY=$(OutputRootDir)BuildContexts/DgnPlatform/Delivery/xliffs/ -dL10N_XLIFF_DIRECTORY=$(SrcRoot)l10n/l10n-DgnPlatform/en/">
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-cs" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=cs">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/DgnCoreMessages_cs.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/DgnHandlersMessages_cs.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/ForeignFormat_cs.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-de" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=de">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/DgnCoreMessages_de.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/DgnHandlersMessages_de.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/ForeignFormat_de.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-es" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=es">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/DgnCoreMessages_es.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/DgnHandlersMessages_es.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/ForeignFormat_es.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-fi" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fi">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/DgnCoreMessages_fi.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/DgnHandlersMessages_fi.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/ForeignFormat_fi.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-fr" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fr">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/DgnCoreMessages_fr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/DgnHandlersMessages_fr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/ForeignFormat_fr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-it" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=it">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/DgnCoreMessages_it.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/DgnHandlersMessages_it.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/ForeignFormat_it.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ja" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ja">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/DgnCoreMessages_ja.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/DgnHandlersMessages_ja.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/ForeignFormat_ja.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ko" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ko">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/DgnCoreMessages_ko.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/DgnHandlersMessages_ko.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/ForeignFormat_ko.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-nl" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=nl">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/DgnCoreMessages_nl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/DgnHandlersMessages_nl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/ForeignFormat_nl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-pl" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pl">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/DgnCoreMessages_pl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/DgnHandlersMessages_pl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/ForeignFormat_pl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-pt" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pt">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/DgnCoreMessages_pt.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/DgnHandlersMessages_pt.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/ForeignFormat_pt.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ru" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ru">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/DgnCoreMessages_ru.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/DgnHandlersMessages_ru.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/ForeignFormat_ru.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-sv" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=sv">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/DgnCoreMessages_sv.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/DgnHandlersMessages_sv.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/ForeignFormat_sv.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-tr" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=tr">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/DgnCoreMessages_tr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/DgnHandlersMessages_tr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/ForeignFormat_tr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-zh-cn" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-cn">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/DgnCoreMessages_zh-cn.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/DgnHandlersMessages_zh-cn.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/ForeignFormat_zh-cn.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-zh-tw" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-tw">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/DgnCoreMessages_zh-tw.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/DgnHandlersMessages_zh-tw.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/ForeignFormat_zh-tw.xliff</Files>
        </Bindings>
    </Part>

    <!-- *** NEEDS WORK: We should not need any special "bootstrapping". AssertToolSet.mki should set up toolcontext for any/all platforms. *** -->
    <!-- The first part ever built causes the tool context to be generated. This is actually a little intricate and has certain requirements, so explicitly cause it to happen in a controlled way. -->
    <Part Name="BootStrapToolContext" BentleyBuildMakeFile="BootStrapToolContext.mke"/>

    <Part Name="DgnPlatform-Tested">
        <!-- Build the SDK -->
        <!-- *** NEEDS WORK: We should not need a special part for Linux. *** -->
        <SubPart PartName="BootStrapToolContext"/>
<!--        <SubPart PartName="DgnPlatformLib" /> -->
        <!-- Build all platform unit tests -->
        <SubPart PartName="PlatformUnitTests-No-View" PartFile="BeGTest" Repository="BeGTest"  />
        <!-- Build the test runner and, if possible, run the tests -->
        <SubPart PartName="BeGTestCommon"       PartFile="BeGTest"  Repository="BeGTest" />
    </Part>


    <!-- *********************************************************************************************** -->
    <!-- a temporary part and product that shows how to gather test material into a test material product -->
    <ProductDirectoryList ListName="SwwTestsMaterialProductDir">
        <ProductDirectory Name="BentleyNativeAssemblies"            Path="Assemblies"/>
        <ProductDirectory Name="LoggingNativeAssemblies"            Path="Assemblies"/>
        <ProductDirectory Name="GeomNativeAssemblies"               Path="Assemblies"/>
        <ProductDirectory Name="BeOpenSSLAssemblies"                Path="Assemblies"/>
        <ProductDirectory Name="DgnPlatformNativeAssemblies"        Path="Assemblies"/>
        <ProductDirectory Name="BeCurlAssemblies"                   Path="Assemblies"/>
        <ProductDirectory Name="ECObjectsNativeAssemblies"          Path="Assemblies"/>
        <ProductDirectory Name="GeoCoordNativeAssemblies"           Path="Assemblies"/>
        <ProductDirectory Name="Libs"                               Path="Libs"/>
        <ProductDirectory Name="BentleyLibs"                        Path="Libs"/>
        <ProductDirectory Name="UnitTestsLinkables"                 Path="Linkables"/>
        <ProductDirectory Name="UnitTestsAssets"                    Path="Assets"/>
        <ProductDirectory Name="UnitTestsIgnoreList"                Path="Assets/Ignore"/>
        <ProductDirectory Name="UnitTestsDocumentsDgnDb"            Path="Assets/BeTestDocuments/DgnDb"/>
        <ProductDirectory Name="ECSchemas"                          Path="Assets"/>
        <ProductDirectory Name="sqlang"                             Path="Assets/sqlang"/>
        <ProductDirectory Name="DgnPlatformFont"                    Path="Assets/fonts"/>
        <ProductDirectory Name="DgnPlatformLastResortFonts"         Path="Assets"/>
        <ProductDirectory Name="BeIcu4cData"                        Path="Assets"/>
        <ProductDirectory Name="GeoCoordData"                       Path="Assets/DgnGeoCoord"/>
        <ProductDirectory Name="GeoCoordDataMinimal"                Path="Assets/DgnGeoCoord"/>

        <ProductDirectory Name="RmgrToolsNativeAssemblies" Deliver="false"/>
        <ProductDirectory Name="PublicAPI" Deliver="false"/>
        <ProductDirectory Name="VendorAPI" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" LibType="static" />
        <ProductDirectory Name="Libs" Deliver="false" LibType="static"/>
    </ProductDirectoryList>

    <Product Name="SwwTestsMaterialProduct">
        <Directories DirectoryListName="SwwTestsMaterialProductDir"/>
        <SubPart PartName="UnitTestsPublished" Repository="Bentley" PartFile="Bentley"/>
        <SubPart PartName="UnitTestsNonPublished" Repository="Bentley" PartFile="Bentley"/>
        <SubPart PartName="UnitTestsPublished" Repository="BeSQLite" PartFile="BeSQLite"/>
        <SubPart PartName="UnitTestsNonPublished" Repository="BeSQLite" PartFile="BeSQLite"/>
        <SubPart PartName="UnitTestsPerformance" Repository="BeSQLite" PartFile="BeSQLite"/>
        <SubPart PartName="UnitTestsPublished" Repository="ECDb" PartFile="ECDb"/>
        <SubPart PartName="UnitTestsNonPublished" Repository="ECDb" PartFile="ECDb"/>
        <SubPart PartName="UnitTestsPerformance" Repository="ECDb" PartFile="ECDb"/>
        <SubPart PartName="UnitTestsPublished" Repository="DgnPlatform" PartFile="DgnPlatform"/>
        <SubPart PartName="UnitTestsNonPublished" Repository="DgnPlatform" PartFile="DgnPlatform"/>
        <SubPart PartName="UnitTestsPerformance" Repository="DgnPlatform" PartFile="DgnPlatform"/>
    </Product>

    <!-- *********************************************************************************************** -->
    <!-- a temporary part and product that shows how to generate a gtest program from a test material product -->
    <ProductDirectoryList ListName="SwwTestsGtestProductDir">
        <ProductDirectory Name="GtestNativeAssemblies" Path=""/>
        <ProductDirectory Name="BentleyNativeAssemblies" Path=""/>
        <ProductDirectory Name="LoggingNativeAssemblies" Path=""/>
        <ProductDirectory Name="GtestDgnPlatformAssetsDirectory" Path="DgnPlatformAssetsDirectory"/>

        <ProductDirectory Name="UnitTestsLinkables" Deliver="false"/>
        <ProductDirectory Name="UnitTestsIgnoreList" Deliver="false"/>
        <ProductDirectory Name="Libs" Deliver="false"/>
        <ProductDirectory Name="Libs" Deliver="false" LibType="static"/>
        <ProductDirectory Name="PublicAPI" Deliver="false"/>
        <ProductDirectory Name="VendorAPI" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" />
        <ProductDirectory Name="VendorNotices" Deliver="false" LibType="static" />
    </ProductDirectoryList>

    <Product Name="SwwTestsGtestProduct">
        <Directories DirectoryListName="SwwTestsGtestProductDir"/>
        <SubPart PartName="SwwTestsGtest"/>
    </Product>

    <Part Name="SwwTestsGtest" BentleyBuildMakeFile="../begtest/buildGtest.mke" BentleyBuildMakeOptions="-dBEGTEST_NAME=SwwTests -dBEGTEST_MATERIAL_PRODUCT_DIR=SwwTestsMaterialProduct">
        <SubProduct ProductName="SwwTestsMaterialProduct"/>
        <SubPart PartName="google_gtest_lib"                PartFile="gtest"            Repository="util-gtest" />
        <SubPart PartName="google_gmock_lib"                PartFile="gmock"            Repository="util-gmock" />
        <SubPart PartName="LoggingNative"                   PartFile="LoggingSDK"       Repository="loggingsdk" />
        <SubPart PartName="BeSQLite"                        PartFile="BeSQLite"         Repository="BeSQLite" />
        <Bindings>
            <Files ProductDirectoryName="GtestNativeAssemblies">Delivery/BuildGtest/Assemblies/*</Files>
            <Directory ProductDirectoryName="GtestDgnPlatformAssetsDirectory" SourceName="Delivery/BuildGtest/DgnPlatformAssetsDirectory" />
        </Bindings>
    </Part>

</BuildContext>
