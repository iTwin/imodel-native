<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="DgnPlatformLib">
        <RequiredRepository>DgnPlatformExamples</RequiredRepository> <!-- Many developers of higher-level parts will want to see the examples. -->
        <SubPart PartName="DgnPlatformDLL" />
    </Part>

    <Part Name="Readme" BentleyBuildMakeFile="ProcessReadme.mke">
        <Bindings>
            <Files ProductDirectoryName="DgnPlatform_PublishedAPI_Scope1_Doc">
                Delivery/readme.htm
            </Files>
        </Bindings>
    </Part>

    <!-- Bind my own PublicAPI into BuildContext/PublicAPI. Note that this part does not cause any sub-part PublicAPIs to be bound. -->
    <!-- Also re-deliver some ECSchemas -->
    <Part Name="PublicAPI" BentleyBuildMakeFile="DgnPlatform.prewire.mke">
        <SubPart PartName="StandardSchemas" PartFile="ECStandards"  Repository="ECStandards"/>
        <Bindings>
            <PublicAPI Domain="DgnPlatform" />
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Dgn" SubPartDirectory="ECSchemas/Dgn">
                ECSchemas/dgn.02.00.ecschema.xml
                ECSchemas/Generic.01.00.ecschema.xml
                ECSchemas/Markup.01.00.ecschema.xml
            </Files>
            <Directory SourceName="Dox/Pages/DgnPlatform" SubPartDirectory="Dox/Pages/DgnPlatform"/>
        </Bindings>
    </Part>

    <!-- We need this shim part because there is no LKG for WinRT, and thus WinRT builds cannot get a partfile from the LKG to see that the part excludes WinRT. -->
    <Part Name="OpenCASCADEShim" ExcludePlatforms="WinRT*">
        <SubPart PartName="OpenCASCADE" PartFile="OpenCASCADE" Repository="Libsrc-OpenCASCADE"/>
    </Part>

    <!-- NOTE: DgnDb uses "G" as a library suffix to differentiate from DgnV8 libraries -->
    <Part Name="DgnPlatformDLL" BentleyBuildMakeFile="DgnPlatform.mke" ApiNumber="G06">
        <SubPart PartName="PublicAPI" />
        <SubPart PartName="BeCurl"              PartFile="BeCurl"       Repository="Libsrc-Curl"/>
        <SubPart PartName="ECDb"                PartFile="ECDb"         Repository="ECDb" />
        <SubPart PartName="GeomDlls"            PartFile="geomlibs"     Repository="GeomLibs" />
        <SubPart PartName="BeXmlDll"            PartFile="BeLibxml2"    Repository="libsrc-libxml2" />
        <SubPart PartName="ECObjectsNative"     PartFile="ECObjects"    Repository="ecobjects" />
        <SubPart PartName="Freetype2Library"    PartFile="freetype2"    Repository="libsrc-freetype2" />
        <SubPart PartName="BeJsonCpp"           PartFile="BeJsonCpp"    Repository="Libsrc-JsonCpp"/>
        <SubPart PartName="png"                 PartFile="png"          Repository="Libsrc-png"/>
        <SubPart PartName="BeLibJpegTurbo"      PartFile="BeLibJpegTurbo" Repository="Libsrc-libjpegturbo"/>
        <SubPart PartName="Headers"             PartFile="flatbuffers"  Repository="libsrc-flatbuffers"/>
        <SubPart PartName="GeoCoord"            PartFile="GeoCoord"     Repository="geocoord"/>
        <!-- <SubPart PartName="OpenCASCADEShim"/> -->
        <SubPart PartName="PublicApi"           PartFile="csmap"        Repository="libsrc-csmap"/>
        <SubPart PartName="BeJavaScript"        PartFile="BePortableUi" Repository="BePortableUi"/>
        <SubPart PartName="nodejs-Winx86"       PartFile="nodejs"       Repository="Thirdparty-nodejs" />
        <SubPart PartName="nodejs-Macx64"       PartFile="nodejs"       Repository="Thirdparty-nodejs" />
        <SubPart PartName="typescript"          PartFile="typescript"   Repository="Thirdparty-typescript" />

        <!--
            Barry: For full geocoordinate capabilities, the datum conversion files are required to allow you to convert from whatever datum the GCS uses to WGS84. If our publishing code (which will have access to the datum shift files) was always able to convert from a non-WGS84-based GCS to a WGS84-based GCS as it publishes DgnDbâ€™s, we would not need those files. I do not know whether that is always possible, perhaps Alain Robert could comment.

            JM: We end up with the full geocoord set on Windows and iOS due to other platform-specific parts including it. These are missing on Android, and it is suspected to cause problems. Based on the description above, I am unifying DgnPlatformDLL to use the full set, so at least we're consistent across platforms.
        -->
        <SubPart PartName="GeoCoordData" PartFile="csmap" Repository="libsrc-csmap"/>

        <Bindings>
            <Libs>Delivery/$(libprefix)DgnPlatform$(libext)</Libs>
            <Assemblies ProductDirectoryName="DgnPlatformNativeAssemblies">Delivery/$(shlibprefix)DgnPlatform$(ApiNumber)$(shlibext)</Assemblies>
            <Files ProductDirectoryName="DgnPlatformXliffs" Required="false" SubPartDirectory="xliffs">Delivery/xliffs/DgnCoreMessages_en.xliff</Files>
            <Files Required="false" ProductDirectoryName="DgnPlatformLastResortFonts" SubPartDirectory="DgnPlatformLastResortFonts">Delivery/lastresortfonts</Files>
            <Files Required="false" ProductDirectoryName="DgnJsApiTs" SubPartDirectory="Script/DgnJsApiTs">Delivery/DgnJsApi.d.ts</Files>
            <Files Required="false" ProductDirectoryName="GeomJsApiTs" SubPartDirectory="Script/GeomJsApiTs">Delivery/GeomJsApi.d.ts</Files>
            <Directory Required="false" SubPartDirectory="DgnJsApiDoc" SourceName="Delivery/internal-docs/DgnJsApi" />
            <Directory Required="false" SubPartDirectory="GeomJsApiDoc" SourceName="Delivery/internal-docs/GeomJsApi" />
            <Directory SourceName="Delivery/icons" ProductDirectoryName="DgnCoreDecorators" SubPartDirectory="DgnPlatformIcons" Required="false" />
        </Bindings>
    </Part>

    <Part Name="DgnPlatformExtractions" BentleyBuildMakeFile="docs/DgnPlatformExtractions.mke">
        <SubPart PartName="DgnPlatformDoc-Build-SampleCode" />
        <Bindings>
            <Directory SourceName="Dox/Extractions/DgnPlatform" SubPartDirectory="Dox/Extractions/DgnPlatform"/>
        </Bindings>
    </Part>

    <!-- Check that code samples in docs/samplecode actually compile -->
    <Part Name="DgnPlatformDoc-Build-SampleCode" BentleyBuildMakeFile="${SrcRoot}bsicommon/build/BuildSampleCode.mke" BMakeOptions="-dBUILD_SAMPLE_CODE_SUB_DIR=samplecode -dBUILD_SAMPLE_CODE_SOURCE_DIR=$(SrcRoot)DgnPlatform/docs/samplecode">
        <SubPart PartName="PublishedApi"/>
    </Part>

    <Part Name="DimStyleSchemaPrewire" BentleyBuildMakeFile="DgnHandlers/Dimension/DimStyleSchemaGenerator/DimStyleSchemaGenerator.mke" >
        <Bindings>
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Dgn" SubPartDirectory="ECSchemas/Dgn">
                GeneratedSchemas/DimensionStyleSchema.01.00.ecschema.xml
            </Files>
        </Bindings>
    </Part>

    <Part Name="PublishedApi" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishApi.mke" BMakeOptions="+dPUBLISHAPI_DELIVERY_DIR=Delivery/PublishedApi +dPUBLISHAPI_VENDORAPI=json +dPUBLISHAPI_VENDORAPI2=rapidjson">
        <!-- What I WANT is PublicAPI. I include DgnHandlers, because that causes PublicAPI to be built. -->
        <SubPart PartName="DgnPlatformDLL"/>
        <Bindings>
            <Directory SourceName="Delivery/PublishedApi" SubPartDirectory="PublishedApi/DgnProject"/>
        </Bindings>
    </Part>

    <!-- Allow dependent tests to #include <UnitTests/BackDoor/DgnPlatform/ScopedDgnHost.h> -->
    <Part Name="DgnPlatformUnitTestHelpers" BentleyBuildMakeFile="Tests/DgnProject/prewire.mke">
        <SubPart PartName="DgnPlatformDLL"      PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <Bindings>
            <Files Required="false" SubPartDirectory="UnitTests/include/UnitTests/BackDoor/DgnPlatform">Delivery/UnitTests/ScopedDgnHost.h</Files>
            <Files Required="false" SubPartDirectory="UnitTests/include/UnitTests/BackDoor/DgnPlatform">Delivery/UnitTests/DgnDbTestUtils.h</Files>
        </Bindings>
    </Part>

    <Part Name="DgnPlatformSqlang" BentleyBuildMakeFile="${SrcRoot}bsicommon/sqlang/mki/XliffsToDb.mke" BentleyBuildMakeOptions="-dSQLANG_OutputDb=$(OutputRootDir)Build/DgnPlatform/DgnPlatform_en.sqlang.db3 -dSQLANG_XliffWildcard=$(BuildContext)SubParts/xliffs/*.xliff">
        <SubPart PartName="DgnPlatformDLL" />
        <Bindings>
            <Files ProductDirectoryName="DgnPlatformSqlang" Required="true">Delivery/sqlang/DgnPlatform_en.sqlang.db3</Files>
        </Bindings>
    </Part>

    <!-- ********************************************************************************************** -->
    <!-- All DgnPlatform-related Unit tests -->
    <!-- These tests are linked into various test products. -->
    <!-- ********************************************************************************************** -->

    <Part Name="PrewireForUnitTests" BentleyBuildMakeFile="Tests/DgnProject/prewire.mke">
        <SubPart PartName="UnitTests-Documents-DgnDb" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="DgnPlatformDLL"/>
        <SubPart PartName="DgnPlatformUnitTestHelpers"/>
        <Bindings>
            <Files     ProductDirectoryName="UnitTests-IgnoreList"   ProductSubDirectory="DgnPlatform" SubPartDirectory="UnitTests/DgnPlatform">Delivery/UnitTests/ignore_list.txt</Files>
            <Directory ProductDirectoryName="UnitTests-Assets"       ProductSubDirectory="Script" SourceName="Delivery/UnitTests/Script" />
            <Files     ProductDirectoryName="UnitTests-Assets"       ProductSubDirectory="ECSchemas"> Delivery/UnitTests/ECSchemas/*.xml</Files>
        </Bindings>
    </Part>

    <!-- *** ********************************************************** *** -->
    <!-- *** WARNING: Numerous BuildStrategies point to this part! *** -->
    <!-- *** ********************************************************** *** -->
    <!-- If you move this part, you must fix up the BuildStrategies that point to it. -->
    <!-- TRICKY: Documents are only actually published for x64,x86 but we must do other processing for other platforms and other cases so no platforms can be excluded! -->
    <Part Name="UnitTests_Documents" BentleyBuildMakeFile="${SrcRoot}bsicommon/sharedmki/PublishDocuments.mke" BMakeOptions="-dUNIT_TESTS_NAME=ECDbUnitTests -dUNIT_TESTS_DOCUMENTS_DIR=${SrcRoot}/DgnPlatformTest/DgnDbUnitTests/ -dUNIT_TESTS_DOCUMENTS_PREBUILTS_SUBDIR=DgnDb -dUNIT_TESTS_PUBLISH_CONFIG=${SrcRoot}/BeGTest/UnitTestPublisherConfiguration.xml">
        <SubPart PartName="LinkDgnDbPublisherIntoToolContext" PartFile="BeGTest" Repository="BeGTest" />
        <SubPart PartName="DgnDbUnitTestsData"/>
        <Bindings>
            <Directory SourceName="Delivery/UnitTests/Documents" SubPartDirectory="Documents/DgnDb" ProductDirectoryName="UnitTests_Documents_DgnDb" />
            <!-- Note: for BTest, use pre-published documents -->
        </Bindings>
    </Part>

    <Part Name="DgnDbUnitTestsData" OnlyPlatforms="x64,x86">
        <RequiredRepository>DgnDbUnitTestsData</RequiredRepository>
    </Part>

    <Part Name="DgnDbTestUtils" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=DgnDbTestUtils">
        <SubPart PartName="PrewireForUnitTests" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/DgnDbTestUtils" SourceName="Delivery/UnitTests/Objects/DgnDbTestUtils"/>
        </Bindings>
    </Part>

    <Part Name="BackdoorForUnitTests" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=BackDoor">
        <SubPart PartName="DgnDbTestUtils" />
        <SubPart PartName="PrewireForUnitTests" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/BackDoor" SourceName="Delivery/UnitTests/Objects/BackDoor"/>
        </Bindings>
    </Part>

    <Part Name="TestFixtureForUnitTests" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=TestFixture">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="BackdoorForUnitTests"/> <!-- BuildTests.mke cannot be called in parallel because it always makes a static symlink; ensure it was run once in isolation -->
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/TestFixture" SourceName="Delivery/UnitTests/Objects/TestFixture"/>
        </Bindings>
    </Part>

    <Part Name="UnitTests-NonPublished" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=NonPublished">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="TestFixtureForUnitTests" />
        <SubPart PartName="BackdoorForUnitTests"/> <!-- BuildTests.mke cannot be called in parallel because it always makes a static symlink; ensure it was run once in isolation -->
        
        <!-- Temporary while Mike Embick determines the feasibility of this library via unit tests. -->
        <!-- <SubPart PartName="GraphVizLibrary" PartFile="graphviz" Repository="libsrc-graphviz"/> -->
        
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/NonPublished" SourceName="Delivery/UnitTests/Objects/NonPublished"/>
        </Bindings>
    </Part>

    <Part Name="UnitTests-Performance" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Performance">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="TestFixtureForUnitTests" />
        <!-- Performance tests use DgnDbTestDgnManager, which is implemented in BackDoor -->
        <SubPart PartName="BackdoorForUnitTests"/> <!-- BuildTests.mke cannot be called in parallel because it always makes a static symlink; ensure it was run once in isolation -->
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/Performance" SourceName="Delivery/UnitTests/Objects/Performance"/>
        </Bindings>
    </Part>

    <Part Name="UnitTests-Published" BentleyBuildMakeFile="Tests/DgnProject/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Published -dUsePublishedApi">
        <SubPart PartName="BackdoorForUnitTests"/> <!-- BuildTests.mke cannot be called in parallel because it always makes a static symlink; ensure it was run once in isolation -->
        <SubPart PartName="PublishedApi" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="DgnPlatform/Published" SourceName="Delivery/UnitTests/Objects/Published"/>
        </Bindings>
    </Part>

    <!-- //////////////////////////////////////////////////////////////////////////// -->
    <!-- // L10N                                                                   // -->
    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <!-- English Xliffs generated during the build are pushed (by PRG only) to Mercurial next to translations for L10N vendor convenience -->
    <Part Name="L10N-DgnPlatformXliffs-en" OnlyPlatforms="x64"
        BentleyBuildMakeFile="${SrcRoot}bsicommon/sqlang/mki/PushXliffsFromBuild.mke"
        BentleyBuildMakeOptions="-dBUILD_XLIFF_DIRECTORY=$(OutputRootDir)BuildContexts/DgnPlatform/Delivery/xliffs/ -dL10N_XLIFF_DIRECTORY=$(SrcRoot)l10n/l10n-DgnPlatform/en/">
        <SubPart PartName="DgnPlatformDll"/>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-cs" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=cs">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/DgnCoreMessages_cs.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/DgnHandlersMessages_cs.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="cs" SubPartDirectory="l10n/cs">Delivery/l10n/cs/ForeignFormat_cs.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-de" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=de">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/DgnCoreMessages_de.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/DgnHandlersMessages_de.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="de" SubPartDirectory="l10n/de">Delivery/l10n/de/ForeignFormat_de.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-es" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=es">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/DgnCoreMessages_es.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/DgnHandlersMessages_es.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="es" SubPartDirectory="l10n/es">Delivery/l10n/es/ForeignFormat_es.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-fi" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fi">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/DgnCoreMessages_fi.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/DgnHandlersMessages_fi.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fi" SubPartDirectory="l10n/fi">Delivery/l10n/fi/ForeignFormat_fi.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-fr" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=fr">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/DgnCoreMessages_fr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/DgnHandlersMessages_fr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="fr" SubPartDirectory="l10n/fr">Delivery/l10n/fr/ForeignFormat_fr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-it" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=it">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/DgnCoreMessages_it.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/DgnHandlersMessages_it.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="it" SubPartDirectory="l10n/it">Delivery/l10n/it/ForeignFormat_it.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ja" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ja">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/DgnCoreMessages_ja.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/DgnHandlersMessages_ja.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ja" SubPartDirectory="l10n/ja">Delivery/l10n/ja/ForeignFormat_ja.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ko" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ko">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/DgnCoreMessages_ko.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/DgnHandlersMessages_ko.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ko" SubPartDirectory="l10n/ko">Delivery/l10n/ko/ForeignFormat_ko.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-nl" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=nl">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/DgnCoreMessages_nl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/DgnHandlersMessages_nl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="nl" SubPartDirectory="l10n/nl">Delivery/l10n/nl/ForeignFormat_nl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-pl" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pl">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/DgnCoreMessages_pl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/DgnHandlersMessages_pl.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pl" SubPartDirectory="l10n/pl">Delivery/l10n/pl/ForeignFormat_pl.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-pt" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=pt">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/DgnCoreMessages_pt.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/DgnHandlersMessages_pt.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="pt" SubPartDirectory="l10n/pt">Delivery/l10n/pt/ForeignFormat_pt.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-ru" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=ru">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/DgnCoreMessages_ru.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/DgnHandlersMessages_ru.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="ru" SubPartDirectory="l10n/ru">Delivery/l10n/ru/ForeignFormat_ru.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-sv" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=sv">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/DgnCoreMessages_sv.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/DgnHandlersMessages_sv.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="sv" SubPartDirectory="l10n/sv">Delivery/l10n/sv/ForeignFormat_sv.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-tr" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=tr">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/DgnCoreMessages_tr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/DgnHandlersMessages_tr.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="tr" SubPartDirectory="l10n/tr">Delivery/l10n/tr/ForeignFormat_tr.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-zh-cn" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-cn">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/DgnCoreMessages_zh-cn.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/DgnHandlersMessages_zh-cn.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-cn" SubPartDirectory="l10n/zh-cn">Delivery/l10n/zh-cn/ForeignFormat_zh-cn.xliff</Files>
        </Bindings>
    </Part>

    <!-- Translated Xliffs are linked into the BuildContext here -->
    <Part Name="L10N-DgnPlatformXliffs-zh-tw" BentleyBuildMakeFile="l10n-DgnPlatform.mke" BentleyBuildMakeOptions="-dL10N_LANGUAGE_TAG=zh-tw">
        <RequiredRepository>l10n-DgnPlatform</RequiredRepository>
        <Bindings>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/DgnCoreMessages_zh-tw.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/DgnHandlersMessages_zh-tw.xliff</Files>
            <Files ProductDirectoryName="L10N-DgnPlatformXliffs" Required="false" ProductSubDirectory="zh-tw" SubPartDirectory="l10n/zh-tw">Delivery/l10n/zh-tw/ForeignFormat_zh-tw.xliff</Files>
        </Bindings>
    </Part>

    <!-- Define a test collection part-->
    <Part Name="Tests">
        <SubPart PartName="UnitTests-NonPublished"/>
        <SubPart PartName="UnitTests-Published"/>
    </Part>

    <!-- Define a gtest program to run the tests -->
    <Product Name="DgnPlatform-Tests">
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="Tests"/>
        <SubPart PartName="DgnPlatformSqlang" />
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest"  PartFile="BeGTest"/>
    </Product>

    <Part Name="Gtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGtest.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPlatformTest -dTEST_COLLECTION_PRODUCT=DgnPlatform-Tests -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3" OnlyPlatforms="x86,x64,Linux*,MacOS*">
        <SubProduct ProductName="DgnPlatform-Tests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/DgnPlatformTest/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/DgnPlatformTest/Assets" />
        </Bindings>
    </Part>

    <Product Name="DgnPlatform-Gtest" >
        <SubPart PartName="Gtest"/>
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RunGtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_EXE=$(OutputRootDir)Product/DgnPlatform-Gtest/DgnPlatformTest -dGTEST_OUTPUT_DIR=$(OutputRootDir)build/DgnPlatform" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="DgnPlatform-Gtest" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
    </Part>

    <!-- ********************** -->
    <!-- **** AndroidJUnit **** -->
    <!-- ********************** -->
    <Part Name="AndroidJUnit" BentleyBuildMakeFile="${SrcRoot}BeGTest/Android/MakeJUnitTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPlatform -dTEST_COLLECTION_PRODUCT=DgnPlatform-Tests -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1 -dTEST_ANDROID_MIN_SDK_VERSION=19" OnlyPlatforms="Android*">
        <SubProduct ProductName="DgnPlatform-Tests"/>
        <SubPart PartName="AndroidJUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="AndroidJUnit-Project" SourceName="Delivery/ANJU/DgnPlatform/Project" />
        </Bindings>
    </Part>

    <Product Name="DgnPlatform-AndroidJUnit" >
        <SubPart PartName="AndroidJUnit" LibType="Static"/>
        <Directories DirectoryListName="AndroidJUnitProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RunAndroidJUnitTest" BentleyBuildMakeFile="${SrcRoot}BeGTest/Android/RunAndroidJUnitTest.mke" BentleyBuildMakeOptions="-dANDROIDJUNIT_PRODUCT=DgnPlatform-AndroidJUnit" OnlyPlatforms="Android*">
        <SubProduct ProductName="DgnPlatform-AndroidJUnit"/>
    </Part>

    <!-- ********************** -->
    <!-- **** iOSXCTest **** -->
    <!-- ********************** -->
    <Part Name="iOSXCTest" BentleyBuildMakeFile="${SrcRoot}BeGTest/iOS/MakeXCTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPlatform -dTEST_COLLECTION_PRODUCT=DgnPlatform-Tests -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="iOS*">
        <SubProduct ProductName="DgnPlatform-Tests"/>
        <SubPart PartName="iOSXCTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="iOSXCTestProject" SourceName="Delivery/iOSXCTest/DgnPlatform/Project" />
        </Bindings>
    </Part>

    <Product Name="DgnPlatform-iOSXCTest" >
        <SubPart PartName="iOSXCTest" LibType="Static"/>
        <Directories DirectoryListName="iOSXCTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part Name="RuniOSXCTest" BentleyBuildMakeFile="${SrcRoot}BeGTest/iOS/RunXCTestProject.mke" BentleyBuildMakeOptions="-dXCTEST_PRODUCT=DgnPlatform-iOSXCTest" OnlyPlatforms="iOS*">
        <SubProduct ProductName="DgnPlatform-iOSXCTest"/>
    </Part>

    <!-- *********************************************************** -->
    <!-- **** UWP Microsoft::VisualStudio::CppUnitTestFramework **** -->
    <!-- *********************************************************** -->
    <!-- N.B. ApiNumber is important here because we must manually reference some DLLs, and thus need an accruate suffix to find them. -->
    <Part
        Name="UwpTest"
        BentleyBuildMakeFile="${SrcRoot}BeGTest/uwp/MakeUwpTestProject.mke"
        BentleyBuildMakeOptions="-dTEST_NAME=DgnPlatform -dTEST_COLLECTION_PRODUCT=DgnPlatform-Tests"
        OnlyPlatforms="WinRT*"
        ApiNumber="G06"
        >
        <SubProduct ProductName="DgnPlatform-Tests"/>
        <SubPart PartName="UwpTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="UwpTestProject" SourceName="Delivery/UwpTest/DgnPlatform/Project" />
        </Bindings>
    </Part>

    <Product Name="DgnPlatform-UwpTest">
        <SubPart PartName="UwpTest"/>
        <Directories DirectoryListName="UwpTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Part
        Name="RunUwpTest"
        BentleyBuildMakeFile="${SrcRoot}BeGTest/uwp/RunUwpTestProject.mke"
        BentleyBuildMakeOptions="-dUWPTEST_PRODUCT=DgnPlatform-UwpTest"
        OnlyPlatforms="WinRT*"
        >
        <SubProduct ProductName="DgnPlatform-UwpTest"/>
    </Part>

    <!-- ******************************************************************************************* -->
    <!-- ******************* "NoView" Tests - all tests up through DgnPlatform ********************* -->
    <!-- ******************************************************************************************* -->

    <Part Name="DgnPlatformNoViewTested">
        <SubPart PartName="RunGtest-TestCollection-NoView" />
        <SubProduct ProductName="iOSXCTest-DgnPlatform-TestCollection-NoView"/>
        <SubProduct ProductName="AndroidJUnit-DgnPlatform-TestCollection-NoView"/>
        <SubProduct ProductName="WinRTCppUnitTest-DgnPlatform-TestCollection-NoView"/>
    </Part>

    <!-- Define a collection of tests that don't require QV. That excludes, DgnDisplay and DgnClientFx -->
    <Part Name="TestCollection-NoView">
        <SubPart Repository="Bentley"               PartFile="Bentley"          PartName="Tests" />
        <SubPart Repository="GeomLibs"              PartFile="geomlibs"         PartName="Tests" />
        <SubPart Repository="BeSQLite"              PartFile="BeSQLite"         PartName="Tests" />
        <SubPart Repository="ECDb"                  PartFile="ECDb"             PartName="Tests" />
        <SubPart Repository="DgnPlatform"           PartFile="DgnPlatform"      PartName="Tests" />
        <!-- Pull in the dgnplatform's db3 file to serve as the "framework" sqlang for testing purposes -->
        <SubPart PartName="DgnPlatformSqlang"            Repository="DgnPlatform" PartFile="DgnPlatform"/>
    </Part>

    <Product Name="DgnPlatform-TestCollection-NoView">
        <SubPart PartName="Base" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="TestCollection-NoView-Dynamic"/>
        <SubPart PartName="TestCollection-NoView-Static" />
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!-- (There must be a static and a dynamic version to support how we build for the various platforms.) -->
    <Part Name="TestCollection-NoView-Dynamic" OnlyPlatforms="x86,x64,Linux*,MacOS*,WinRT*">
        <SubPart PartName="TestCollection-NoView"/>
    </Part>

    <Part Name="TestCollection-NoView-Static" ExcludePlatforms="x86,x64,Linux*,MacOS*,WinRT*">
        <SubPart PartName="TestCollection-NoView" LibType="Static" />
    </Part>

    <!--                *************** -->
    <!--                **** gtest **** -->
    <!--                *************** -->
    <Part Name="Gtest-TestCollection-NoView" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGtest.mke" BentleyBuildMakeOptions="-dTEST_NAME=NoViewTests -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-NoView -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="DgnPlatform-TestCollection-NoView"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/NoViewTests/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/NoViewTests/Assets" />
        </Bindings>
    </Part>

    <Product Name="Gtest-DgnPlatform-TestCollection-NoView">
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="Gtest-TestCollection-NoView"/>
    </Product>

    <Part Name="RunGtest-TestCollection-NoView" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_EXE=$(OutputRootDir)Product/Gtest-DgnPlatform-TestCollection-NoView/NoViewTests -dGTEST_OUTPUT_DIR=$(OutputRootDir)build/TestCollection-NoView" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="Gtest-DgnPlatform-TestCollection-NoView" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
    </Part>

    <!--                ********************** -->
    <!--                **** AndroidJUnit **** -->
    <!--                ********************** -->
    <Part Name="AndroidJUnit-TestCollection-NoView" BentleyBuildMakeFile="${SrcRoot}BeGTest/Android/MakeJUnitTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=NoViewTests -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-NoView -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1 -dTEST_ANDROID_MIN_SDK_VERSION=19" OnlyPlatforms="Android*">
        <SubProduct ProductName="DgnPlatform-TestCollection-NoView"/>
        <SubPart PartName="AndroidJUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="AndroidJUnit-Project" SourceName="Delivery/ANJU/NoViewTests/Project" />
        </Bindings>
    </Part>

    <Product Name="AndroidJUnit-DgnPlatform-TestCollection-NoView" >
        <SubPart PartName="AndroidJUnit-TestCollection-NoView" LibType="Static"/>
        <Directories DirectoryListName="AndroidJUnitProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!--                ********************** -->
    <!--                **** iOSXCTest **** -->
    <!--                ********************** -->
    <Part Name="iOSXCTest-TestCollection-NoView" BentleyBuildMakeFile="${SrcRoot}BeGTest/iOS/MakeXCTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=NoViewTests -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-NoView -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="iOS*">
        <SubProduct ProductName="DgnPlatform-TestCollection-NoView"/>
        <SubPart PartName="iOSXCTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="iOSXCTestProject" SourceName="Delivery/iOSXCTest/NoViewTests/Project" />
        </Bindings>
    </Part>

    <Product Name="iOSXCTest-DgnPlatform-TestCollection-NoView" >
        <!-- *** TRICKY: Must depend on a part in begtest repository, in order to use a productdirectorylist from there. -->
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="iOSXCTest-TestCollection-NoView" LibType="Static"/>
        <Directories DirectoryListName="iOSXCTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!--                ************************** -->
    <!--                **** WinRTCppUnitTest **** -->
    <!--                ************************** -->
    <Part Name="WinRTCppUnitTest-TestCollection-NoView" BentleyBuildMakeFile="${SrcRoot}BeGTest/WinRT/MakeCppUnitProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=NoViewTests -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-NoView -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="WinRT*">
        <SubProduct ProductName="DgnPlatform-TestCollection-NoView"/>
        <SubPart PartName="WinRTCppUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="WinRTCppUnitTestProject" SourceName="Delivery/WnRTCpU/NoViewTests/Project" />
        </Bindings>
    </Part>

    <Product Name="WinRTCppUnitTest-DgnPlatform-TestCollection-NoView" >
        <SubPart PartName="WinRTCppUnitTest-TestCollection-NoView" LibType="Static"/>
        <Directories DirectoryListName="WinRTCppUnitTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!-- ********************************************************************************************** -->
    <!-- Performance Tests (up through DgnPlatform) -->
    <!-- ********************************************************************************************** -->

    <Part Name="DgnPlatformPerformanceTested">
        <SubPart PartName="RunGtest-TestCollection-Performance" />
        <SubProduct ProductName="iOSXCTest-DgnPlatform-TestCollection-Performance"/>
        <SubProduct ProductName="AndroidJUnit-DgnPlatform-TestCollection-Performance"/>
    </Part>


    <!-- Define the collection of performance tests. -->
    <Part Name="TestCollection-Performance">
        <SubPart PartName="Base" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="UnitTests-Performance"        Repository="ECDb" PartFile="ECDb"/>
        <SubPart PartName="UnitTests-Performance"        Repository="Bentley" PartFile="Bentley"/>
        <SubPart PartName="UnitTests-Performance"        Repository="DgnPlatform" PartFile="DgnPlatform"/>
        <SubPart PartName="PerformanceTests"             Repository="ecobjects" PartFile="ECObjects"/>
        <SubPart PartName="UnitTests-PerformanceTest"        Repository="geomlibs" PartFile="geomlibs"/>
        <!-- Pull in the dgnplatform's db3 file to serve as the "framework" sqlang for testing purposes -->
        <SubPart PartName="DgnPlatformSqlang"            Repository="DgnPlatform" PartFile="DgnPlatform"/>
    </Part>

    <!-- Define dynamic and static versions of the test collection -->
    <Part Name="TestCollection-Performance-Dynamic" OnlyPlatforms="x86,x64,Linux*,MacOS*,WinRT*">
        <SubPart PartName="TestCollection-Performance"/>
    </Part>

    <Part Name="TestCollection-Performance-Static" ExcludePlatforms="x86,x64,Linux*,MacOS*,WinRT*">
        <SubPart PartName="TestCollection-Performance" LibType="Static" />
    </Part>

    <Product Name="DgnPlatform-TestCollection-Performance">
        <SubPart PartName="Base" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="TestCollection-Performance-Dynamic"/>
        <SubPart PartName="TestCollection-Performance-Static" />
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!--                *************** -->
    <!--                **** gtest **** -->
    <!--                *************** -->
    <Product Name="GTest-DgnPlatform-TestCollection-Performance">
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
        <SubPart PartName="Gtest-TestCollection-Performance"/>
    </Product>

    <Part Name="Gtest-TestCollection-Performance" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGtest.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPerformance -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-Performance -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3" OnlyPlatforms="x86,x64,Linux*,MacOS*">
        <SubProduct ProductName="DgnPlatform-TestCollection-Performance"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/DgnPerformance/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/DgnPerformance/Assets" />
        </Bindings>
    </Part>

    <Part Name="RunGtest-TestCollection-Performance" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_EXE=$(OutputRootDir)Product/Gtest-DgnPlatform-TestCollection-Performance/DgnPerformance -dGTEST_OUTPUT_DIR=$(OutputRootDir)build/DgnPerformance" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="Gtest-DgnPlatform-TestCollection-Performance" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
    </Part>

    <!-- This part is only needed for analysis of Performance test results with previous benchmarks-->
    <Part Name="RunPerformanceSummary" BentleyBuildMakeFile="${SrcRoot}BeGTest/scripts/RunPerformanceSummary.mke" BentleyBuildMakeOptions="-dGTEST_OUTPUT_DIR=$(OutputRootDir)Product/Gtest-DgnPlatform-TestCollection-Performance" OnlyPlatforms="x86,x64">
    </Part>
  
    <!--                ********************** -->
    <!--                **** AndroidJUnit **** -->
    <!--                ********************** -->
    <Part Name="AndroidJUnit-TestCollection-Performance" BentleyBuildMakeFile="${SrcRoot}BeGTest/Android/MakeJUnitTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPerformance -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-Performance -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1  -dTEST_ANDROID_MIN_SDK_VERSION=19" OnlyPlatforms="Android*">
        <SubProduct ProductName="DgnPlatform-TestCollection-Performance"/>
        <SubPart PartName="AndroidJUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="AndroidJUnit-Project" SourceName="Delivery/ANJU/DgnPerformance/Project" />
        </Bindings>
    </Part>

    <Product Name="AndroidJUnit-DgnPlatform-TestCollection-Performance" >
        <SubPart PartName="AndroidJUnit-TestCollection-Performance" LibType="Static"/>
        <Directories DirectoryListName="AndroidJUnitProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!--                ********************** -->
    <!--                **** iOSXCTest **** -->
    <!--                ********************** -->
    <Part Name="iOSXCTest-TestCollection-Performance" BentleyBuildMakeFile="${SrcRoot}BeGTest/iOS/MakeXCTestProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPerformance -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-Performance -dTEST_FRAMEWORK_SQLANG=DgnPlatform_en.sqlang.db3 -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="iOS*">
        <SubProduct ProductName="DgnPlatform-TestCollection-Performance"/>
        <SubPart PartName="iOSXCTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="iOSXCTestProject" SourceName="Delivery/iOSXCTest/DgnPerformance/Project" />
        </Bindings>
    </Part>

    <Product Name="iOSXCTest-DgnPlatform-TestCollection-Performance" >
        <SubPart PartName="iOSXCTest-TestCollection-Performance" LibType="Static"/>
        <Directories DirectoryListName="iOSXCTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <!--                ************************** -->
    <!--                **** WinRTCppUnitTest **** -->
    <!--                ************************** -->
    <Part Name="WinRTCppUnitTest-TestCollection-Performance" BentleyBuildMakeFile="${SrcRoot}BeGTest/WinRT/MakeCppUnitProject.mke" BentleyBuildMakeOptions="-dTEST_NAME=DgnPerformance -dTEST_COLLECTION_PRODUCT=DgnPlatform-TestCollection-Performance -dUSE_STATIC_LIBRARIES=1" OnlyPlatforms="WinRT*">
        <SubProduct ProductName="DgnPlatform-TestCollection-Performance"/>
        <SubPart PartName="WinRTCppUnitTest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        <Bindings>
            <Directory ProductDirectoryName="WinRTCppUnitTestProject" SourceName="Delivery/WnRTCpU/DgnPerformance/Project" />
        </Bindings>
    </Part>

    <Product Name="WinRTCppUnitTest-DgnPlatform-TestCollection-Performance" >
        <SubPart PartName="WinRTCppUnitTest-TestCollection-Performance" LibType="Static"/>
        <Directories DirectoryListName="WinRTCppUnitTestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

</BuildContext>
