#----------------------------------------------------------------------------------------
#
#  $Source: test/BuildTests.mke $
#
#  $Copyright: (c) 2016 Bentley Systems, Incorporated. All rights reserved. $
#
#----------------------------------------------------------------------------------------
NO_DEFAULT_CLANG_WARNINGS=1

%include mdl.mki


baseDir = $(_MakeFilePath)

# Compile and Link the unit tests
BEGTEST_NAME  = Units
BEGTEST_INPUT = $(baseDir)
BEGTEST_OUTPUT=$(OutputRootDir)build/Units/UnitTests/
BEGTEST_IGNORE= $(baseDir)ignore_list.txt
o = $(BEGTEST_OUTPUT)$(BEGTEST_NAME)/

%ifdef UsePublishedApi
    BEGTEST_API = $(BuildContext)PublicAPI/
%endif

%include $(SrcRoot)bsicommon/sharedmki/DetectAndCompileUnitTests.mki

# Deliver 
$(BuildContext)Delivery/UnitTests/Objects/UnitTests : ${o}
    $(LinkFirstDepToFirstTargetAsDirectory)
