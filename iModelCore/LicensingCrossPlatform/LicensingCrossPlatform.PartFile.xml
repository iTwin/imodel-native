<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <Part Name="PublicAPI" BentleyBuildMakeFile="DeliverPublicAPI.mke">
        <Bindings>
            <PublicAPI Domain="Licensing"/>
        </Bindings>
    </Part>

    <Part Name="LicensingNativeLib" BentleyBuildMakeFile="Licensing.mke" >
        <SubPart PartName="WebServicesClient" PartFile="WSClient" Repository="WSClient" />
        <SubPart PartName="BeSQLite" PartFile="BeSQLite" Repository="BeSQLite" /> 
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BeSecurity" PartFile="BeSecurity" Repository="BeSecurity"/>
        
        <Bindings>
            <Libs>Delivery/$(libprefix)Licensing$(libext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)Licensing$(shlibext)</Assemblies>
        </Bindings>
    </Part>
	
    <Part Name="Licensing" >
        <SubPart PartName="Licensing-Winx64-Only" />
        <SubPart PartName="Licensing-iOSARMActive-Only" />
        <SubPart PartName="Licensing-iOSARM64-Only" />
        <SubPart PartName="Licensing-AndroidARM64-Only" LibType="Static" />
    </Part>

    <Part Name="Licensing-Winx64-Only" OnlyPlatforms="x64">
        <SubPart PartName="LicensingNativeLib" LibType="Dynamic" />
    </Part>

    <Part Name="Licensing-iOSARMActive-Only" OnlyPlatforms="iOSARMActive">
        <SubPart PartName="LicensingNativeLib" LibType="Static" />
    </Part>

    <Part Name="Licensing-iOSARM64-Only" OnlyPlatforms="iOSARM64">
        <SubPart PartName="LicensingNativeLib" LibType="Static" />
    </Part>

    <Part Name="Licensing-AndroidARM64-Only" OnlyPlatforms="AndroidARM64">
        <SubPart PartName="LicensingNativeLib" LibType="Static" />
    </Part>

	<Part Name="PrewireForUnitTests" DeferType="BuildUnitTests" BentleyBuildMakeFile="Tests/UnitTests/Prewire.mke">
        <Bindings>
            <Files ProductDirectoryName="UnitTests-IgnoreList" ProductSubDirectory="Licensing" SubPartDirectory="UnitTests/Licensing">Delivery/UnitTests/ignore_list.txt</Files>
        </Bindings>
    </Part>
	
    <Part Name="UnitTests" DeferType="BuildUnitTests" BentleyBuildMakeFile="Tests/UnitTests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=Published">
        <SubPart PartName="PrewireForUnitTests" />
        <SubPart PartName="Licensing" />
        
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects" ProductSubDirectory="Licensing/Published" SourceName="Delivery/UnitTests/Objects/Published"/>
        </Bindings>
    </Part>
	
	<Product Name="Licensing-Tests">
        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="UnitTests"/>
        <Directories DirectoryListName="CollectionProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>
	
	<Part Name="Gtest" DeferType="BuildUnitTests" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGTest.mke" BentleyBuildMakeOptions="-dTEST_NAME=LicensingTest -dTEST_COLLECTION_PRODUCT=Licensing-Tests" OnlyPlatforms="x86,x64,Linux*,MacOS*,Android*">
        <SubProduct ProductName="Licensing-Tests"/>
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/LicensingTest/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/LicensingTest/Assets" />
        </Bindings>
    </Part>
	
    <Part Name="RunGtest" DeferType="RunUnitTests" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=Licensing-Gtest -dGTEST_NAME=LicensingTest" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="Licensing-Gtest" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest"/>
        
        <Bindings>
          <Files Required="false" SubPartDirectory="Gtest/Logs">Delivery/Gtest/Logs/LicensingTest.log</Files>
        </Bindings>
    </Part>
    
	<Product Name="Licensing-Gtest" >
        <SubPart PartName="Gtest"/>
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest"/>
    </Product>

    <Product Name="LicenseClientCrossPLatform" PrgOutputDir="LicenseClientCrossPlatform" SaveProduct="true" SaveTranskit="true">
        <SubPart PartName="Licensing"/>
        <Directories DirectoryListName="LicenseClientCrossPlatform"/>

        <SubProduct ProductName="Licensing-Gtest"/>
        <SubPart PartName="RunGtest"/>
    </Product>

    <ProductDirectoryList ListName="LicenseClientCrossPlatform">
        <ProductDirectory Name="Assemblies" Deliver="true"/>
        <ProductDirectory Name="Assemblies" Deliver="true" LibType="Static"/>
        <ProductDirectory Name="Assets" Deliver="true"/>
        <ProductDirectory Name="VendorNotices" Deliver="false"/>
        <ProductDirectory Name="VendorNotices" Deliver="false" LibType="Static"/>
    </ProductDirectoryList>
    
</BuildContext>
