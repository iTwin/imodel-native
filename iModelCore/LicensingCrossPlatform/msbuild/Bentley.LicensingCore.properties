<!--====================================================================================+
|
* Copyright (c) Bentley Systems, Incorporated. All rights reserved.
* See COPYRIGHT.md in the repository root for full copyright notice.
+=====================================================================================-->
<!--
***********************************************************************************************
***********************************************************************************************
-->

<Project InitialTargets="LicenseCorePropertiesInitialTarget" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <Target Name="LicenseCorePropertiesInitialTarget" >
        <Message Importance="high" Text="[== Importing Bentley.LicensingCore.properties ==]"/> <!-- Condition="''!='$(TraceImports)'"/>-->

        <Message Importance="high" Text="[== Internal.System.targets: TARGET_PROCESSOR_ARCHITECTURE = $(TARGET_PROCESSOR_ARCHITECTURE) ==]"/> <!-- Condition="''!='$(TraceImports)'"/>-->
        <Message Importance="high" Text="[== Internal.System.targets: PlatformTarget = $(PlatformTarget) ==]"/> <!-- Condition="''!='$(TraceImports)'"/>-->
        <Message Importance="high" Text="[== Internal.System.targets: OutputType = $(OutputType) ==]"/> <!-- Condition="''!='$(TraceImports)'"/>-->
        <Message Importance="high" Text="[== Bentley.System.Properties: Configuration = $(Configuration) ==]"/> <!-- Condition="''!='$(TraceImports)'"/>-->
        <Message Importance="high" Text=" "/><!-- Condition="''!='$(TraceImports)'"/>-->

    </Target>

    <!-- Turn on the features of our platform System layer that we want for ECFramework. -->
    <PropertyGroup>
        <GenerateAssemblyInfoSourceFromProperties Condition="''=='$(GenerateAssemblyInfoSourceFromProperties)'">true</GenerateAssemblyInfoSourceFromProperties>
        <StrongNameAssembliesByDefault Condition="''=='$(StrongNameAssembliesByDefault)'">true</StrongNameAssembliesByDefault>
        <ApplyStrongNameSignaturePostLink Condition="''=='$(ApplyStrongNameSignaturePostLink)'">true</ApplyStrongNameSignaturePostLink>
        <InjectVersion Condition="''=='$(InjectVersion)'">true</InjectVersion>
        <ProduceTranskitConfigFile Condition="''=='$(ProduceTranskitConfigFile)'">false</ProduceTranskitConfigFile>
    </PropertyGroup>

    <PropertyGroup>
        <SrcLC>$(SrcRoot)Licensing\</SrcLC>

        <!-- BUILD -->
        <BuildPath>$(OutMySELECTPath)build\</BuildPath>
        <BuildBinPath>$(BuildPath)bin\</BuildBinPath>
        <!--<BuildBinPath>$(BuildPath)bin\$(MSBuildProjectName)\</BuildBinPath>-->
        <BuildObjPath>$(BuildPath)obj\$(MSBuildProjectName)\</BuildObjPath>
        <BuildBootstrapperPath>$(BuildPath)Bootstrapper\</BuildBootstrapperPath>
        <BuildCustomActionsPath>$(BuildPath)customactions\</BuildCustomActionsPath>
        <BuildInstallerPath>$(BuildPath)Installer\</BuildInstallerPath>
        <!-- DELIVERY -->
        <DeliveryPath>$(OutMySELECTPath)delivery\</DeliveryPath>
        <DeliveryBinPath>$(DeliveryPath)bin\</DeliveryBinPath>
        <DeliveryApiPath>$(DeliveryPath)api\</DeliveryApiPath>
        <DeliveryDocPath>$(DeliveryPath)doc\</DeliveryDocPath>
        <DeliveryWebPath>$(DeliveryPath)web\</DeliveryWebPath>
        <!-- EXTRAS -->
        <ExtrasPath>$(OutMySELECTPath)extras\</ExtrasPath>
        <ExtrasToolsPath>$(ExtrasPath)tools\</ExtrasToolsPath>
        <ExtrasToolsBinPath>$(ExtrasPath)tools\$(MSBuildProjectName)\</ExtrasToolsBinPath>
        <ExtrasAPIServiceClientPath>$(ExtrasPath)APIServiceClient\</ExtrasAPIServiceClientPath>
        <ExtrasSymbolsPath>$(ExtrasPath)symbols\</ExtrasSymbolsPath>
        <ExtrasTranskitPath>$(ExtrasPath)transkit\</ExtrasTranskitPath>
        <ExtrasTranskitDocsPath>$(ExtrasTranskitPath)docs\</ExtrasTranskitDocsPath>
        <ExtrasTranskitLanguagesPath>$(ExtrasTranskitPath)languages\</ExtrasTranskitLanguagesPath>
        
        <!-- ATPS -->
        <NunitAtpPath>$(ExtrasPath)atps\nunit\</NunitAtpPath>


    </PropertyGroup>

    <PropertyGroup>
        <AssemblyName Condition="''=='$(AssemblyName)'">$(ASSEMBLY_NAME)</AssemblyName>
        <AssemblyProductAttribute Condition="''=='$(AssemblyProductAttribute)'">CONNECT License Client</AssemblyProductAttribute>
        <ReferencePath>$(BM-ContextDeliveryDir);$(BM-ContextSubPartsAssembliesDir)</ReferencePath>
    </PropertyGroup>
    
    <PropertyGroup>
        <!-- These are for projects that are NOT using msbuild entirely, but still want to avoid setting ReferencePath explicitly in every project -->
        <DEFAULT_TARGET_PROCESSOR_ARCHITECTURE Condition="'$(DEFAULT_TARGET_PROCESSOR_ARCHITECTURE)' == ''">x64</DEFAULT_TARGET_PROCESSOR_ARCHITECTURE>
        <ContextSubPartsAssembliesDir Condition="'$(ContextSubPartsAssembliesDir)'==''">$(OutRoot)Win$(DEFAULT_TARGET_PROCESSOR_ARCHITECTURE)\BuildContexts\Licensing\SubParts\Assemblies\</ContextSubPartsAssembliesDir>
        <ContextDeliveryDir Condition="'$(ContextDeliveryDir)'==''">$(OutRoot)Win$(DEFAULT_TARGET_PROCESSOR_ARCHITECTURE)\BuildContexts\Licensing\Delivery\</ContextDeliveryDir>
        <nunitDir Condition="'$(nunitDir)'==''">$(OutRoot)Win$(DEFAULT_TARGET_PROCESSOR_ARCHITECTURE)\BuildContexts\Licensing\SubParts\nunit_2.6.4\</nunitDir>
        <ReferencePath>$(ContextDeliveryDir);$(ContextSubPartsAssembliesDir);$(nunitDir)</ReferencePath>
    </PropertyGroup>

</Project>

