<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../bsicommon/build/PartFile.xsd">

    <!-- The delivers the "Napi/napi.h" source files. -->
    <Part Name="VendorAPI" BentleyBuildMakeFile="prewire-api.mke">
        <SubPart PartName="BentleyLib" PartFile="iModelCore/Bentley/Bentley"/>
        <Bindings>
            <VendorAPI Domain="Napi"/>
        </Bindings>
    </Part>

    <Part Name="node-lib" BentleyBuildMakeFile="prewire-lib.mke" OnlyPlatforms="x64">
        <Bindings>
            <Files Required="false" SubPartDirectory="nodelib">Delivery/node.lib</Files>
        </Bindings>
    </Part>

    <Part Name="napi-lib" BentleyBuildMakeFile="node-addon-lib.mke">
        <SubPart PartName="VendorAPI"/>
        <SubPart PartName="node-lib"/>
        <Bindings>
            <Libs>Delivery/$(stlibprefix)napi$(stlibext)</Libs>
        </Bindings>
    </Part>

    <!-- bind the Node version of napi.dll on Windows only -->
    <Part Name="napi-dll-win" OnlyPlatforms="x64,winrt*">
        <SubPart PartName="napi-lib" />
        <Bindings>
            <Files ProductDirectoryName="Assemblies">Delivery/Node/napi.dll</Files>
        </Bindings>
    </Part>

    <!-- Only Tests and parts that DON'T want to run JavaScript should use this part. It binds the stub .dll/.a file -->
    <Part Name="napi-stub">
        <SubPart PartName="napi-lib"/>
        <Bindings>
            <Assemblies>Delivery/$(shlibprefix)napi$(shlibext)</Assemblies>
        </Bindings>
    </Part>

</BuildContext>
