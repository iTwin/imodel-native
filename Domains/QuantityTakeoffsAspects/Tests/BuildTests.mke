#---------------------------------------------------------------------------------------------
#  Copyright (c) Bentley Systems, Incorporated. All rights reserved.
#  See COPYRIGHT.md in the repository root for full copyright notice.
#---------------------------------------------------------------------------------------------
%include mdl.mki

%ifndef TestDir
    %error must define TestDir
%endif

baseDir = $(_MakeFilePath)

BEGTEST_IGNORE= $(baseDir)ignore_list.txt

# Compile and Link the unit tests
%warn $(TestDir)
BEGTEST_NAME  = $(TestDir)BuildingSpatial
BEGTEST_INPUT = $(baseDir)$(TestDir)/


BEGTEST_OUTPUT=$(OutputRootDir)build/QuantityTakeoffsAspects/UnitTests/
o = $(BEGTEST_OUTPUT)$(BEGTEST_NAME)/

# ignore: local variable is initialized but not referenced
CCompOpts + -wd4189

%include $(SrcRoot)bsicommon/sharedmki/DetectAndCompileUnitTests.mki

# Deliver 
$(BuildContext)Delivery/UnitTests/Objects/$(TestDir) : ${o}
    $(LinkFirstDepToFirstTargetAsDirectory)

SQLANG_OutputDb = $(o)QuantityTakeoffsAspects_en.sqlang.db3
SQLANG_DeliveryDir = $(ContextDeliveryDir)
SQLANG_XliffWildcard = $(BuildContext)SubParts/xliffs/*.xliff
%include $(SrcRoot)bsicommon/sqlang/mki/XliffsToDb.mke
