<?xml version="1.0" encoding="UTF-8"?>
<!-- =====================================================================================
|
|     $Source: Grids/Grids.ecschema.xml $
|
|  $Copyright: (c) 2017 Bentley Systems, Incorporated. All rights reserved. $
|
======================================================================================= -->
<ECSchema schemaName="Grids" nameSpacePrefix="grids" version="01.00" xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.0">
    <ECSchemaReference name="Bentley_Standard_CustomAttributes" version="01.10" prefix="bsca" />
    <ECSchemaReference name="EditorCustomAttributes" version="01.00" prefix="beca" />
    <ECSchemaReference name="BisCore" version="01.00" prefix="bis" />



    <ECRelationshipClass typeName="GridIntersectsGridSurface" strength="referencing">
      <BaseClass>bis:ElementRefersToElements</BaseClass>
      <Source cardinality="(1,1)" polymorphic="true">
        <Class class="Grid"/>
      </Source>
      <Target cardinality="(1,1)" polymorphic="true">
        <Class class="GridSurface"/>
      </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="GridSurfaceCreatesGridCurve" strength="referencing">
      <BaseClass>bis:ElementDrivesElement</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00"/>
      </ECCustomAttributes>
      <Source cardinality="(0,N)" polymorphic="true">
        <Class class="GridSurface"/>
      </Source>
      <Target cardinality="(0,N)" polymorphic="true">
        <Class class="GridCurve"/>
      </Target>
      <ECProperty propertyName="IsBaseSurface" typeName="boolean" description="whether the surface is the base on which others are imprinted"/>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="GridHasAxes" strength="embedding" modifier="None">
      <!-- Relationship that indicates a decomposition of child AllocatedVolume -->
      <Source multiplicity="(0..1)" roleLabel="Has Axis" polymorphic="true">
        <Class class="Grid"/>
      </Source>
      <Target multiplicity="(0..*)" roleLabel="is axis of" polymorphic="true">
        <Class class="GridAxis"/>
      </Target>
    </ECRelationshipClass>

    <ECRelationshipClass typeName="GridAxisContainsGridSurfaces" strength="referencing" strengthDirection="backward">
      <Source cardinality="(1,1)" polymorphic="true">
        <Class class="GridAxis"/>
      </Source>
      <Target cardinality="(1,N)" polymorphic="true">
        <Class class="GridSurface"/>
      </Target>
    </ECRelationshipClass>
  
    <ECEntityClass typeName="GridAxis">
      <BaseClass>bis:DefinitionElement</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
      <ECNavigationProperty propertyName="Grid" relationshipName="GridHasAxes" direction="Backward" description="Grid this axis belong to" />
    </ECEntityClass>
  
    <ECEntityClass typeName="GridCurve">
      <BaseClass>bis:SpatialLocationElement</BaseClass>
    </ECEntityClass>
  
  
    <ECEntityClass typeName="GridLine">
      <BaseClass>GridCurve</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="GridSpline">
      <BaseClass>GridCurve</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="GridArc">
      <BaseClass>GridCurve</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>
  
    <ECEntityClass typeName="GridSurface">
      <BaseClass>bis:SpatialLocationElement</BaseClass>
      <ECNavigationProperty propertyName="Axis" relationshipName="GridAxisContainsGridSurfaces" direction="Backward" description="Axis this gridSurface belong to" />
    </ECEntityClass>


    <ECEntityClass typeName="GridPlaneSurface">
      <BaseClass>GridSurface</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="GridArcSurface">
      <BaseClass>GridSurface</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="GridSplineSurface">
      <BaseClass>GridSurface</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="Grid">
      <BaseClass>bis:SpatialLocationPortion</BaseClass>
      <ECProperty propertyName="Normal" typeName="point3d" readOnly="True" description="normal vector of the grid"/>
    </ECEntityClass>


    <ECEntityClass typeName="PlanGrid">
      <BaseClass>bis:SpatialLocationPortion</BaseClass>
      <ECProperty propertyName="Normal" typeName="point3d" readOnly="True" description="normal vector of the grid"/>
    </ECEntityClass>
  
    <ECEntityClass typeName="OrthogonalGrid">
      <BaseClass>PlanGrid</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="RadialGrid">
      <BaseClass>PlanGrid</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="SketchGrid">
      <BaseClass>PlanGrid</BaseClass>
      <ECCustomAttributes>
        <ClassHasHandler xmlns="BisCore.01.00" />
      </ECCustomAttributes>
    </ECEntityClass>
  
</ECSchema>
