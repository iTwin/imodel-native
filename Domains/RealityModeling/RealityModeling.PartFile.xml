<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">


    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- ////////////////////////////   ScalableMesh       /////////////////////////////////// -->
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    
    <Part Name="ScalableMeshHandler" BMakeFile="ScalableMeshHandler/handler.mke">
        <SubPart PartName="ScalableMesh" PartFile="ScalableMesh" Repository="ScalableMesh" />
        <SubPart PartName="DgnPlatformDLL" PartFile="DgnPlatform" Repository="DgnPlatform" />
        <Bindings>
            <Libs>delivery/$(shlibprefix)ScalableMeshHandler$(libext)</Libs>
            <Assemblies ProductDirectoryName="RealityAssemblies">delivery/$(shlibprefix)ScalableMeshHandler$(shlibext)</Assemblies> 
            <PublicAPI Domain="ScalableMeshHandler" />
        </Bindings>
    </Part>
    
    <Part Name="ScalableMeshSchemaPublicAPI" BentleyBuildMakeFile="ScalableMeshSchema/ScalableMeshSchema.prewire.mke">
        <Bindings>
            <PublicAPI Domain="ScalableMeshSchema"/>
        </Bindings>
    </Part>

    <Part Name="ScalableMeshSchema" OnlyPlatforms="x86,x64" BentleyBuildMakeFile="ScalableMeshSchema/ScalableMeshSchema.mke" >
        <SubPart PartName="ScalableMeshSchemaPublicAPI"/>
        <SubPart PartName="ImagePP"         PartFile="ImagePP"      Repository="ImagePP" />
      <SubPart PartName="Core"         PartFile="TerrainModel"      Repository="TerrainModel" />
        <SubPart PartName="DgnPlatformDll"  PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <Bindings>
            <Assemblies ProductDirectoryName="RealityAssemblies">Delivery/$(shlibprefix)ScalableMeshSchema$(shlibext)</Assemblies>
            <Libs>Delivery/$(libprefix)ScalableMeshSchema$(libext)</Libs>
        </Bindings>
    </Part>  


    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- ////////////////////////////   PointCloudSchema   /////////////////////////////////// -->
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <Part Name="PointCloudSchemaPublicAPI" BentleyBuildMakeFile="PointCloudSchema/PointCloudSchema.prewire.mke">
        <Bindings>
            <PublicAPI Domain="PointCloudSchema"/>
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Domain" SubPartDirectory="ECSchemas/Domain">
                ECSchemas/Domain/PointCloud*.xml
            </Files>
        </Bindings>
    </Part>

    <Part Name="PointCloudSchema" OnlyPlatforms="x86,x64" BentleyBuildMakeFile="PointCloudSchema/PointCloudSchema.mke" >
        <SubPart PartName="PointCloudSchemaPublicAPI"/>
        <SubPart PartName="BePointCloud" PartFile="BePointCloud" Repository="BePointCloud" />
        <SubPart PartName="BentleyDll"      PartFile="Bentley"      Repository="Bentley" />
        <SubPart PartName="DgnPlatformDll"  PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <SubPart PartName="GeomDlls"        PartFile="geomlibs"     Repository="GeomLibs" />
        <!-- Need full data to decode EPSG code -->
        <SubPart PartName="GeoCoordData"    PartFile="csmap"        Repository="libsrc-csmap"/>
        <Bindings>
            <Assemblies ProductDirectoryName="PointCloudAssemblies">Delivery/PointCloudSchema.dll</Assemblies>
            <Libs>Delivery/PointCloudSchema.lib</Libs>
        </Bindings>
    </Part>

    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- ////////////////////////////     RasterSchema     /////////////////////////////////// -->
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <Part Name="RasterSchemaPublicAPI" BentleyBuildMakeFile="RasterSchema/RasterSchema.prewire.mke">
        <Bindings>
            <PublicAPI Domain="RasterSchema"/>
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Domain" SubPartDirectory="ECSchemas/Domain">
                ECSchemas/Domain/Raster*.xml
            </Files>
        </Bindings>
    </Part>

    <Part Name="RasterSchema" OnlyPlatforms="x86,x64,Android*" BentleyBuildMakeFile="RasterSchema/RasterSchema.mke" >
        <SubPart PartName="RasterSchemaPublicAPI"/>
        <SubPart PartName="ImagePP"         PartFile="ImagePP"      Repository="ImagePP" />
        <SubPart PartName="DgnPlatformDll"  PartFile="DgnPlatform"  Repository="DgnPlatform" />
        <!-- Need full data to decode EPSG code -->
        <SubPart PartName="GeoCoordData"    PartFile="csmap"        Repository="libsrc-csmap"/>
        <Bindings>
            <Assemblies ProductDirectoryName="RasterAssemblies">Delivery/$(shlibprefix)RasterSchema$(shlibext)</Assemblies>
            <Libs>Delivery/$(libprefix)RasterSchema$(libext)</Libs>
        </Bindings>
    </Part>    


    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
    <!-- ////////////////////////////   ThreeMx       /////////////////////////////////// -->
    <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
	    <Part Name="ThreeMxSchemaPublicAPI" BentleyBuildMakeFile="ThreeMxSchema/ThreeMxSchema.prewire.mke">
        <Bindings>
            <PublicAPI Domain="ThreeMxSchema"/>
            <Files ProductDirectoryName="ECSchemas" ProductSubDirectory="ECSchemas/Domain" SubPartDirectory="ECSchemas/Domain">
                ECSchemas/Domain/ThreeMx*.xml
            </Files>
        </Bindings>
    </Part>

    
    <Part Name="ThreeMxSchema" BMakeFile="ThreeMxSchema/ThreeMxSchema.mke">
        <SubPart PartName="DgnPlatformDLL" PartFile="DgnPlatform" Repository="DgnPlatform"/>
        <SubPart PartName="ThreeMxSchemaPublicAPI"/>
        <Bindings>
            <Assemblies ProductDirectoryName="ThreeMxAssemblies">Delivery/ThreeMxSchema.dll</Assemblies>
            <Libs>delivery/$(shlibprefix)ThreeMxSchema$(libext)</Libs>
        </Bindings>
    </Part>


</BuildContext>
