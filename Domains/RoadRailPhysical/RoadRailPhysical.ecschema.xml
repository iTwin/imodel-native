<?xml version="1.0" encoding="UTF-8"?>
<ECSchema schemaName="RoadRailPhysical" alias="rrphys" version="01.00.00" description="Base schema for the Road and Rail domains." xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.1">
    <ECSchemaReference name="CoreCustomAttributes" version="01.00.00" alias="CoreCA"/>
    <ECSchemaReference name="BisCore" version="01.00.00" alias="bis"/>
    <ECSchemaReference name="LinearReferencing" version="01.00.00" alias="lr"/>
    <ECSchemaReference name="RoadRailAlignment" version="01.00.00" alias="rralign"/>

    <ECEntityClass typeName="RoadwayStandardsModel">
        <BaseClass>bis:DefinitionModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <ECEntityClass typeName="IMainLinearElementSource" modifier="Abstract" description="An ILinearElementSource providing an ILinearElement considered as the main linear-referencing axis for Road/Rail purposes.">
        <BaseClass>lr:ILinearElementSource</BaseClass>
        <ECCustomAttributes>
            <IsMixin xmlns='CoreCustomAttributes.01.00'>
                <AppliesToEntityClass>bis:Element</AppliesToEntityClass>
            </IsMixin>
        </ECCustomAttributes>
        <ECNavigationProperty propertyName="MainLinearElement" relationshipName="ILinearElementSourceRefersToMainLinearElement" direction="Forward"/>
    </ECEntityClass>
    <ECRelationshipClass typeName="ILinearElementSourceRefersToMainLinearElement" strength="referencing" strengthDirection="Forward" modifier="Sealed">
        <Source multiplicity="(0..*)" polymorphic="true" roleLabel="refers to main">
            <Class class="IMainLinearElementSource"/>
        </Source>
        <Target multiplicity="(0..1)" polymorphic="true" roleLabel="main is referenced by">
            <Class class="lr:ILinearElement"/>
        </Target>
    </ECRelationshipClass>
    <ECEntityClass typeName="PathwayElement" modifier="Abstract" description="A long, narrow physical stretch specially constructed for a particular travel type." >
        <BaseClass>bis:PhysicalElement</BaseClass>
        <BaseClass>IMainLinearElementSource</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="Roadway" modifier="Sealed" displayLabel="Roadway" description="A Pathway with a smoothed or paved surface, made for traveling by motor vehicle, carriage, etc." >
        <BaseClass>PathwayElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="Railway" modifier="Sealed" displayLabel="Railway" description="A Pathway with a track or set of tracks along which passenger and freight trains run." >
        <BaseClass>PathwayElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="PathwayAssemblesElements" strength="embedding" modifier="Sealed">
        <BaseClass>bis:PhysicalElementAssemblesElements</BaseClass>
        <Source multiplicity="(0..1)" polymorphic="true" roleLabel="assembles">
            <Class class="PathwayElement"/>
        </Source>
        <Target multiplicity="(0..*)" polymorphic="true" roleLabel="is assembled by">
            <Class class="bis:PhysicalElement"/>
        </Target>
    </ECRelationshipClass>
    <ECEntityClass typeName="PathwayPortionElement" modifier="Abstract" description="Physical Portion of a Pathway.">
        <BaseClass>bis:PhysicalElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="TravelPortionElement" modifier="Abstract" description="A PathwayPortion specially constructed for continuous travel of a particular type.">
        <BaseClass>PathwayPortionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="TravelSeparationPortionElement" modifier="Abstract" description="A PathwayPortion specially constructed to separate two portions of continuous travel.">
        <BaseClass>PathwayPortionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="ThruwayPortion" modifier="Sealed" description="A TravelPortionElement specified using linear-referencing methods.">
        <BaseClass>TravelPortionElement</BaseClass>
        <BaseClass>IMainLinearElementSource</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
            <HiddenClass xmlns="CoreCustomAttributes.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="ThruwaySeparationPortion" modifier="Sealed" description="A TravelSeparationPortionElement specified using linear-referencing methods.">
        <BaseClass>TravelSeparationPortionElement</BaseClass>
        <BaseClass>IMainLinearElementSource</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
            <HiddenClass xmlns="CoreCustomAttributes.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="PathwayRefersToTravelPortion" strength="referencing" modifier="Abstract">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="refers to" polymorphic="true">
            <Class class="PathwayElement"/>
        </Source>
        <Target multiplicity="(0..*)" roleLabel="is referenced by" polymorphic="true">
            <Class class="TravelPortionElement"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="PathwayRefersToSingleTravelPortion" strength="referencing" modifier="Sealed">
        <BaseClass>PathwayRefersToTravelPortion</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="refers to" polymorphic="true">
            <Class class="PathwayElement"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is referenced by" polymorphic="true">
            <Class class="TravelPortionElement"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="PathwayRefersToRightTravelPortion" strength="referencing" modifier="Sealed">
        <BaseClass>PathwayRefersToTravelPortion</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="refers to" polymorphic="true">
            <Class class="PathwayElement"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is referenced by" polymorphic="true">
            <Class class="TravelPortionElement"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="PathwayRefersToLeftTravelPortion" strength="referencing" modifier="Sealed">
        <BaseClass>PathwayRefersToTravelPortion</BaseClass>
        <Source multiplicity="(0..1)" roleLabel="refers to" polymorphic="true">
            <Class class="PathwayElement"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is referenced by" polymorphic="true">
            <Class class="TravelPortionElement"/>
        </Target>
    </ECRelationshipClass>
    <ECEnumeration typeName="SignificantPointDefinition_ExpectedAtSurface" backingTypeName="int" isStrict="true">
        <ECEnumerator value="0" displayLabel="Internal"/>
        <ECEnumerator value="1" displayLabel="Top"/>
        <ECEnumerator value="2" displayLabel="Bottom"/>
        <ECEnumerator value="4" displayLabel="TopAndBottom"/>
    </ECEnumeration>
    <ECEntityClass typeName="SignificantPointDefinition" displayLabel="Significant Point Definition" modifier="Abstract" description="Base class for point constructs in a TypicalSection portion definition.">
        <BaseClass>bis:DefinitionElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="GenerateLinearElement" typeName="boolean" />
        <ECProperty propertyName="ExpectedAtSurface" typeName="SignificantPointDefinition_ExpectedAtSurface" />
    </ECEntityClass>
    <ECRelationshipClass typeName="ILinearElementRelatesToPathwayPortion" strength="referencing" modifier="Sealed">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="is associated with" polymorphic="true">
            <Class class="lr:ILinearElement"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is referenced by" polymorphic="true">
            <Class class="PathwayPortionElement"/>
        </Target>
        <ECNavigationProperty propertyName="SignificantPointDef" relationshipName="ILinearElementRelatesToSignificantPointDef" direction="Forward"/>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="ILinearElementRelatesToSignificantPointDef" strength="referencing" strengthDirection="Forward" modifier="Sealed">
        <Source multiplicity="(0..*)" polymorphic="true" roleLabel="refers to">
            <Class class="ILinearElementRelatesToPathwayPortion"/>
        </Source>
        <Target multiplicity="(0..1)" polymorphic="true" roleLabel="is referenced by">
            <Class class="SignificantPointDefinition"/>
        </Target>
    </ECRelationshipClass>
    <ECEntityClass typeName="TravelwaySignificantPointDef" displayLabel="Travelway Significant Point Definition" modifier="Sealed" description="Point constructs in a Travelway portion definition.">
        <BaseClass>SignificantPointDefinition</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="TravelwaySideSignificantPointDef" displayLabel="TravelwaySide Significant Point Definition" modifier="Sealed" description="Point constructs in a TravelwaySide portion definition.">
        <BaseClass>SignificantPointDefinition</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="TravelwayStructureSignificantPointDef" displayLabel="TravelwayStructure Significant Point Definition" modifier="Sealed" description="Point constructs in a TravelwayStructure portion definition.">
        <BaseClass>SignificantPointDefinition</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="DrawingGraphicRepresentsPathway" strength="referencing" modifier="Sealed">
        <BaseClass>bis:DrawingGraphicRepresentsElement</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="represents" polymorphic="true">
            <Class class="bis:DrawingGraphic"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is represented by" polymorphic="false">
            <Class class="PathwayElement"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="GraphicalElement3dRepresentsPathway" strength="referencing" modifier="Sealed">
        <BaseClass>rralign:GraphicalElement3dRepresentsSpatialElement</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="represents" polymorphic="true">
            <Class class="bis:GraphicalElement3d"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="is represented by" polymorphic="true">
            <Class class="PathwayElement"/>
        </Target>
    </ECRelationshipClass>
    <ECRelationshipClass typeName="GeometricElementBoundsContentForSheet" strength="referencing" modifier="None">
        <BaseClass>bis:ElementRefersToElements</BaseClass>
        <Source multiplicity="(0..*)" roleLabel="bounds content for" polymorphic="true">
            <Class class="bis:GeometricElement"/>
        </Source>
        <Target multiplicity="(0..1)" roleLabel="has content bounded by" polymorphic="false">
            <Class class="bis:Sheet"/>
        </Target>
    </ECRelationshipClass>
</ECSchema>
