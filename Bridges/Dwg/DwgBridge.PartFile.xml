<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">
  
    <Part Name="DwgBridgePRG" PrgOutputDir="DwgBridge">
        <SubProduct ProductName="DwgConverter" PartFile="iModelBridgeCore/DgnDbSync/DwgConverter" Repository="imodel02"/>
        <SubProduct ProductName="RealDwgBridge"/>
        <SubProduct ProductName="OpenDwgBridge"/>
    </Part>


    <Product Name="OpenDwgBridge" SaveProduct="true" BuildInstallSet="true">
        <SubPart PartName="OpenDwgImportExe" PartFile="iModelBridgeCore/DgnDbSync/DwgConverter"/>
        <SubPart PartName="iModelBridgeFwkExe" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="MakePackages" PartFile="iModelBridgeCore/DgnDbSync/bridge-addon"/>
        <SubPart PartName="Eula" PartFile="Eula" Repository="Miscdev-Eula"/>
        <SubPart PartName="InstallFrameworkBase" PartFile="InstallFramework" Repository="InstallFramework"/>
        <SubPart PartName="napi-stub" PartFile="node-addon-api/node-addon-api"/>
        <SubPart PartName="OpenDwgInstallFiles" />

        <Directories DirectoryListName="OpenDwgConverterDirList" PartFile="iModelBridgeCore/DgnDbSync/DwgConverter"/>
        <Directories DirectoryListName="DwgAppCommonDirList"  PartFile="iModelBridgeCore/DgnDbSync/DwgConverter"/>

        <InstallerWixFile SourceFile="installers\OpenDwgImporter"/>
        <WixBundleFile    SourceFile="installers\OpenDwgBundle"/>
    </Product>

    <Part Name="OpenDwgInstallFiles" BMakeFile="installers/OpenDwgInstallerFiles.prewire.mke" >
        <Bindings>
            <Files BindToWixBuild="true">
                OpenDwgInstallerFiles\OpenDwgBundle.bundle.wxs
                OpenDwgInstallerFiles\OpenDwgRegistryFrag.wxs
                OpenDwgInstallerFiles\OpenDwgInstaller.mki
                OpenDwgInstallerFiles\BundleOpenDwgInstaller.mki
            </Files>
        </Bindings>
    </Part>


    <Product Name="RealDwgBridge" SaveProduct="true" BuildInstallSet="true">
        <SubPart PartName="RealDwgImportExe" PartFile="iModelBridgeCore/DgnDbSync/DwgConverter"/>
        <SubPart PartName="iModelBridgeFwkExe" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="MakePackages" PartFile="iModelBridgeCore/DgnDbSync/bridge-addon"/>
        <SubPart PartName="Redistribute" PartFile="${SrcRoot}bsicommon/CvsPartFiles/realdwg" Repository="bin-realdwg" />
        <SubPart PartName="Eula" PartFile="Eula" Repository="Miscdev-Eula"/>
        <SubPart PartName="InstallFrameworkBase" PartFile="InstallFramework" Repository="InstallFramework"/>
        <SubPart PartName="napi-stub" PartFile="node-addon-api/node-addon-api"/>
        <SubPart PartName="RealDwgInstallFiles" />

        <Directories DirectoryListName="RealDwgConverterDirList"  PartFile="iModelBridgeCore/DgnDbSync/DwgConverter" Repository="imodel02"/>
        <Directories DirectoryListName="DwgAppCommonDirList"  PartFile="iModelBridgeCore/DgnDbSync/DwgConverter" Repository="imodel02"/>

        <InstallerWixFile SourceFile="installers\RealDwgImporter"/>
        <WixBundleFile    SourceFile="installers\RealDwgBundle"/>
    </Product>

    <Part Name="RealDwgInstallFiles" BMakeFile="installers/RealDwgInstallerFiles.prewire.mke" >
        <Bindings>
            <Files BindToWixBuild="true">
                RealDwgInstallerFiles\RealDwgBundle.bundle.wxs
                RealDwgInstallerFiles\DwgMergeModuleFrag.wxs
                RealDwgInstallerFiles\DwgRegistryFrag.wxs
                RealDwgInstallerFiles\RealDwgInstaller.mki
                RealDwgInstallerFiles\BundleRealDwgInstaller.mki
            </Files>
        </Bindings>
    </Part>

</BuildContext>
