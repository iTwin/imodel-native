<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">

    <!-- This is no longer an active product since the code split from DgnDbSync, and only kept for debugging build purposes -->
    <Product Name="DwgConverters" PrgOutputDir="DwgConverters" AddIn="true"> <!-- AddIn to ignore product directories -->
        <!-- DWG importer using OpenDwg -->
        <SubProduct ProductName="OpenDwgImporter" />
        <!-- DWG importer using RealDwg -->
        <SubProduct ProductName="RealDwgImporter" />
        <!-- Build unit tests -->
        <SubProduct ProductName="RealDwgImporterTests" />
        <!-- Run unit tests -->
        <SubPart PartName="RunRealDwgImporterTests" />
        <SubPart PartName="RunOpenDwgImporterTests" />
    </Product>

    <!-- Bind PublicAPI for DwgConverter into BuildContext/PublicAPI. -->
    <Part Name="PublicAPI" BentleyBuildMakeFile="prewire.mke">
        <Bindings>
            <PublicAPI Domain="Dwg" />
        </Bindings>
    </Part>

    <!-- Build the resources as a separate SubPart which will be shared by both parts to avoid sharing issues from multithreads -->
    <Part Name="DwgResources" BentleyBuildMakeFile="DwgResources.mke">
        <!-- include all that produce xliff's needed to go into our L10N db -->
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"              Repository="imodel02"/>
        <SubPart PartName="DgnPlatformDLL"      PartFile="iModelCore/DgnPlatform/DgnPlatform"      Repository="imodel02"/>
        <SubPart PartName="ImagePP"             PartFile="RealityCore/Imagepp/ImagePP"        Repository="imodel02"/>
        <SubPart PartName="Raster"              PartFile="Domains/RealityModeling/RealityModeling" Repository="imodel02"/>
        <Bindings>
            <Files ProductDirectoryName="DgnPlatformXliffs" Required="false" SubPartDirectory="xliffs">Delivery/xliffs/DwgImporter_en.xliff</Files>
            <Files ProductDirectoryName="Assets" ProductSubDirectory="sqlang">Delivery/DwgImporter_en-US.sqlang.db3</Files>
            <Files ProductDirectoryName="Assets">Delivery/ConvertConfig.xml</Files>
            <Files ProductDirectoryName="PublisherLoggingConfigXml">Delivery/DwgImporter.logging.config.xml</Files>
        </Bindings>
    </Part>


    <!-- Build DwgImporter using OpenDWG Toolkit -->
    <Product Name="OpenDwgImporter" SaveProduct="true" AddIn="true">
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="Docs"                LibType="Dynamic"/>
        <SubPart PartName="OpenDwgImportExe" />
    </Product>

    <Part Name="OpenDwgImportExe" BentleyBuildMakeFile="Apps/DwgImportExe.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=OpenDwg +dVendorVersion=210200" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"      Repository="imodel02"/>
        <SubPart PartName="iModelBridgeFwkExe"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <!-- Need to pull ShxFonts from RealDWG -->
        <SubPart PartName="RealDwg"             PartFile="${SrcRoot}bsicommon/CvsPartFiles/realdwg" Repository="bin-realdwg" />
        <SubPart PartName="DwgResources" />
        <SubPart PartName="OpenDwgBridgeDLL" />
        <SubPart PartName="OpenDwgImportDLL" />
        <Bindings>
            <Files ProductDirectoryName="OpenDwgImportAssemblies" SubPartDirectory="Files\OpenDwg">Delivery/OpenDwgImporter/DwgImporter.exe</Files>
        </Bindings>
    </Part>

    <Part Name="OpenDwgBridgeDLL" BentleyBuildMakeFile="Apps/DwgBridge.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=OpenDwg +dVendorVersion=210200" ApiNumber="M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"      Repository="imodel02"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="iModelBridgeFwk-en"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="OpenDwgImportDLL" />
        <Bindings>
            <Files ProductDirectoryName="OpenDwgImportAssemblies" SubPartDirectory="Files\OpenDwg">Delivery/OpenDwgImporter/$(shlibprefix)DwgBridge$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="OpenDwgDbLibs" SubPartDirectory="Files\OpenDwg" Required="false">Delivery/OpenDwgImporter/$(libprefix)DwgBridge$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="OpenDwgImportDLL" BentleyBuildMakeFile="DwgImporter.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=OpenDwg +dVendorVersion=210200" ApiNumber="212M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"              Repository="imodel02"/>
        <SubPart PartName="DgnPlatformDLL"      PartFile="iModelCore/DgnPlatform/DgnPlatform"          Repository="imodel02"/>
        <SubPart PartName="ImagePP"             PartFile="RealityCore/Imagepp/ImagePP"              Repository="imodel02"/>
        <SubPart PartName="Raster"              PartFile="Domains/RealityModeling/RealityModeling"      Repository="imodel02"/>
        <SubPart PartName="ECPresentation"      PartFile="iModelCore/ECPresentation/ECPresentation"       Repository="imodel02"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="OpenDwgDb"/>
        <Bindings>
            <Files ProductDirectoryName="OpenDwgImportAssemblies" SubPartDirectory="Files\OpenDwg">Delivery/OpenDwgImporter/DwgImporter$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="OpenDwgDbLibs" SubPartDirectory="Files\OpenDwg" Required="false">Delivery/OpenDwgImporter/$(libprefix)DwgImporter$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="OpenDwgDb" BentleyBuildMakeFile="DwgDb/DwgDbExchange.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=OpenDwg +dVendorVersion=210200 +dBUILD_DWGDB" ApiNumber="212M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"      PartFile="iModelCore/Bentley/Bentley"                   Repository="imodel02"/>
        <SubPart PartName="Teigha"          PartFile="${SrcRoot}bsicommon/CvsPartFiles/teigha"      Repository="bin-teigha"/>
        <SubPart PartName="RapidJson"       PartFile="Libsrc-Nugets"                                Repository="bsicommon"/>
        <SubPart PartName="PsolidShim_x64"  PartFile="iModelCore/BRepCore/BRepCore"/> <!-- so we more easily match what DgnPlatform uses -->
        <SubPart PartName="GeomDlls"        PartFile="iModelCore/GeomLibs/GeomLibs"/>
        <Bindings>
            <Libs ProductDirectoryName="OpenDwgDbLibs" Required="false">Delivery/OpenDwgImporter/$(libprefix)OpenDwgDbExchange$(libext)</Libs>
            <Assemblies ProductDirectoryName="OpenDwgDbAssemblies">Delivery/OpenDwgImporter/$(shlibprefix)OpenDwgDbExchange$(ApiNumber)$(shlibext)</Assemblies>
            <Assemblies ProductDirectoryName="OpenDwgDbAssemblies">Delivery/OpenDwgImporter/$(shlibprefix)OdGripPoints$(ApiNumber)$(shlibext)</Assemblies>
            <Files ProductDirectoryName="VendorNotices">Delivery/OpenDwgImporter/teigha-notice.txt</Files>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="OpenDwgConverterDirList">
      <ProductDirectory Name="ApplicationRoot"            Path="" />
      <ProductDirectory Name="OpenDwgImportAssemblies"    Deliver="true"                  RelativeTo="ApplicationRoot"/>
      <ProductDirectory Name="OpenDwgDbAssemblies"        Deliver="true"                  RelativeTo="ApplicationRoot"/>
      <ProductDirectory Name="OpenDwgAssemblies"          Deliver="true"                  RelativeTo="ApplicationRoot"/>
      <ProductDirectory Name="ShxFonts"                   Deliver="true"  Path="Fonts"    RelativeTo="ApplicationRoot"/>
      <ProductDirectory Name="MergeModules"               Deliver="false" />
      <ProductDirectory Name="RealDwgAssemblies"          Deliver="false" />
      <ProductDirectory Name="RealDwgAssembliesEnUS"      Deliver="false" />
      <ProductDirectory Name="SampleXData"                Deliver="false" />
      <ProductDirectory Name="SampleListProp"             Deliver="false" />
    </ProductDirectoryList>


    <!-- Build the default DwgImporter using RealDWG Toolkit -->
    <Product Name="RealDwgImporter" SaveProduct="true" AddIn="true">
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="RealDwgImportExe"/>
        <SubPart PartName="Docs"            LibType="Dynamic"/>
        <SubPart PartName="CodeSamples"/>
        <SubPart PartName="RealDwg"         PartFile="${SrcRoot}bsicommon/CvsPartFiles/realdwg"     Repository="bin-realdwg" />
    </Product>

    <Part Name="RealDwgImportExe" BentleyBuildMakeFile="Apps/DwgImportExe.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"      Repository="imodel02"/>
        <SubPart PartName="iModelBridgeFwkExe"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="DwgResources" />
        <SubPart PartName="RealDwgBridgeDLL" />
        <SubPart PartName="RealDwgImportDLL" />
        <Bindings>
            <Files ProductDirectoryName="RealDwgImportAssemblies" SubPartDirectory="Files\RealDwg2020">Delivery/RealDwg2020Importer/DwgImporter.exe</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwgBridgeDLL" BentleyBuildMakeFile="Apps/DwgBridge.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" ApiNumber="M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"      Repository="imodel02"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="iModelBridgeFwk-en"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="RealDwgImportDLL" />
        <Bindings>
            <Files ProductDirectoryName="RealDwgImportAssemblies" SubPartDirectory="Files\RealDwg2020">Delivery/RealDwg2020Importer/$(shlibprefix)DwgBridge$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="RealDwgDbLibs" SubPartDirectory="Files\RealDwg2020" Required="false">Delivery/RealDwg2020Importer/$(libprefix)DwgBridge$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwgImportDLL" BentleyBuildMakeFile="DwgImporter.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" ApiNumber="2020M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"              Repository="imodel02"/>
        <SubPart PartName="DgnPlatformDLL"      PartFile="iModelCore/DgnPlatform/DgnPlatform"          Repository="imodel02"/>
        <SubPart PartName="ImagePP"             PartFile="RealityCore/Imagepp/ImagePP"              Repository="imodel02"/>
        <SubPart PartName="Raster"              PartFile="Domains/RealityModeling/RealityModeling"      Repository="imodel02"/>
        <SubPart PartName="ECPresentation"      PartFile="iModelCore/ECPresentation/ECPresentation"       Repository="imodel02"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="RealDwgDb"/>
        <Bindings>
            <Files ProductDirectoryName="RealDwgImportAssemblies" SubPartDirectory="Files\RealDwg2020">Delivery/RealDwg2020Importer/$(shlibprefix)DwgImporter$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="RealDwgDbLibs" SubPartDirectory="Files\RealDwg2020" Required="false">Delivery/RealDwg2020Importer/$(libprefix)DwgImporter$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwgDb" BentleyBuildMakeFile="DwgDb/DwgDbExchange.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020 +dBUILD_DWGDB" ApiNumber="2020M02" OnlyPlatforms="x64" ExcludeLibType="Static">
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"      PartFile="iModelCore/Bentley/Bentley"                   Repository="imodel02"/>
        <SubPart PartName="RealDwg"         PartFile="${SrcRoot}bsicommon/CvsPartFiles/realdwg"     Repository="bin-realdwg" />
        <SubPart PartName="PsolidShim_x64"  PartFile="iModelCore/BRepCore/BRepCore"                 Repository="imodel02"/> <!-- so we more easily match what DgnPlatform uses -->
        <SubPart PartName="GeomDlls"        PartFile="iModelCore/GeomLibs/Geomlibs"                 Repository="imodel02" />
        <Bindings>
            <!-- Put the .lib file to a versioned sub-folder to avoid name collision -->
            <Files ProductDirectoryName="RealDwgDbLibs" SubPartDirectory="Libs\RealDwg2020" Required="false">Delivery/RealDwg2020Importer/$(libprefix)RealDwgDbExchange$(libext)</Files>
            <Assemblies ProductDirectoryName="RealDwgDbAssemblies">Delivery/RealDwg2020Importer/$(shlibprefix)RealDwgDbExchange$(ApiNumber)$(shlibext)</Assemblies>
            <Files ProductDirectoryName="VendorNotices">Delivery/RealDwg2020Importer/realdwg-notice.txt</Files>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="RealDwgConverterDirList">
        <ProductDirectory Name="ApplicationRoot"            Path="" />
        <ProductDirectory Name="RealDwgImportAssemblies"    Deliver="true"                  RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="RealDwgDbAssemblies"        Deliver="true"                  RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="RealDwgAssemblies"          Deliver="true"                  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="RealDwgAssembliesEnUS"      Deliver="true"  Path="en-US"    RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="ShxFonts"                   Deliver="true"  Path="Fonts"    RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="MergeModules"               Deliver="false"                 RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="OpenDwgAssemblies"          Deliver="false" />
        <ProductDirectory Name="SampleXData"                Deliver="false" />
        <ProductDirectory Name="SampleListProp"             Deliver="false" />
    </ProductDirectoryList>

    <ProductDirectoryList ListName="DwgAppCommonDirList">
        <ProductDirectory Name="ApplicationRoot"            Path="" />
        <ProductDirectory Name="VendorNotices"              Path="Notices" />
        <ProductDirectory Name="VendorNotices"              Path="Notices" LibType="static" />
        <ProductDirectory Name="BentleyEulaDelivery"        Path="Notices" />
        <ProductDirectory Name="DwgImporterDocs"            Deliver="false" />
        <ProductDirectory Name="Assemblies"                 Deliver="false" LibType="static" />
        <ProductDirectory Name="Assemblies"                 Deliver="true"                  RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="PublisherLoggingConfigXml"  Deliver="true"                  RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="Assets"                     Path="Assets"                   RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="Assets"                     Path="Assets" LibType="static"  RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="RealDwgDbLibs"              Deliver="false" />
        <ProductDirectory Name="OpenDwgDbLibs"              Deliver="false" />
        <ProductDirectory Name="ConfigDir"                  Deliver="false" />
        <ProductDirectory Name="DgnV8Dlls"                  Deliver="false" />
        <ProductDirectory Name="DgnV8DummyUstation"         Deliver="false" />
    </ProductDirectoryList>


    <!-- Build another DwgImporter using an older release of RealDWG Toolkit -->
    <Part Name="RealDwg2019ImportExe" BentleyBuildMakeFile="Apps/DwgImportExe.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2019" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"  PartFile="iModelCore/Bentley/Bentley"/>
        <SubPart PartName="iModelBridgeFwkExe"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="DwgResources" />
        <SubPart PartName="RealDwg2019BridgeDLL" />
        <SubPart PartName="RealDwg2019ImportDLL" />
        <Bindings>
            <Files ProductDirectoryName="RealDwg2019ImportAssemblies" SubPartDirectory="Files\RealDwg2019">Delivery/RealDwg2019Importer/DwgImporter.exe</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwg2019BridgeDLL" BentleyBuildMakeFile="Apps/DwgBridge.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2019" ApiNumber="M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="iModelBridgeFwk-en"  PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="RealDwg2019ImportDLL"/>
        <Bindings>
            <Files ProductDirectoryName="RealDwg2019ImportAssemblies" SubPartDirectory="Files\RealDwg2019">Delivery/RealDwg2019Importer/$(shlibprefix)DwgBridge$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="RealDwg2019DbLibs" SubPartDirectory="Files\RealDwg2019" Required="false">Delivery/RealDwg2019Importer/$(libprefix)DwgBridge$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwg2019ImportDLL" BentleyBuildMakeFile="DwgImporter.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2019" ApiNumber="2019M02" OnlyPlatforms="x64" ExcludeLibType="Static" >
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"          PartFile="iModelCore/Bentley/Bentley"/>
        <SubPart PartName="DgnPlatformDLL"      PartFile="iModelCore/DgnPlatform/DgnPlatform"/>
        <SubPart PartName="ImagePP"             PartFile="RealityCore/Imagepp/ImagePP"/>
        <SubPart PartName="Raster"              PartFile="Domains/RealityModeling/RealityModeling"/>
        <SubPart PartName="ECPresentation"      PartFile="iModelCore/ECPresentation/ECPresentation"/>
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridgeCore/DgnDbSync/iModelBridge"/>
        <SubPart PartName="RealDwg2019Db"/>
        <Bindings>
            <Files ProductDirectoryName="RealDwg2019ImportAssemblies" SubPartDirectory="Files\RealDwg2019">Delivery/RealDwg2019Importer/$(shlibprefix)DwgImporter$(ApiNumber)$(shlibext)</Files>
            <Files ProductDirectoryName="RealDwg2019DbLibs" SubPartDirectory="Files\RealDwg2019" Required="false">Delivery/RealDwg2019Importer/$(libprefix)DwgImporter$(libext)</Files>
        </Bindings>
    </Part>

    <Part Name="RealDwg2019Db" BentleyBuildMakeFile="DwgDb/DwgDbExchange.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2019 +dBUILD_DWGDB" ApiNumber="2019M02" OnlyPlatforms="x64" ExcludeLibType="Static">
        <SubPart PartName="PublicAPI"/>
        <SubPart PartName="BentleyDll"      PartFile="iModelCore/Bentley/Bentley"/>
        <SubPart PartName="RealDwg2019"     PartFile="${SrcRoot}bsicommon/CvsPartFiles/realdwg" Repository="bin-realdwg2019"/>
        <SubPart PartName="PsolidShim_x64"  PartFile="iModelCore/BRepCore/BRepCore"/>
        <SubPart PartName="GeomDlls"        PartFile="iModelCore/GeomLibs/Geomlibs"/>
        <Bindings>
            <Files ProductDirectoryName="RealDwg2019DbLibs" SubPartDirectory="Libs\RealDwg2019" Required="false">Delivery/RealDwg2019Importer/$(libprefix)RealDwgDbExchange$(libext)</Files>
            <Assemblies ProductDirectoryName="RealDwg2019DbAssemblies" SubPartDirectory="RealDwg2019">Delivery/RealDwg2019Importer/$(shlibprefix)RealDwgDbExchange$(ApiNumber)$(shlibext)</Assemblies>
            <Files ProductDirectoryName="VendorNotices">Delivery/RealDwg2019Importer/realdwg-notice.txt</Files>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="RealDwg2019ConverterDirList">
        <ProductDirectory Name="ApplicationRoot"                Path=""/>
        <ProductDirectory Name="RealDwg2019ImportAssemblies"    Deliver="true"                  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="RealDwg2019DbAssemblies"        Deliver="true"                  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="RealDwg2019Assemblies"          Deliver="true"                  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="RealDwg2019AssembliesEnUS"      Deliver="true"  Path="en-US"    RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="ShxFonts2019"                   Deliver="true"  Path="Fonts"    RelativeTo="ApplicationRoot"/>
    </ProductDirectoryList>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!-- Sample codes -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <Part Name="CodeSamples" OnlyPlatforms="x64">
        <SubPart PartName="ImportXData" />
        <SubPart PartName="ListProperty" />
    </Part>

    <Part Name="ImportXData" BentleyBuildMakeFile="Samples/XData/ImportXData.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" OnlyPlatforms="x64">
        <SubPart PartName="RealDwgImportDLL" />
        <SubPart PartName="RealDwgBridgeDLL" />
        <Bindings>
            <Files ProductDirectoryName="SampleXData" Required="false">Delivery/Samples/XData/ImportXData.h</Files>
            <Files ProductDirectoryName="SampleXData" Required="false">Delivery/Samples/XData/ImportXData.cpp</Files>
            <Files ProductDirectoryName="SampleXData" Required="false">Delivery/Samples/XData/SampleAffinity.cpp</Files>
            <Files ProductDirectoryName="SampleXData" Required="false">Delivery/Samples/XData/ImportXData.mke</Files>
        </Bindings>
    </Part>

    <Part Name="ListProperty" BentleyBuildMakeFile="Samples/ListProp/ListProperty.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" OnlyPlatforms="x64">
        <SubPart PartName="RealDwgImportDLL" />
        <SubPart PartName="RealDwgBridgeDLL" />
        <Bindings>
            <Files ProductDirectoryName="SampleListProp" Required="false">Delivery/Samples/ListProp/ListProperty.h</Files>
            <Files ProductDirectoryName="SampleListProp" Required="false">Delivery/Samples/ListProp/ListProperty.cpp</Files>
            <Files ProductDirectoryName="SampleListProp" Required="false">Delivery/Samples/ListProp/ListProperty.mke</Files>
        </Bindings>
    </Part>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!-- Documentation -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <Part Name="Docs" DeferType="BuildDocs" BentleyBuildMakeFile="Docs/BuildDoc.mke" OnlyPlatforms="x64">
        <RequiredRepository>Bsitools-Doxygen</RequiredRepository>
        <SubPart PartName="BentleyDocConfig"    PartFile="iModelCore/DgnPlatform/DgnPlatform" Repository="imodel02"/>
        <Bindings>
            <Directory SourceName="Delivery/docs" ProductDirectoryName="DwgImporterDocs" />
        </Bindings>
    </Part>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!-- DwgConverterTests -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <Part Name="GTestDependencies">
        <SubPart PartName="Gtest-Tools"         PartFile="iModelCore/BeGTest/BeGTest"   Repository="imodel02"/>
        <SubPart PartName="google_gtest_lib"    PartFile="iModelCore/util/gtest/gtest"  Repository="imodel02"/>
    </Part>

    <ProductDirectoryList ListName="TestsCommonDirList">
        <ProductDirectory Name="IgnoreList"                     Path="Ignore"/>
        <ProductDirectory Name="DgnV8ConverterSeedData"         Path="SeedData"/>
        <ProductDirectory Name="ImportTestData"                 Path="TestData"/>
        <ProductDirectory Name="DgnPlatformSqlang"              Path="sqlang"/>
    </ProductDirectoryList>

    <!-- RealDwgImporterTests -->
    <Part Name="RealDwgImporterTestsExe" BentleyBuildMakeFile="Tests/Tests.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=RealDwg +dVendorVersion=2020" OnlyPlatforms="x64">
        <SubPart PartName="GTestDependencies"/>
        <SubPart PartName="RealDwgImportExe"/>
        <SubPart PartName="DgnPlatformSqlang"   PartFile="iModelCore/DgnPlatform/DgnPlatform" Repository="imodel02"/>
        <SubPart PartName="napi-stub"           PartFile="node-addon-api/node-addon-api"/>
        <Bindings>
            <Files ProductDirectoryName="RealDwgImporterTestsExe">Delivery/RealDwgImporterTests/DwgImporterTests.exe</Files>
            <Files ProductDirectoryName="RealDwgImporterTestsExe">Delivery/RealDwgImporterTests/Test2dImporter.exe</Files>
            <Files ProductDirectoryName="Assets" Required="false">Delivery/RealDwgImporterTests/ImporterTestsConfig.xml</Files>
            <Files ProductDirectoryName="Assets" Required="false">Delivery/RealDwgImporterTests/DwgImporterTests.logging.config.xml</Files>
            <Files ProductDirectoryName="Assets" ProductSubDirectory="sqlang" Required="false">Delivery/RealDwgImporterTests/DwgImporterTests_en-US.sqlang.db3</Files>
            <Files ProductDirectoryName="Assets" ProductSubDirectory="Ignore" Required="false">Delivery/RealDwgImporterTests/ignore_list.txt</Files>
            <Directory SourceName="Delivery/RealDwgImporterTests/ImportTestData"  SubPartDirectory="TestData"  ProductDirectoryName="ImportTestData" Required="false"/>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="RealDwgTestsDirList">
        <ProductDirectory Name="RealDwgImporterTestsExe"        Path=""/>
    </ProductDirectoryList>

    <Product Name="RealDwgImporterTests" SaveProduct="false" OnlyPlatforms="x64">
        <SubPart PartName="RealDwgImporterTestsExe"/>
        <Directories DirectoryListName="RealDwgConverterDirList" />
        <Directories DirectoryListName="DwgAppCommonDirList"/>
        <Directories DirectoryListName="TestsCommonDirList"/>
        <Directories DirectoryListName="RealDwgTestsDirList"/>
    </Product>

    <Part Name="RunRealDwgImporterTests" DeferType="RunUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=RealDwgImporterTests -dGTEST_NAME=DwgImporterTests +dGTEST_LOGFILE_NAME=RealDwgImporterTests.log" OnlyPlatforms="x64" ExcludeLibType="Static">
        <SubProduct ProductName="RealDwgImporterTests" />
        <Bindings>
          <Files Required="false" SubPartDirectory="Gtest/Logs">Delivery/Gtest/Logs/RealDwgImporterTests.log</Files>
        </Bindings>
    </Part>

    <!-- OpenDwgImporterTests -->
    <Part Name="OpenDwgImporterTestsExe" BentleyBuildMakeFile="Tests/Tests.mke" BentleyBuildMakeOptions="+dDWGTOOLKIT=OpenDwg +dVendorVersion=210200" OnlyPlatforms="x64">
        <SubPart PartName="GTestDependencies"/>
        <SubPart PartName="OpenDwgImportExe"/>
        <SubPart PartName="DgnPlatformSqlang"   PartFile="iModelCore/DgnPlatform/DgnPlatform" Repository="imodel02"/>
        <SubPart PartName="napi-stub"           PartFile="node-addon-api/node-addon-api"/>
        <Bindings>
            <Files ProductDirectoryName="OpenDwgImporterTestsExe">Delivery/OpenDwgImporterTests/DwgImporterTests.exe</Files>
            <Files ProductDirectoryName="Assets" Required="false">Delivery/OpenDwgImporterTests/ImporterTestsConfig.xml</Files>
            <Files ProductDirectoryName="Assets" Required="false">Delivery/OpenDwgImporterTests/DwgImporterTests.logging.config.xml</Files>
            <Files ProductDirectoryName="Assets" ProductSubDirectory="sqlang" Required="false">Delivery/OpenDwgImporterTests/DwgImporterTests_en-US.sqlang.db3</Files>
            <Files ProductDirectoryName="Assets" ProductSubDirectory="Ignore" Required="false">Delivery/OpenDwgImporterTests/ignore_list.txt</Files>
            <Directory SourceName="Delivery/OpenDwgImporterTests/ImportTestData"  SubPartDirectory="TestData"  ProductDirectoryName="ImportTestData" Required="false"/>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="OpenDwgTestsDirList">
        <ProductDirectory Name="OpenDwgImporterTestsExe"        Path=""/>
    </ProductDirectoryList>

    <Product Name="OpenDwgImporterTests" SaveProduct="false" OnlyPlatforms="x64">
        <SubPart PartName="OpenDwgImporterTestsExe"/>
        <Directories DirectoryListName="OpenDwgConverterDirList" />
        <Directories DirectoryListName="DwgAppCommonDirList"/>
        <Directories DirectoryListName="TestsCommonDirList"/>
        <Directories DirectoryListName="OpenDwgTestsDirList"/>
    </Product>

    <Part Name="RunOpenDwgImporterTests" DeferType="RunUnitTests" BentleyBuildMakeFile="$(BuildContext)/SubParts/BeGTest/gtest/RunGtest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=OpenDwgImporterTests -dGTEST_NAME=DwgImporterTests +dGTEST_LOGFILE_NAME=OpenDwgImporterTests.log" OnlyPlatforms="x64" ExcludeLibType="Static">
        <SubProduct ProductName="OpenDwgImporterTests" />
        <Bindings>
          <Files Required="false" SubPartDirectory="Gtest/Logs">Delivery/Gtest/Logs/OpenDwgImporterTests.log</Files>
        </Bindings>
    </Part>

</BuildContext>
