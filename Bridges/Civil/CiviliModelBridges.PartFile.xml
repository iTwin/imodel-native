<?xml version="1.0" encoding="utf-8"?>

<BuildContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../bsicommon/build/PartFile.xsd">
    
    <!-- ........................................................................................................................................ -->
    <!-- ORDBridge    The bridge itself is a product, containing all of the needed shared libraries, plus assets. -->
    <!-- ........................................................................................................................................ -->

    <Part Name="Cif_InternalSDK" BentleyBuildMakeFile="ORDBridge/Cif.Prewire.mke" OnlyPlatforms="x64" ExcludeLibType="Static">
        <SdkSource>Cif_InternalSDK</SdkSource>
        <Bindings>
            <PublicAPI Domain="CifApi" />
            <Files ProductDirectoryName="CifDlls" SubPartDirectory="CifSdk/Dlls" Required="true">
                Delivery/CifSdk/Dlls/*.dll
            </Files>
            <Directory SourceName="Delivery/CifSdk/Libs" Required="false" SubPartDirectory="CifLibs" />
            <Directory SourceName="Delivery/CifSdk/ECSchemas" ProductDirectoryName="CifDlls" ProductSubDirectory="ECSchemas" SubPartDirectory="CifSdk/ECSchemas" Required="true"/>
        </Bindings>
    </Part>

    <ProductDirectoryList ListName="ORDBridgeDirectoryList">
        <ProductDirectory Name="ApplicationRoot" Path=""/>
        <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot" LibType="static"/>
        <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"  LibType="static"/>
        <ProductDirectory Name="BentleyClientSharedAssemblies"  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="BentleyDesktopClientApi"  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="BentleyDesktopClientApi_Native"  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="ConfigDir"  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="PublisherLoggingConfigXml"  RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices"/>
        <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices" LibType="static"/>
        <ProductDirectory Name="DgnV8Dlls"  Path="DgnV8"/>
        <ProductDirectory Name="CifDlls"  Path="Cif"/>
    </ProductDirectoryList>

    <Part Name="ORDBridgeLibrary" BentleyBuildMakeFile="ORDBridge/ORDBridge.mke" >
        <SubPart PartName="ORDBridgePublicAPI"/>
        <SubPart PartName="VersionedV8_InternalSDK" Repository="DgnDbSync" PartFile="DgnDbSync"/>
        <SubPart PartName="Cif_InternalSDK" />
        <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridge" Repository="DgnDbSync" />
        <SubPart PartName="DgnV8ConverterDLL" Repository="DgnDbSync" PartFile="DgnDbSync"/>
        <SubPart PartName="RoadRailPhysical" PartFile="RoadRailPhysical" Repository="DgnDomains-RoadRailPhysical"/>
        <SubPart PartName="DgnV8ConverterSqlang" PartFile="DgnDbSync" Repository="DgnDbSync" />
        <Bindings>
            <Libs Required="false">Delivery/$(libprefix)ORDBridge$(libext)</Libs>
            <Assemblies>Delivery/$(shlibprefix)ORDBridge$(shlibext)</Assemblies>
        </Bindings>
    </Part>

    <Part Name="ORDBridgeInstallerFiles" BMakeFile="ORDBridge/installer/installer.prewire.mke">
        <SubPart PartName="InstallFrameworkBase" PartFile="InstallFramework" Repository="InstallFramework"/>
        <Bindings>
            <Files BindToWixBuild="true">
                InstallerBuildFiles\*.wxs
                InstallerBuildFiles\*.mki
            </Files>
        </Bindings>
    </Part>

    <Product Name="ORDBridge" PrgOutputDir="ORDBridge" BuildInstallSet="true" SaveProduct="true">
        <SubProduct ProductName="PublishORDToBIM"/>
        <SubPart PartName="ORDBridgeInstallerFiles"/>
        <SubPart PartName="ORDBridgeLibrary" />
        <SubPart PartName="iModelBridgeFwkExe-Windows" PartFile="iModelBridge" Repository="DgnDbSync" />
        <SubPart PartName="RoadRailAlignment-Tested" Repository="DgnDomains-RoadRailAlignment" PartFile="RoadRailAlignment" />
        <SubPart PartName="RoadRailPhysical-Tested" Repository="DgnDomains-RoadRailPhysical" PartFile="RoadRailPhysical" />
        <SubPart PartName="CiviliModelBridgesTested" />        
        <InstallerWixFile SourceFile="ORDBridge\Installer\ORDBridgeInstaller"/>
        <Directories DirectoryListName="ORDBridgeDirectoryList" />
    </Product>

    <Part Name="ORDBridgePublicAPI" BentleyBuildMakeFile="ORDBridge/ORDBridge.prewire.mke">
        <Bindings>
            <PublicAPI Domain="ORDBridge"/>
        </Bindings>
    </Part>

    <!-- ........................................................................................................................................ -->
    <!-- ORDBridgeTestApp    This is a test application. It links with and runs the bridge in a standalone mode.                                 -->
    <!-- ........................................................................................................................................ -->

    <Product Name="ORDBridgeTestApp">
        <SubPart PartName="ORDBridgeTestAppExe" />
        <Directories DirectoryListName="ORDBridgeTestAppDirectoryList" />
    </Product>

    <ProductDirectoryList ListName="ORDBridgeTestAppDirectoryList">
        <ProductDirectory Name="ApplicationRoot"                Path=""/>
        <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot" LibType="static"/>
        <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"/>
        <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"  LibType="static"/>
        <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices"/>
        <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices" LibType="static"/>
        <ProductDirectory Name="DgnV8Dlls"  Path="DgnV8"/>
        <ProductDirectory Name="CifDlls"  Path="Cif"/>
        <ProductDirectory Name="ScalableMeshV8SDK" Deliver="false" />
        <ProductDirectory Name="BentleyDesktopClientApi" RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="BentleyDesktopClientApi_Native" RelativeTo="ApplicationRoot" />
        <ProductDirectory Name="BentleyClientSharedAssemblies" RelativeTo="ApplicationRoot"/>        
    </ProductDirectoryList>

    <Part Name="ORDBridgeTestAppExe" BentleyBuildMakeFile="ORDBridge/TestApp/ORDBridgeTestApp.mke" >
        <SubPart PartName="ORDBridgeLibrary"/>
        <SubPart PartName="DgnV8ConverterSqlang" PartFile="DgnDbSync" Repository="DgnDbSync" />
        <SubPart PartName="iModelBridgeFwk-en" PartFile="iModelBridge"     Repository="DgnDbSync" />
        <Bindings>
            <Files ProductDirectoryName="ApplicationRoot">Delivery/ORDBridgeTestApp$(exeext)</Files>
        </Bindings>
    </Part>

    <Part Name="PrewireForORDBridgeUnitTests" BentleyBuildMakeFile="ORDBridge/Tests/prewire.mke">
        <SubPart PartName="ORD-TestFiles" PartFile="CivilTestFiles" Repository="Civil-TestFiles"/>
        <Bindings>
            <Files ProductDirectoryName="UnitTests-IgnoreList"  ProductSubDirectory="CiviliModelBridgesORDBridge" SubPartDirectory="UnitTests/CivilORDBridge"> Delivery/UnitTests/ordbridge_ignore_list.txt</Files>
        </Bindings>
    </Part>

    <Part Name="BackdoorForORDBridgeUnitTests" BentleyBuildMakeFile="ORDBridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=BackdoorORDBridge">
        <SubProduct ProductName="ORDBridgeTestApp"/>
        <SubPart PartName="PrewireForORDBridgeUnitTests" />
        <SubPart PartName="RoadRailPhysical" PartFile="RoadRailPhysical" Repository="DgnDomains-RoadRailPhysical"/>
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesORDBridge/Backdoor" SourceName="Delivery/UnitTests/Objects/BackdoorORDBridge"/>
        </Bindings>
    </Part>

    <Part Name="CiviliModelBridgesORDBridge-UnitTests-NonPublished" BentleyBuildMakeFile="ORDBridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=NonPublishedORDBridge">
        <SubPart PartName="BackdoorForORDBridgeUnitTests" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesORDBridge/NonPublished" SourceName="Delivery/UnitTests/Objects/NonPublishedORDBridge"/>
        </Bindings>
    </Part>

    <Part Name="CiviliModelBridgesORDBridge-UnitTests-Published" BentleyBuildMakeFile="ORDBridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=PublishedORDBridge">
        <SubPart PartName="BackdoorForORDBridgeUnitTests" />
        <Bindings>
            <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesORDBridge/Published" SourceName="Delivery/UnitTests/Objects/PublishedORDBridge"/>
        </Bindings>
    </Part>

    <!-- Put the unit tests into the form of a product. This product will be consumed by a platform-specific "runner" product. -->
    <!-- Lay out the test product according to the standard BeGTest layout. -->
    <Part Name="Tests">
        <!-- We probabaly need a PublishedAPI part for this product.  If we do, then uncomment the following line -->
        <!-- <SubPart PartName="UnitTests-Published" /> -->
        <SubPart PartName="CiviliModelBridgesORDBridge-UnitTests-Published" />
        <SubPart PartName="CiviliModelBridgesORDBridge-UnitTests-NonPublished" />
        <!--SubPart PartName="CiviliModelBridges-CrossPlatform-UnitTests-NonPublished" /-->

        <!-- We can also have Scenario and Performance tests, they'll get their own Parts -->

        <!-- Conceptstation calls the sqlang parts here too -->
    </Part>

    <Product Name="CiviliModelBridges-Tests">
        <!-- *** TRICKY: Must depend on a part in begtest repository, in order to use a productdirectorylist from there. -->

        <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
        <SubPart PartName="Tests"/>
        <!-- Lay out the Tests test product according to the standard BeGTest layout: -->
        <Directories Repository="BeGTest" PartFile="BeGTest" DirectoryListName="CollectionProduct"/>
    </Product>

    <!-- Build a gtest exe to run the tests -->
    <Product Name="Gtest-CiviliModelBridges-Tests">
        <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest" />
        <SubPart PartName="Gtest" />
    </Product>

    <Part Name="Gtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGTest.mke" BentleyBuildMakeOptions="
        -dTEST_NAME=CiviliModelBridgesTests
        -dTEST_COLLECTION_PRODUCT=CiviliModelBridges-Tests
        -dTEST_FRAMEWORK_SQLANG=DgnClientFx_en.sqlang.db3" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="CiviliModelBridges-Tests" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest" />
        <Bindings>
            <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/CiviliModelBridgesTests/Assemblies/*</Files>
            <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/CiviliModelBridgesTests/Assets" />
        </Bindings>
    </Part>

    <Part Name="RunGtest" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGTest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=Gtest-CiviliModelBridges-Tests -dGTEST_NAME=CiviliModelBridgesTests -dGTEST_SHOW_PROGRESS" OnlyPlatforms="x86,x64,MacOs*,Linux*">
        <SubProduct ProductName="Gtest-CiviliModelBridges-Tests" />
        <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest" />
    </Part>

    <Part Name="CiviliModelBridgesTested">
        <SubPart PartName="RunGtest" />
    </Part>

  <!-- ........................................................................................................................................ -->
  <!-- PublishORDToBIM    This is a utility application. It links with and runs the bridge in a standalone mode.                                 -->
  <!-- ........................................................................................................................................ -->

  <Product Name="PublishORDToBIM">
    <SubPart PartName="PublishORDToBIMExe" />
    <Directories DirectoryListName="PublishORDToBIMDirectoryList" />
  </Product>

  <ProductDirectoryList ListName="PublishORDToBIMDirectoryList">
    <ProductDirectory Name="ApplicationRoot"                Path=""/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot" LibType="static"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"  LibType="static"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices" LibType="static"/>
    <ProductDirectory Name="DgnV8Dlls"  Path="DgnV8"/>
    <ProductDirectory Name="CifDlls"  Path="Cif"/>
    <ProductDirectory Name="ScalableMeshV8SDK" Deliver="false" />
    <ProductDirectory Name="BentleyDesktopClientApi" RelativeTo="ApplicationRoot" />
    <ProductDirectory Name="BentleyDesktopClientApi_Native" RelativeTo="ApplicationRoot" />
    <ProductDirectory Name="BentleyClientSharedAssemblies" RelativeTo="ApplicationRoot"/>
  </ProductDirectoryList>

  <Part Name="PublishORDToBIMExe" BentleyBuildMakeFile="ORDBridge/PublishORDToBIM/PublishORDToBIM.mke" >
    <SubPart PartName="ORDBridgeLibrary"/>
    <SubPart PartName="DgnV8ConverterSqlang" PartFile="DgnDbSync" Repository="DgnDbSync" />
    <SubPart PartName="iModelBridgeFwk-en" PartFile="iModelBridge"     Repository="DgnDbSync" />
    <Bindings>
      <Files ProductDirectoryName="ApplicationRoot">Delivery/PublishORDToBIM$(exeext)</Files>
    </Bindings>
  </Part>

  <!-- ........................................................................................................................................ -->
  <!-- CS06Bridge    The bridge itself is a product, containing all of the needed shared libraries, plus assets. -->
  <!-- ........................................................................................................................................ -->

  <ProductDirectoryList ListName="CS06BridgeDirectoryList">
    <ProductDirectory Name="ApplicationRoot" Path=""/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot" LibType="static"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"  LibType="static"/>
    <ProductDirectory Name="BentleyClientSharedAssemblies"  RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="BentleyDesktopClientApi"  RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="BentleyDesktopClientApi_Native"  RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="ConfigDir"  RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="PublisherLoggingConfigXml"  RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices" LibType="static"/>
    <ProductDirectory Name="CSDgnDb06Dlls"  RelativeTo="ApplicationRoot" Path="CSDgnDb06"/>
  </ProductDirectoryList>

  <Part Name="CS06BridgeLibrary" BentleyBuildMakeFile="CS06Bridge/CS06Bridge.mke" >
    <SubPart PartName="CS06BridgePublicAPI"/>
    <SubPart PartName="iModelBridgeLibrary" PartFile="iModelBridge" Repository="DgnDbSync" />
    <SubPart PartName="DgnDb06BimTeleporterLibrary" PartFile="CivilDataExchange" Repository="Civil-DataExchange" />
    <SubPart PartName="LinearReferencing" PartFile="LinearReferencing" Repository="DgnDomains-LinearReferencing"/>
    <SubPart PartName="RoadRailAlignment" PartFile="RoadRailAlignment" Repository="DgnDomains-RoadRailAlignment"/>
    <SubPart PartName="RoadRailPhysical" PartFile="RoadRailPhysical" Repository="DgnDomains-RoadRailPhysical"/>
    <Bindings>
      <Libs Required="false">Delivery/$(libprefix)CS06Bridge$(libext)</Libs>
      <Assemblies>Delivery/$(shlibprefix)CS06Bridge$(shlibext)</Assemblies>
    </Bindings>
  </Part>

  <Part Name="CS06BridgeInstallerFiles" BMakeFile="CS06Bridge/installer/installer.prewire.mke">
    <SubPart PartName="InstallFrameworkBase" PartFile="InstallFramework" Repository="InstallFramework"/>
    <Bindings>
      <Files BindToWixBuild="true">
        InstallerBuildFiles\*.wxs
        InstallerBuildFiles\*.mki
      </Files>
    </Bindings>
  </Part>

  <Product Name="CS06Bridge" PrgOutputDir="CS06Bridge" BuildInstallSet="true" SaveProduct="true">
    <SubPart PartName="CS06BridgeInstallerFiles"/>
    <SubPart PartName="CS06BridgeLibrary" />
    <SubPart PartName="iModelBridgeFwkExe-Windows" PartFile="iModelBridge" Repository="DgnDbSync" />
    <InstallerWixFile SourceFile="CS06Bridge\Installer\CS06BridgeInstaller"/>
    <Directories DirectoryListName="CS06BridgeDirectoryList" />
  </Product>

  <Part Name="CS06BridgePublicAPI" BentleyBuildMakeFile="CS06Bridge/CS06Bridge.prewire.mke">
    <Bindings>
      <PublicAPI Domain="CS06Bridge"/>
    </Bindings>
  </Part>

  <!-- ........................................................................................................................................ -->
  <!-- ORDBridgeTestApp    This is a test application. It links with and runs the bridge in a standalone mode.                                 -->
  <!-- ........................................................................................................................................ -->

  <Product Name="CS06BridgeTestApp">
    <SubPart PartName="CS06BridgeTestAppExe" />
    <Directories DirectoryListName="CS06BridgeTestAppDirectoryList" />
  </Product>

  <ProductDirectoryList ListName="CS06BridgeTestAppDirectoryList">
    <ProductDirectory Name="ApplicationRoot"                Path=""/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assemblies"   RelativeTo="ApplicationRoot"  LibType="static"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="Assets"  Path="Assets" RelativeTo="ApplicationRoot"  LibType="static"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices"/>
    <ProductDirectory Name="VendorNotices"  RelativeTo="ApplicationRoot" Path="Notices" LibType="static"/>
    <ProductDirectory Name="DgnV8Dlls"  Path="DgnV8"/>
    <ProductDirectory Name="CifDlls"  Path="Cif"/>
    <ProductDirectory Name="ScalableMeshV8SDK" Deliver="false" />
    <ProductDirectory Name="BentleyDesktopClientApi" RelativeTo="ApplicationRoot" />
    <ProductDirectory Name="BentleyDesktopClientApi_Native" RelativeTo="ApplicationRoot" />
    <ProductDirectory Name="BentleyClientSharedAssemblies" RelativeTo="ApplicationRoot"/>
    <ProductDirectory Name="CSDgnDb06Dlls" RelativeTo="ApplicationRoot" Path="CSDgnDb06"/>
  </ProductDirectoryList>

  <Part Name="CS06BridgeTestAppExe" BentleyBuildMakeFile="CS06Bridge/TestApp/CS06BridgeTestApp.mke" >
    <SubPart PartName="CS06BridgeLibrary"/>
    <SubPart PartName="DgnV8ConverterSqlang" PartFile="DgnDbSync" Repository="DgnDbSync" />
    <SubPart PartName="iModelBridgeFwk-en" PartFile="iModelBridge"     Repository="DgnDbSync" />
    <Bindings>
      <Files ProductDirectoryName="ApplicationRoot">Delivery/CS06BridgeTestApp$(exeext)</Files>
    </Bindings>
  </Part>

  <Part Name="PrewireForCS06BridgeUnitTests" BentleyBuildMakeFile="CS06Bridge/Tests/prewire.mke">
    <SubPart PartName="CS06-TestFiles" PartFile="CivilTestFiles" Repository="Civil-TestFiles"/>
    <Bindings>
      <Files ProductDirectoryName="UnitTests-IgnoreList"  ProductSubDirectory="CiviliModelBridgesCS06Bridge" SubPartDirectory="UnitTests/CivilCS06Bridge"> Delivery/UnitTests/cs06bridge_ignore_list.txt</Files>
    </Bindings>
  </Part>

  <Part Name="BackdoorForCS06BridgeUnitTests" BentleyBuildMakeFile="CS06Bridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=BackdoorCS06Bridge">
    <SubProduct ProductName="CS06BridgeTestApp"/>
    <SubPart PartName="PrewireForCS06BridgeUnitTests" />
    <Bindings>
      <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesCS06Bridge/Backdoor" SourceName="Delivery/UnitTests/Objects/BackdoorCS06Bridge"/>
    </Bindings>
  </Part>

  <Part Name="CiviliModelBridgesCS06Bridge-UnitTests-NonPublished" BentleyBuildMakeFile="CS06Bridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=NonPublishedCS06Bridge">
    <SubPart PartName="BackdoorForCS06BridgeUnitTests" />
    <Bindings>
      <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesCS06Bridge/NonPublished" SourceName="Delivery/UnitTests/Objects/NonPublishedCS06Bridge"/>
    </Bindings>
  </Part>

  <Part Name="CiviliModelBridgesCS06Bridge-UnitTests-Published" BentleyBuildMakeFile="CS06Bridge/Tests/BuildTests.mke" BentleyBuildMakeOptions="-dTestDir=PublishedCS06Bridge">
    <SubPart PartName="BackdoorForCS06BridgeUnitTests" />
    <Bindings>
      <Directory ProductDirectoryName="UnitTests-Objects"    ProductSubDirectory="CiviliModelBridgesCS06Bridge/Published" SourceName="Delivery/UnitTests/Objects/PublishedCS06Bridge"/>
    </Bindings>
  </Part>

  <!-- Put the unit tests into the form of a product. This product will be consumed by a platform-specific "runner" product. -->
  <!-- Lay out the test product according to the standard BeGTest layout. -->
  <Part Name="CS06BridgeTests">
    <!-- We probabaly need a PublishedAPI part for this product.  If we do, then uncomment the following line -->
    <!-- <SubPart PartName="UnitTests-Published" /> -->
    <SubPart PartName="CiviliModelBridgesCS06Bridge-UnitTests-Published" />
    <SubPart PartName="CiviliModelBridgesCS06Bridge-UnitTests-NonPublished" />
    
    <!-- We can also have Scenario and Performance tests, they'll get their own Parts -->

    <!-- Conceptstation calls the sqlang parts here too -->
  </Part>

  <Product Name="CS06-CiviliModelBridges-Tests">
    <!-- *** TRICKY: Must depend on a part in begtest repository, in order to use a productdirectorylist from there. -->

    <SubPart Repository="BeGTest" PartFile="BeGTest" PartName="Base" />
    <SubPart PartName="CS06BridgeTests"/>
    <!-- Lay out the Tests test product according to the standard BeGTest layout: -->
    <Directories Repository="BeGTest" PartFile="BeGTest" DirectoryListName="CollectionProduct"/>
  </Product>

  <!-- Build a gtest exe to run the tests -->
  <Product Name="Gtest-CS06-CiviliModelBridges-Tests">
    <Directories DirectoryListName="GtestProduct" Repository="BeGTest" PartFile="BeGTest" />
    <SubPart PartName="Gtest-CS06" />
  </Product>

  <Part Name="Gtest-CS06" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/buildGTest.mke" BentleyBuildMakeOptions="
        -dTEST_NAME=CS06CiviliModelBridgesTests
        -dTEST_COLLECTION_PRODUCT=CS06-CiviliModelBridges-Tests
        -dTEST_FRAMEWORK_SQLANG=DgnClientFx_en.sqlang.db3" OnlyPlatforms="x86,x64,MacOs*,Linux*">
    <SubProduct ProductName="CS06-CiviliModelBridges-Tests" />
    <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest" />
    <Bindings>
      <Files ProductDirectoryName="Gtest-NativeAssemblies">Delivery/Gtest/CS06CiviliModelBridgesTests/Assemblies/*</Files>
      <Directory ProductDirectoryName="Gtest-Assets" SourceName="Delivery/Gtest/CS06CiviliModelBridgesTests/Assets" />
    </Bindings>
  </Part>

  <Part Name="RunGtest-CS06" BentleyBuildMakeFile="${SrcRoot}BeGTest/gtest/RunGTest.mke" BentleyBuildMakeOptions="-dGTEST_PRODUCT=Gtest-CS06-CiviliModelBridges-Tests -dGTEST_NAME=CS06CiviliModelBridgesTests -dGTEST_SHOW_PROGRESS" OnlyPlatforms="x86,x64,MacOs*,Linux*">
    <SubProduct ProductName="Gtest-CS06-CiviliModelBridges-Tests" />
    <SubPart PartName="Gtest-Tools" Repository="BeGTest" PartFile="BeGTest" />
  </Part>

  <Part Name="CS06CiviliModelBridgesTested">
    <SubPart PartName="CivilDataExchangeTested" Repository="Civil-DataExchange" PartFile="CivilDataExchange" />
    <SubPart PartName="RunGtest-CS06" />
  </Part>

</BuildContext>
